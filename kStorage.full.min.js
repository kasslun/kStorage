/*!
 * 本地存储框架kStorgae v1.0
 * 说明：本文件支持IE6-7，如果不需要支持IE6-7请使用kStorage.min.js
 *
 * 开发日期: 2013-11-5
 * 压缩工具：uglifyjs
 * 依赖:无
 * 全局变量：kStorage, kst;
 * 项目地址: https://github.com/kasslun/kStorage/
 * 详细说明: http://kasslun.github.io/kStorage/
 */
!function(t){"use strict"
    var e,r,a,o=0,n=Number.MAX_VALUE,i=function(){},s=t.kst=t.kStorage={VERSION:"1.0",type:"none",support:!0,use:null,info:i,destroy:i},f=t.localStorage,u="[object Storage]",c=t.document,g=t.JSON||{}
    o=Math.min(o,7),"object"==typeof f&&("function"==typeof f.toString&&(e=""+f),e!==u&&f.constructor&&(e=""+f.constructor)),e===u?s.type="storage":c.documentElement.addBehavior&&(s.type="userData"),r=s._tool={dA:o,mA:n,coreToString:Object.prototype.toString,storage:t.localStorage,initObj:function(t){return delete t._data,delete t._info,t.set=t.remove=t.clear=function(){return this},t.get=t.count=function(){},t},error:function(t){throw Error(t)},getStorageName:function(t){return"string"==typeof t&&/^\w+$/g.test(t)||this.error("storageId Must be made by letter, numbers and underline"),"cs_"+t+"_"},filterName:function(t){"string"!=typeof t&&this.error("arg 'name' must be a string")},getExpiresDate:function(t){var e=new Date
        return e.setTime(e.getTime()+864e5*t),e.toUTCString()},random:function(){return(""+Math.random()).substring(2,10)-0},fixMaxAge:function(t){var e=typeof t
        return"number"===e?(t=0>t?0:t,Math.min(parseInt(t,10),this.mA)):void 0},stringifyJSON:g.stringify,parseJSON:g.parse},s._publicMethods={set:function(t,e){var a,o,n,i,s
        if(r.updateData(this),o=this._data,"object"==typeof o){if(n=r.stringifyJSON,"[object Object]"===r.coreToString.call(t))for(a in t)t.hasOwnProperty(a)&&(i=t[a],void 0===i?void 0!==o[a]&&(s=!0,delete o[a]):(i=n(i),o[a]!==i&&(s=!0,o[a]=i)))
        else r.filterName(t),void 0===e?e!==o[t]&&(s=!0,delete o[t]):(e=n(e),e!==o[t]&&(s=!0,o[t]=e))
            s&&r.setData(this)}return this},get:function(t){var e,a
        return r.updateData(this),r.filterName(t),e=this._data,"object"==typeof e&&(a=e[t],void 0!==a)?r.parseJSON(a):void 0},count:function(){var t,e,a
        if(r.updateData(this),e=this._data,"object"==typeof e){a=0
            for(t in e)a++
            return a}},remove:function(t){var e
        return r.updateData(this),r.filterName(t),e=this._data,"object"==typeof e&&void 0!==e[t]&&(delete e[t],r.setData(this)),this},clear:function(){return r.updateData(this),"object"==typeof this._data&&(this._data={},r.setData(this)),this},setMaxAge:function(t){t=r.fixMaxAge(t),void 0!==t&&(r.updateData(this),this._info&&(this._info.a=t,r.setInfo(this)))},getMaxAge:function(){return r.updateData(this),this._info?this._info.a:void 0}},"none"!==s.type?(a=/cs_kStorage_=1/,a.test(c.cookie)||(c.cookie="cs_kStorage_=1;path=/",s._firstLoad=!0)):(s.support=!1,s.use=function(){return s._tool.initObj({})})}(window),function(t){"use strict"
    function e(t,e,a){var o=(new Date).getTime()
        this._storageName=t,a?(this._data={},this._info={d:o,a:void 0===e?r.dA:e},r.setData(this)):(this._data=r.getItem(t)||{},this._info=r.getItem(t+n),this._info.d=o,r.setInfo(this))}var r,a,o,n,i=t.kStorage
    "storage"===i.type&&(r=i._tool,a=r.storage,o={},n="i",i.use=function(t,a){var i,s=r.getStorageName(t)
        return o[s]?o[s]:(r.createCallBack&&r.createCallBack(t),(i=r.getItem(s+n))?(o[s]=new e(s,void 0,!1),o[s]):(o[s]=new e(s,r.fixMaxAge(a),!0),o[s]))},i.exists=function(t){return!!this.info(t)},i.info=function(t){var e=r.getStorageName(t),a=r.getItem(e+n)
        return a?a:null},i.destroy=function(t){var e=r.getStorageName(t),i=o[e]
        a.removeItem(e),a.removeItem(e+n),i&&(r.initObj(i),delete o[e])},e.prototype=i._publicMethods,r.setData=function(t){try{a.setItem(t._storageName,this.stringifyJSON(t._data))}catch(e){}t._info.s=this.random(),this.setInfo(t)},r.setInfo=function(t){a.setItem(t._storageName+n,this.stringifyJSON(t._info))},r.updateData=function(t){var e=t._storageName,a=t._info,o=r.getItem(e+n)
        o?a&&a.s===o.s||(t._data=r.getItem(e)||{},t._info=o):t._data=t._info=void 0},r.getItem=function(t){var e
        try{e=this.parseJSON(a.getItem(t))}catch(r){}return e})}(window),function(tool){"use strict"
    var f
    if("function"!=typeof tool.stringifyJSON){f=function(t){return 10>t?"0"+t:t},"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()})
        var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep,quote=function(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t]
            return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'},str=function(t,e){var r,a,o,n,i,s=gap,f=e[t]
            switch(f&&"object"==typeof f&&"function"==typeof f.toJSON&&(f=f.toJSON(t)),"function"==typeof rep&&(f=rep.call(e,t,f)),typeof f){case"string":return quote(f)
                case"number":return isFinite(f)?f+"":"null"
                case"boolean":case"null":return f+""
                case"object":if(!f)return"null"
                    if(gap+=indent,i=[],"[object Array]"===Object.prototype.toString.apply(f)){for(n=f.length,r=0;n>r;r+=1)i[r]=str(r,f)||"null"
                        return o=0===i.length?"[]":gap?"[\n"+gap+i.join(",\n"+gap)+"\n"+s+"]":"["+i.join(",")+"]",gap=s,o}if(rep&&"object"==typeof rep)for(n=rep.length,r=0;n>r;r+=1)"string"==typeof rep[r]&&(a=rep[r],o=str(a,f),o&&i.push(quote(a)+(gap?": ":":")+o))
                else for(a in f)Object.prototype.hasOwnProperty.call(f,a)&&(o=str(a,f),o&&i.push(quote(a)+(gap?": ":":")+o))
                    return o=0===i.length?"{}":gap?"{\n"+gap+i.join(",\n"+gap)+"\n"+s+"}":"{"+i.join(",")+"}",gap=s,o}}
        tool.stringifyJSON=function(t,e,r){var a
            if(gap="",indent="","number"==typeof r)for(a=0;r>a;a+=1)indent+=" "
            else"string"==typeof r&&(indent=r)
            if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw Error("JSON.stringify")
            return str("",{"":t})},tool.parseJSON=function(text,reviver){function walk(t,e){var r,a,o=t[e]
            if(o&&"object"==typeof o)for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(a=walk(o,r),void 0!==a?o[r]=a:delete o[r])
            return reviver.call(t,e,o)}var j
            return text+="",cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))?(j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j):(this.error("JSON.parse"),void 0)}}}(window.kStorage._tool),function(t){"use strict"
    function e(t,e,r,o){var n=(new Date).getTime(),i=a.dA,s=void 0===r?i:r
        this._storageName=e,this._instantial=t,o?(this._data={},this._info={d:n,a:s},a.setData(this)):(this._data=a.getItem(t,"data")||{},this._info=a.getItem(t,"info"),this._info.d=n,a.setInfo(this))}var r,a,o,n,i,s=t.document,f=t.kStorage
    "userData"===f.type&&(a=f._tool,o={},function(){var t,e
        t=s.getElementsByTagName("script"),e=s.createElement("iframe"),e.src=(t[t.length-1].getAttribute("src").match(/^(.*\/)[^\/]*\.js/)||["",""])[1]+"carrier.html",e.style.display="none",s.body?s.body.appendChild(e):s.getElementsByTagName("head")[0].appendChild(e),r=e.contentWindow.document}(),i=function(t){var e=r.createElement("div")
        return e.innerHTML=t,r.body?r.body.appendChild(e):r.appendChild(e),e.addBehavior("#default#userData"),e},n=i("null"),f.use=function(t,r){var n,s=a.getStorageName(t)
        return o[s]?o[s]:(a.createCallBack&&a.createCallBack(t),n=i(s),n.load(s),a.getItem(n,"info")?(o[s]=new e(n,s,void 0,!1),o[s]):(o[s]=new e(n,s,a.fixMaxAge(r),!0),o[s]))},f.exists=function(t){return!!this.info(t)},f.info=function(t){var e,r=a.getStorageName(t)
        return n.load(r),e=a.getItem(n,"info"),e?e:null},f.destroy=function(t){var e,r=a.getStorageName(t),i=o[r]
        i?(e=i._instantial,e.expires=a.getExpiresDate(-99),e.save(r),e.parentNode.removeChild(e),a.initObj(i),delete o[r]):(n.load(r),n.expires=a.getExpiresDate(-99),n.save(r))},e.prototype=f._publicMethods,a.setData=function(t){try{t._instantial.setAttribute("data",a.stringifyJSON(t._data).replace(/\\"/g,"").replace(/"/g,""))}catch(e){}t._info.s=this.random(),this.setInfo(t)},a.setInfo=function(t){var e=t._instantial,r=t._info
        try{e.setAttribute("info",a.stringifyJSON(r).replace(/\\"/g,"").replace(/"/g,"")),e.expires=a.getExpiresDate(r.a||1),e.save(t._storageName)}catch(o){}},a.updateData=function(t){var e,r=t._instantial,a=t._info
        r.load(t._storageName),e=this.getItem(r,"info"),e?a&&a.s===e.s||(t._info=e,t._data=this.getItem(r,"data")||{}):t._data=t._info=void 0},a.getItem=function(t,e){var r
        try{r=a.parseJSON(t.getAttribute(e).replace(/\u0081/g,'\\"').replace(/\u0080/g,'"'))}catch(o){}return r})}(window),function(t){"use strict"
    var e,r,a,o,n,i,s,f
    if(t.support){if(a=t._tool,e=t.use("_kStorageCookieManager",90),o=e._data,t._firstLoad){t.destroy("_kStorageSessionManager"),s=(new Date).getTime()
        for(n in o)i=a.parseJSON(o[n]),i&&i[1]&&i[1]<s&&delete o[n]
        a.setData(e)}r=t.use("_kStorageSessionManager",90),f=function(t){e.remove(t),r.remove(t)},t.cookie={set:function(t,o,n){var i,s
        return a.filterName(t),void 0===o?(f(t),this):void 0===n?(e.remove(t),r.set(t,o),this):(i=a.coreToString.call(n).slice(8,-1),s=(new Date).getTime(),"Number"===i?0>=n?f(t):(r.remove(t),e.set(t,[o,s+n])):"Date"===i?(n=n.getTime(),s>=n?f(t):(r.remove(t),e.set(t,[o,n]))):a.error("arg expires error"),this)},get:function(t){var o
        return a.filterName(t),o=e.get(t),o?o[1]&&o[1]<(new Date).getTime()?(e.remove(t),void 0):o[0]:r.get(t)},remove:function(t){return a.filterName(t),f(t),this}}}}(window.kStorage),function(t){"use strict"
    var e,r,a,o,n,i,s=t.kStorage
    if(s.support&&s._firstLoad)if(a=s.use("_kStorageCreateManager"),o=a.get("nameList"),e=(new Date).getTime(),"object"==typeof o){for(n in o)i=s.info(n),(!i||0===i.a||e>i.d+864e5*i.a)&&(s.destroy(n),delete o[n])
        a.set("nameList",o)}else if("storage"===s.type){r=t.localStorage
        for(n in r)n=/^cs_(\w{8,})_$/.exec(n),n&&(n=n[1],i=s.info(n),(!i||0===i.a||e>i.d+864e5*i.a)&&s.destroy(n))}}(window),function(t){"use strict"
    var e,r,a=t.kStorage
    a.support&&(e=a.use("_kStorageCreateManager",90),a._tool.createCallBack=function(t){r=e.get("nameList")||{},r[t]||(r[t]=1,e.set("nameList",r))})}(window)