/*!
 * 本地存储框架kStorgae v1.0
 * 说明：本文件不支持IE6-7。需要支持IE6-7，请用kStorage.full.min.js文件
 *
 * 开发日期: 2013-11-5
 * 压缩工具：uglifyjs
 * 依赖:无
 * 全局变量：kStorage, kst;
 * 项目地址: https://github.com/kasslun/kStorage/
 * 详细说明: http://kasslun.github.io/kStorage/
 */
!function(t){"use strict"
    var e,o,r,i=0,a=Number.MAX_VALUE,n=function(){},s=t.kst=t.kStorage={VERSION:"1.0",type:"none",support:!0,use:null,info:n,destroy:n},f=t.localStorage,u="[object Storage]",c=t.document,g=t.JSON||{}
    i=Math.min(i,7),"object"==typeof f&&("function"==typeof f.toString&&(e=""+f),e!==u&&f.constructor&&(e=""+f.constructor)),e===u?s.type="storage":c.documentElement.addBehavior&&(s.type="userData"),o=s._tool={dA:i,mA:a,coreToString:Object.prototype.toString,storage:t.localStorage,initObj:function(t){return delete t._data,delete t._info,t.set=t.remove=t.clear=function(){return this},t.get=t.count=function(){},t},error:function(t){throw Error(t)},getStorageName:function(t){return"string"==typeof t&&/^\w+$/g.test(t)||this.error("storageId Must be made by letter, numbers and underline"),"cs_"+t+"_"},filterName:function(t){"string"!=typeof t&&this.error("arg 'name' must be a string")},getExpiresDate:function(t){var e=new Date
        return e.setTime(e.getTime()+864e5*t),e.toUTCString()},random:function(){return(""+Math.random()).substring(2,10)-0},fixMaxAge:function(t){var e=typeof t
        return"number"===e?(t=0>t?0:t,Math.min(parseInt(t,10),this.mA)):void 0},stringifyJSON:g.stringify,parseJSON:g.parse},s._publicMethods={set:function(t,e){var r,i,a,n,s
        if(o.updateData(this),i=this._data,"object"==typeof i){if(a=o.stringifyJSON,"[object Object]"===o.coreToString.call(t))for(r in t)t.hasOwnProperty(r)&&(n=t[r],void 0===n?void 0!==i[r]&&(s=!0,delete i[r]):(n=a(n),i[r]!==n&&(s=!0,i[r]=n)))
        else o.filterName(t),void 0===e?e!==i[t]&&(s=!0,delete i[t]):(e=a(e),e!==i[t]&&(s=!0,i[t]=e))
            s&&o.setData(this)}return this},get:function(t){var e,r
        return o.updateData(this),o.filterName(t),e=this._data,"object"==typeof e&&(r=e[t],void 0!==r)?o.parseJSON(r):void 0},count:function(){var t,e,r
        if(o.updateData(this),e=this._data,"object"==typeof e){r=0
            for(t in e)r++
            return r}},remove:function(t){var e
        return o.updateData(this),o.filterName(t),e=this._data,"object"==typeof e&&void 0!==e[t]&&(delete e[t],o.setData(this)),this},clear:function(){return o.updateData(this),"object"==typeof this._data&&(this._data={},o.setData(this)),this},setMaxAge:function(t){t=o.fixMaxAge(t),void 0!==t&&(o.updateData(this),this._info&&(this._info.a=t,o.setInfo(this)))},getMaxAge:function(){return o.updateData(this),this._info?this._info.a:void 0}},"none"!==s.type?(r=/cs_kStorage_=1/,r.test(c.cookie)||(c.cookie="cs_kStorage_=1;path=/",s._firstLoad=!0)):(s.support=!1,s.use=function(){return s._tool.initObj({})})}(window),function(t){"use strict"
    function e(t,e,r){var i=(new Date).getTime()
        this._storageName=t,r?(this._data={},this._info={d:i,a:void 0===e?o.dA:e},o.setData(this)):(this._data=o.getItem(t)||{},this._info=o.getItem(t+a),this._info.d=i,o.setInfo(this))}var o,r,i,a,n=t.kStorage
    "storage"===n.type&&(o=n._tool,r=o.storage,i={},a="i",n.use=function(t,r){var n,s=o.getStorageName(t)
        return i[s]?i[s]:(o.createCallBack&&o.createCallBack(t),(n=o.getItem(s+a))?(i[s]=new e(s,void 0,!1),i[s]):(i[s]=new e(s,o.fixMaxAge(r),!0),i[s]))},n.exists=function(t){return!!this.info(t)},n.info=function(t){var e=o.getStorageName(t),r=o.getItem(e+a)
        return r?r:null},n.destroy=function(t){var e=o.getStorageName(t),n=i[e]
        r.removeItem(e),r.removeItem(e+a),n&&(o.initObj(n),delete i[e])},e.prototype=n._publicMethods,o.setData=function(t){try{r.setItem(t._storageName,this.stringifyJSON(t._data))}catch(e){}t._info.s=this.random(),this.setInfo(t)},o.setInfo=function(t){r.setItem(t._storageName+a,this.stringifyJSON(t._info))},o.updateData=function(t){var e=t._storageName,r=t._info,i=o.getItem(e+a)
        i?r&&r.s===i.s||(t._data=o.getItem(e)||{},t._info=i):t._data=t._info=void 0},o.getItem=function(t){var e
        try{e=this.parseJSON(r.getItem(t))}catch(o){}return e})}(window),function(t){"use strict"
    var e,o,r,i,a,n,s,f
    if(t.support){if(r=t._tool,e=t.use("_kStorageCookieManager",90),i=e._data,t._firstLoad){t.destroy("_kStorageSessionManager"),s=(new Date).getTime()
        for(a in i)n=r.parseJSON(i[a]),n&&n[1]&&n[1]<s&&delete i[a]
        r.setData(e)}o=t.use("_kStorageSessionManager",90),f=function(t){e.remove(t),o.remove(t)},t.cookie={set:function(t,i,a){var n,s
        return r.filterName(t),void 0===i?(f(t),this):void 0===a?(e.remove(t),o.set(t,i),this):(n=r.coreToString.call(a).slice(8,-1),s=(new Date).getTime(),"Number"===n?0>=a?f(t):(o.remove(t),e.set(t,[i,s+a])):"Date"===n?(a=a.getTime(),s>=a?f(t):(o.remove(t),e.set(t,[i,a]))):r.error("arg expires error"),this)},get:function(t){var i
        return r.filterName(t),i=e.get(t),i?i[1]&&i[1]<(new Date).getTime()?(e.remove(t),void 0):i[0]:o.get(t)},remove:function(t){return r.filterName(t),f(t),this}}}}(window.kStorage),function(t){"use strict"
    var e,o,r,i,a,n,s=t.kStorage
    if(s.support&&s._firstLoad)if(r=s.use("_kStorageCreateManager"),i=r.get("nameList"),e=(new Date).getTime(),"object"==typeof i){for(a in i)n=s.info(a),(!n||0===n.a||e>n.d+864e5*n.a)&&(s.destroy(a),delete i[a])
        r.set("nameList",i)}else if("storage"===s.type){o=t.localStorage
        for(a in o)a=/^cs_(\w{8,})_$/.exec(a),a&&(a=a[1],n=s.info(a),(!n||0===n.a||e>n.d+864e5*n.a)&&s.destroy(a))}}(window),function(t){"use strict"
    var e,o,r=t.kStorage
    r.support&&(e=r.use("_kStorageCreateManager",90),r._tool.createCallBack=function(t){o=e.get("nameList")||{},o[t]||(o[t]=1,e.set("nameList",o))})}(window)