window.comtop=window.comtop||{};comtop.version="V4.1.0-beta4-Bulid20131227";(function(c){window.console=window.console||{log:function(){},info:function(){},warn:function(){},error:function(){}};c.namespace=b;c.guid=a;function b(d){var f,e,h=d.split("."),g=window;for(f=0;f<h.length;f=f+1){e=h[f];g[e]=g[e]||{};g=g[e]}return g}function a(){return"xxxx-4xxx-yxxx".replace(/[xy]/g,function(f){var e=Math.random()*16|0,d=f=="x"?e:(e&3|8);return d.toString(16)}).toUpperCase()}})(window.comtop=window.comtop||{});comtop.namespace("comtop.UI");comtop.namespace("comtop.Dom");comtop.namespace("comtop.String");comtop.namespace("comtop.Date");comtop.namespace("comtop.Number");comtop.namespace("comtop.Browser");comtop.namespace("comtop.Tools");
/*!
 * jQuery JavaScript Library v1.8.2
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: Thu Sep 20 2012 21:13:05 GMT-0400 (Eastern Daylight Time)
 */
(function(a2,aB){var w,af,o=a2.document,aI=a2.location,d=a2.navigator,bg=a2.jQuery,I=a2.$,am=Array.prototype.push,a4=Array.prototype.slice,aK=Array.prototype.indexOf,z=Object.prototype.toString,V=Object.prototype.hasOwnProperty,aO=String.prototype.trim,bG=function(e,bZ){return new bG.fn.init(e,bZ,w)},bx=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,aa=/\S/,aV=/\s+/,C=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,bo=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,a=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,bf=/^[\],:{}\s]*$/,bi=/(?:^|:|,)(?:\s*\[)+/g,bD=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,a0=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,bP=/^-ms-/,aU=/-([\da-z])/gi,N=function(e,bZ){return(bZ+"").toUpperCase()},aF=function(){if(o.addEventListener){o.removeEventListener("DOMContentLoaded",aF,false);bG.ready()}else{if(o.readyState==="complete"){o.detachEvent("onreadystatechange",aF);bG.ready()}}},Z={};bG.fn=bG.prototype={constructor:bG,init:function(e,b2,b1){var b0,b3,bZ,b4;if(!e){return this}if(e.nodeType){this.context=this[0]=e;this.length=1;return this}if(typeof e==="string"){if(e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3){b0=[null,e,null]}else{b0=bo.exec(e)}if(b0&&(b0[1]||!b2)){if(b0[1]){b2=b2 instanceof bG?b2[0]:b2;b4=(b2&&b2.nodeType?b2.ownerDocument||b2:o);e=bG.parseHTML(b0[1],b4,true);if(a.test(b0[1])&&bG.isPlainObject(b2)){this.attr.call(e,b2,true)}return bG.merge(this,e)}else{b3=o.getElementById(b0[2]);if(b3&&b3.parentNode){if(b3.id!==b0[2]){return b1.find(e)}this.length=1;this[0]=b3}this.context=o;this.selector=e;return this}}else{if(!b2||b2.jquery){return(b2||b1).find(e)}else{return this.constructor(b2).find(e)}}}else{if(bG.isFunction(e)){return b1.ready(e)}}if(e.selector!==aB){this.selector=e.selector;this.context=e.context}return bG.makeArray(e,this)},selector:"",jquery:"1.8.2",length:0,size:function(){return this.length},toArray:function(){return a4.call(this)},get:function(e){return e==null?this.toArray():(e<0?this[this.length+e]:this[e])},pushStack:function(bZ,b1,e){var b0=bG.merge(this.constructor(),bZ);b0.prevObject=this;b0.context=this.context;if(b1==="find"){b0.selector=this.selector+(this.selector?" ":"")+e}else{if(b1){b0.selector=this.selector+"."+b1+"("+e+")"}}return b0},each:function(bZ,e){return bG.each(this,bZ,e)},ready:function(e){bG.ready.promise().done(e);return this},eq:function(e){e=+e;return e===-1?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(a4.apply(this,arguments),"slice",a4.call(arguments).join(","))},map:function(e){return this.pushStack(bG.map(this,function(b0,bZ){return e.call(b0,bZ,b0)}))},end:function(){return this.prevObject||this.constructor(null)},push:am,sort:[].sort,splice:[].splice};bG.fn.init.prototype=bG.fn;bG.extend=bG.fn.extend=function(){var b7,b0,e,bZ,b4,b5,b3=arguments[0]||{},b2=1,b1=arguments.length,b6=false;if(typeof b3==="boolean"){b6=b3;b3=arguments[1]||{};b2=2}if(typeof b3!=="object"&&!bG.isFunction(b3)){b3={}}if(b1===b2){b3=this;--b2}for(;b2<b1;b2++){if((b7=arguments[b2])!=null){for(b0 in b7){e=b3[b0];bZ=b7[b0];if(b3===bZ){continue}if(b6&&bZ&&(bG.isPlainObject(bZ)||(b4=bG.isArray(bZ)))){if(b4){b4=false;b5=e&&bG.isArray(e)?e:[]}else{b5=e&&bG.isPlainObject(e)?e:{}}b3[b0]=bG.extend(b6,b5,bZ)}else{if(bZ!==aB){b3[b0]=bZ}}}}}return b3};bG.extend({noConflict:function(e){if(a2.$===bG){a2.$=I}if(e&&a2.jQuery===bG){a2.jQuery=bg}return bG},isReady:false,readyWait:1,holdReady:function(e){if(e){bG.readyWait++}else{bG.ready(true)}},ready:function(e){if(e===true?--bG.readyWait:bG.isReady){return}if(!o.body){return setTimeout(bG.ready,1)}bG.isReady=true;if(e!==true&&--bG.readyWait>0){return}af.resolveWith(o,[bG]);if(bG.fn.trigger){bG(o).trigger("ready").off("ready")}},isFunction:function(e){return bG.type(e)==="function"},isArray:Array.isArray||function(e){return bG.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return !isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):Z[z.call(e)]||"object"},isPlainObject:function(b1){if(!b1||bG.type(b1)!=="object"||b1.nodeType||bG.isWindow(b1)){return false}try{if(b1.constructor&&!V.call(b1,"constructor")&&!V.call(b1.constructor.prototype,"isPrototypeOf")){return false}}catch(b0){return false}var bZ;for(bZ in b1){}return bZ===aB||V.call(b1,bZ)},isEmptyObject:function(bZ){var e;for(e in bZ){return false}return true},error:function(e){throw new Error(e)},parseHTML:function(b1,b0,e){var bZ;if(!b1||typeof b1!=="string"){return null}if(typeof b0==="boolean"){e=b0;b0=0}b0=b0||o;if((bZ=a.exec(b1))){return[b0.createElement(bZ[1])]}bZ=bG.buildFragment([b1],b0,e?null:[]);return bG.merge([],(bZ.cacheable?bG.clone(bZ.fragment):bZ.fragment).childNodes)},parseJSON:function(e){if(!e||typeof e!=="string"){return null}e=bG.trim(e);if(a2.JSON&&a2.JSON.parse){return a2.JSON.parse(e)}if(bf.test(e.replace(bD,"@").replace(a0,"]").replace(bi,""))){return(new Function("return "+e))()}bG.error("Invalid JSON: "+e)},parseXML:function(b1){var bZ,b0;if(!b1||typeof b1!=="string"){return null}try{if(a2.DOMParser){b0=new DOMParser();bZ=b0.parseFromString(b1,"text/xml")}else{bZ=new ActiveXObject("Microsoft.XMLDOM");bZ.async="false";bZ.loadXML(b1)}}catch(b2){bZ=aB}if(!bZ||!bZ.documentElement||bZ.getElementsByTagName("parsererror").length){bG.error("Invalid XML: "+b1)}return bZ},noop:function(){},globalEval:function(e){if(e&&aa.test(e)){(a2.execScript||function(bZ){a2["eval"].call(a2,bZ)})(e)}},camelCase:function(e){return e.replace(bP,"ms-").replace(aU,N)},nodeName:function(bZ,e){return bZ.nodeName&&bZ.nodeName.toLowerCase()===e.toLowerCase()},each:function(b3,b4,b0){var bZ,b1=0,b2=b3.length,e=b2===aB||bG.isFunction(b3);if(b0){if(e){for(bZ in b3){if(b4.apply(b3[bZ],b0)===false){break}}}else{for(;b1<b2;){if(b4.apply(b3[b1++],b0)===false){break}}}}else{if(e){for(bZ in b3){if(b4.call(b3[bZ],bZ,b3[bZ])===false){break}}}else{for(;b1<b2;){if(b4.call(b3[b1],b1,b3[b1++])===false){break}}}}return b3},trim:aO&&!aO.call("\uFEFF\xA0")?function(e){return e==null?"":aO.call(e)}:function(e){return e==null?"":(e+"").replace(C,"")},makeArray:function(e,b0){var b1,bZ=b0||[];if(e!=null){b1=bG.type(e);if(e.length==null||b1==="string"||b1==="function"||b1==="regexp"||bG.isWindow(e)){am.call(bZ,e)}else{bG.merge(bZ,e)}}return bZ},inArray:function(b1,bZ,b0){var e;if(bZ){if(aK){return aK.call(bZ,b1,b0)}e=bZ.length;b0=b0?b0<0?Math.max(0,e+b0):b0:0;for(;b0<e;b0++){if(b0 in bZ&&bZ[b0]===b1){return b0}}}return -1},merge:function(b2,b0){var e=b0.length,b1=b2.length,bZ=0;if(typeof e==="number"){for(;bZ<e;bZ++){b2[b1++]=b0[bZ]}}else{while(b0[bZ]!==aB){b2[b1++]=b0[bZ++]}}b2.length=b1;return b2},grep:function(bZ,b4,e){var b3,b0=[],b1=0,b2=bZ.length;e=!!e;for(;b1<b2;b1++){b3=!!b4(bZ[b1],b1);if(e!==b3){b0.push(bZ[b1])}}return b0},map:function(e,b5,b6){var b3,b4,b2=[],b0=0,bZ=e.length,b1=e instanceof bG||bZ!==aB&&typeof bZ==="number"&&((bZ>0&&e[0]&&e[bZ-1])||bZ===0||bG.isArray(e));if(b1){for(;b0<bZ;b0++){b3=b5(e[b0],b0,b6);if(b3!=null){b2[b2.length]=b3}}}else{for(b4 in e){b3=b5(e[b4],b4,b6);if(b3!=null){b2[b2.length]=b3}}}return b2.concat.apply([],b2)},guid:1,proxy:function(b2,b1){var b0,e,bZ;if(typeof b1==="string"){b0=b2[b1];b1=b2;b2=b0}if(!bG.isFunction(b2)){return aB}e=a4.call(arguments,2);bZ=function(){return b2.apply(b1,e.concat(a4.call(arguments)))};bZ.guid=b2.guid=b2.guid||bG.guid++;return bZ},access:function(e,b4,b7,b5,b2,b8,b6){var b0,b3=b7==null,b1=0,bZ=e.length;if(b7&&typeof b7==="object"){for(b1 in b7){bG.access(e,b4,b1,b7[b1],1,b8,b5)}b2=1}else{if(b5!==aB){b0=b6===aB&&bG.isFunction(b5);if(b3){if(b0){b0=b4;b4=function(ca,b9,cb){return b0.call(bG(ca),cb)}}else{b4.call(e,b5);b4=null}}if(b4){for(;b1<bZ;b1++){b4(e[b1],b7,b0?b5.call(e[b1],b1,b4(e[b1],b7)):b5,b6)}}b2=1}}return b2?e:b3?b4.call(e):bZ?b4(e[0],b7):b8},now:function(){return(new Date()).getTime()}});bG.ready.promise=function(b2){if(!af){af=bG.Deferred();if(o.readyState==="complete"){setTimeout(bG.ready,1)}else{if(o.addEventListener){o.addEventListener("DOMContentLoaded",aF,false);a2.addEventListener("load",bG.ready,false)}else{o.attachEvent("onreadystatechange",aF);a2.attachEvent("onload",bG.ready);var b1=false;try{b1=a2.frameElement==null&&o.documentElement}catch(b0){}if(b1&&b1.doScroll){(function bZ(){if(!bG.isReady){try{b1.doScroll("left")}catch(b3){return setTimeout(bZ,50)}bG.ready()}})()}}}}return af.promise(b2)};bG.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(bZ,e){Z["[object "+e+"]"]=e.toLowerCase()});w=bG(o);var bU={};function ac(bZ){var e=bU[bZ]={};bG.each(bZ.split(aV),function(b1,b0){e[b0]=true});return e}bG.Callbacks=function(b8){b8=typeof b8==="string"?(bU[b8]||ac(b8)):bG.extend({},b8);var b1,e,b2,b0,b3,b4,b5=[],b6=!b8.once&&[],bZ=function(b9){b1=b8.memory&&b9;e=true;b4=b0||0;b0=0;b3=b5.length;b2=true;for(;b5&&b4<b3;b4++){if(b5[b4].apply(b9[0],b9[1])===false&&b8.stopOnFalse){b1=false;break}}b2=false;if(b5){if(b6){if(b6.length){bZ(b6.shift())}}else{if(b1){b5=[]}else{b7.disable()}}}},b7={add:function(){if(b5){var ca=b5.length;(function b9(cb){bG.each(cb,function(cd,cc){var ce=bG.type(cc);if(ce==="function"&&(!b8.unique||!b7.has(cc))){b5.push(cc)}else{if(cc&&cc.length&&ce!=="string"){b9(cc)}}})})(arguments);if(b2){b3=b5.length}else{if(b1){b0=ca;bZ(b1)}}}return this},remove:function(){if(b5){bG.each(arguments,function(cb,b9){var ca;while((ca=bG.inArray(b9,b5,ca))>-1){b5.splice(ca,1);if(b2){if(ca<=b3){b3--}if(ca<=b4){b4--}}}})}return this},has:function(b9){return bG.inArray(b9,b5)>-1},empty:function(){b5=[];return this},disable:function(){b5=b6=b1=aB;return this},disabled:function(){return !b5},lock:function(){b6=aB;if(!b1){b7.disable()}return this},locked:function(){return !b6},fireWith:function(ca,b9){b9=b9||[];b9=[ca,b9.slice?b9.slice():b9];if(b5&&(!e||b6)){if(b2){b6.push(b9)}else{bZ(b9)}}return this},fire:function(){b7.fireWith(this,arguments);return this},fired:function(){return !!e}};return b7};bG.extend({Deferred:function(b0){var bZ=[["resolve","done",bG.Callbacks("once memory"),"resolved"],["reject","fail",bG.Callbacks("once memory"),"rejected"],["notify","progress",bG.Callbacks("memory")]],b1="pending",b2={state:function(){return b1},always:function(){e.done(arguments).fail(arguments);return this},then:function(){var b3=arguments;return bG.Deferred(function(b4){bG.each(bZ,function(b6,b5){var b8=b5[0],b7=b3[b6];e[b5[1]](bG.isFunction(b7)?function(){var b9=b7.apply(this,arguments);if(b9&&bG.isFunction(b9.promise)){b9.promise().done(b4.resolve).fail(b4.reject).progress(b4.notify)}else{b4[b8+"With"](this===e?b4:this,[b9])}}:b4[b8])});b3=null}).promise()},promise:function(b3){return b3!=null?bG.extend(b3,b2):b2}},e={};b2.pipe=b2.then;bG.each(bZ,function(b4,b3){var b6=b3[2],b5=b3[3];b2[b3[1]]=b6.add;if(b5){b6.add(function(){b1=b5},bZ[b4^1][2].disable,bZ[2][2].lock)}e[b3[0]]=b6.fire;e[b3[0]+"With"]=b6.fireWith});b2.promise(e);if(b0){b0.call(e,e)}return e},when:function(b2){var b0=0,b4=a4.call(arguments),e=b4.length,bZ=e!==1||(b2&&bG.isFunction(b2.promise))?e:0,b7=bZ===1?b2:bG.Deferred(),b1=function(b9,ca,b8){return function(cb){ca[b9]=this;b8[b9]=arguments.length>1?a4.call(arguments):cb;if(b8===b6){b7.notifyWith(ca,b8)}else{if(!(--bZ)){b7.resolveWith(ca,b8)}}}},b6,b3,b5;if(e>1){b6=new Array(e);b3=new Array(e);b5=new Array(e);for(;b0<e;b0++){if(b4[b0]&&bG.isFunction(b4[b0].promise)){b4[b0].promise().done(b1(b0,b5,b4)).fail(b7.reject).progress(b1(b0,b3,b6))}else{--bZ}}}if(!bZ){b7.resolveWith(b5,b4)}return b7.promise()}});bG.support=(function(){var cb,ca,b8,b9,b2,b7,b6,b4,b3,b1,bZ,b0=o.createElement("div");b0.setAttribute("className","t");b0.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";ca=b0.getElementsByTagName("*");b8=b0.getElementsByTagName("a")[0];b8.style.cssText="top:1px;float:left;opacity:.5";if(!ca||!ca.length){return{}}b9=o.createElement("select");b2=b9.appendChild(o.createElement("option"));b7=b0.getElementsByTagName("input")[0];cb={leadingWhitespace:(b0.firstChild.nodeType===3),tbody:!b0.getElementsByTagName("tbody").length,htmlSerialize:!!b0.getElementsByTagName("link").length,style:/top/.test(b8.getAttribute("style")),hrefNormalized:(b8.getAttribute("href")==="/a"),opacity:/^0.5/.test(b8.style.opacity),cssFloat:!!b8.style.cssFloat,checkOn:(b7.value==="on"),optSelected:b2.selected,getSetAttribute:b0.className!=="t",enctype:!!o.createElement("form").enctype,html5Clone:o.createElement("nav").cloneNode(true).outerHTML!=="<:nav></:nav>",boxModel:(o.compatMode==="CSS1Compat"),submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true,boxSizingReliable:true,pixelPosition:false};b7.checked=true;cb.noCloneChecked=b7.cloneNode(true).checked;b9.disabled=true;cb.optDisabled=!b2.disabled;try{delete b0.test}catch(b5){cb.deleteExpando=false}if(!b0.addEventListener&&b0.attachEvent&&b0.fireEvent){b0.attachEvent("onclick",bZ=function(){cb.noCloneEvent=false});b0.cloneNode(true).fireEvent("onclick");b0.detachEvent("onclick",bZ)}b7=o.createElement("input");b7.value="t";b7.setAttribute("type","radio");cb.radioValue=b7.value==="t";b7.setAttribute("checked","checked");b7.setAttribute("name","t");b0.appendChild(b7);b6=o.createDocumentFragment();b6.appendChild(b0.lastChild);cb.checkClone=b6.cloneNode(true).cloneNode(true).lastChild.checked;cb.appendChecked=b7.checked;b6.removeChild(b7);b6.appendChild(b0);if(b0.attachEvent){for(b3 in {submit:true,change:true,focusin:true}){b4="on"+b3;b1=(b4 in b0);if(!b1){b0.setAttribute(b4,"return;");b1=(typeof b0[b4]==="function")}cb[b3+"Bubbles"]=b1}}bG(function(){var cc,cg,ce,cf,cd="padding:0;margin:0;border:0;display:block;overflow:hidden;",e=o.getElementsByTagName("body")[0];if(!e){return}cc=o.createElement("div");cc.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px";e.insertBefore(cc,e.firstChild);cg=o.createElement("div");cc.appendChild(cg);cg.innerHTML="<table><tr><td></td><td>t</td></tr></table>";ce=cg.getElementsByTagName("td");ce[0].style.cssText="padding:0;margin:0;border:0;display:none";b1=(ce[0].offsetHeight===0);ce[0].style.display="";ce[1].style.display="none";cb.reliableHiddenOffsets=b1&&(ce[0].offsetHeight===0);cg.innerHTML="";cg.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;";cb.boxSizing=(cg.offsetWidth===4);cb.doesNotIncludeMarginInBodyOffset=(e.offsetTop!==1);if(a2.getComputedStyle){cb.pixelPosition=(a2.getComputedStyle(cg,null)||{}).top!=="1%";cb.boxSizingReliable=(a2.getComputedStyle(cg,null)||{width:"4px"}).width==="4px";cf=o.createElement("div");cf.style.cssText=cg.style.cssText=cd;cf.style.marginRight=cf.style.width="0";cg.style.width="1px";cg.appendChild(cf);cb.reliableMarginRight=!parseFloat((a2.getComputedStyle(cf,null)||{}).marginRight)}if(typeof cg.style.zoom!=="undefined"){cg.innerHTML="";cg.style.cssText=cd+"width:1px;padding:1px;display:inline;zoom:1";cb.inlineBlockNeedsLayout=(cg.offsetWidth===3);cg.style.display="block";cg.style.overflow="visible";cg.innerHTML="<div></div>";cg.firstChild.style.width="5px";cb.shrinkWrapBlocks=(cg.offsetWidth!==3);cc.style.zoom=1}e.removeChild(cc);cc=cg=ce=cf=null});b6.removeChild(b0);ca=b8=b9=b2=b7=b6=b0=null;return cb})();var bt=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,aL=/([A-Z])/g;bG.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(bG.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(e){e=e.nodeType?bG.cache[e[bG.expando]]:e[bG.expando];return !!e&&!O(e)},data:function(b1,bZ,b3,b2){if(!bG.acceptData(b1)){return}var b4,b6,b7=bG.expando,b5=typeof bZ==="string",b8=b1.nodeType,e=b8?bG.cache:b1,b0=b8?b1[b7]:b1[b7]&&b7;if((!b0||!e[b0]||(!b2&&!e[b0].data))&&b5&&b3===aB){return}if(!b0){if(b8){b1[b7]=b0=bG.deletedIds.pop()||bG.guid++}else{b0=b7}}if(!e[b0]){e[b0]={};if(!b8){e[b0].toJSON=bG.noop}}if(typeof bZ==="object"||typeof bZ==="function"){if(b2){e[b0]=bG.extend(e[b0],bZ)}else{e[b0].data=bG.extend(e[b0].data,bZ)}}b4=e[b0];if(!b2){if(!b4.data){b4.data={}}b4=b4.data}if(b3!==aB){b4[bG.camelCase(bZ)]=b3}if(b5){b6=b4[bZ];if(b6==null){b6=b4[bG.camelCase(bZ)]}}else{b6=b4}return b6},removeData:function(b1,bZ,b2){if(!bG.acceptData(b1)){return}var b5,b4,b3,b6=b1.nodeType,e=b6?bG.cache:b1,b0=b6?b1[bG.expando]:bG.expando;if(!e[b0]){return}if(bZ){b5=b2?e[b0]:e[b0].data;if(b5){if(!bG.isArray(bZ)){if(bZ in b5){bZ=[bZ]}else{bZ=bG.camelCase(bZ);if(bZ in b5){bZ=[bZ]}else{bZ=bZ.split(" ")}}}for(b4=0,b3=bZ.length;b4<b3;b4++){delete b5[bZ[b4]]}if(!(b2?O:bG.isEmptyObject)(b5)){return}}}if(!b2){delete e[b0].data;if(!O(e[b0])){return}}if(b6){bG.cleanData([b1],true)}else{if(bG.support.deleteExpando||e!=e.window){delete e[b0]}else{e[b0]=null}}},_data:function(bZ,e,b0){return bG.data(bZ,e,b0,true)},acceptData:function(bZ){var e=bZ.nodeName&&bG.noData[bZ.nodeName.toLowerCase()];return !e||e!==true&&bZ.getAttribute("classid")===e}});bG.fn.extend({data:function(b7,b6){var b2,bZ,b5,e,b1,b0=this[0],b4=0,b3=null;if(b7===aB){if(this.length){b3=bG.data(b0);if(b0.nodeType===1&&!bG._data(b0,"parsedAttrs")){b5=b0.attributes;for(b1=b5.length;b4<b1;b4++){e=b5[b4].name;if(!e.indexOf("data-")){e=bG.camelCase(e.substring(5));bv(b0,e,b3[e])}}bG._data(b0,"parsedAttrs",true)}}return b3}if(typeof b7==="object"){return this.each(function(){bG.data(this,b7)})}b2=b7.split(".",2);b2[1]=b2[1]?"."+b2[1]:"";bZ=b2[1]+"!";return bG.access(this,function(b8){if(b8===aB){b3=this.triggerHandler("getData"+bZ,[b2[0]]);if(b3===aB&&b0){b3=bG.data(b0,b7);b3=bv(b0,b7,b3)}return b3===aB&&b2[1]?this.data(b2[0]):b3}b2[1]=b8;this.each(function(){var b9=bG(this);b9.triggerHandler("setData"+bZ,b2);bG.data(this,b7,b8);b9.triggerHandler("changeData"+bZ,b2)})},null,b6,arguments.length>1,null,false)},removeData:function(e){return this.each(function(){bG.removeData(this,e)})}});function bv(b1,b0,b2){if(b2===aB&&b1.nodeType===1){var bZ="data-"+b0.replace(aL,"-$1").toLowerCase();b2=b1.getAttribute(bZ);if(typeof b2==="string"){try{b2=b2==="true"?true:b2==="false"?false:b2==="null"?null:+b2+""===b2?+b2:bt.test(b2)?bG.parseJSON(b2):b2}catch(b3){}bG.data(b1,b0,b2)}else{b2=aB}}return b2}function O(bZ){var e;for(e in bZ){if(e==="data"&&bG.isEmptyObject(bZ[e])){continue}if(e!=="toJSON"){return false}}return true}bG.extend({queue:function(b0,bZ,b1){var e;if(b0){bZ=(bZ||"fx")+"queue";e=bG._data(b0,bZ);if(b1){if(!e||bG.isArray(b1)){e=bG._data(b0,bZ,bG.makeArray(b1))}else{e.push(b1)}}return e||[]}},dequeue:function(b3,b2){b2=b2||"fx";var bZ=bG.queue(b3,b2),b4=bZ.length,b1=bZ.shift(),e=bG._queueHooks(b3,b2),b0=function(){bG.dequeue(b3,b2)};if(b1==="inprogress"){b1=bZ.shift();b4--}if(b1){if(b2==="fx"){bZ.unshift("inprogress")}delete e.stop;b1.call(b3,b0,e)}if(!b4&&e){e.empty.fire()}},_queueHooks:function(b0,bZ){var e=bZ+"queueHooks";return bG._data(b0,e)||bG._data(b0,e,{empty:bG.Callbacks("once memory").add(function(){bG.removeData(b0,bZ+"queue",true);bG.removeData(b0,e,true)})})}});bG.fn.extend({queue:function(e,bZ){var b0=2;if(typeof e!=="string"){bZ=e;e="fx";b0--}if(arguments.length<b0){return bG.queue(this[0],e)}return bZ===aB?this:this.each(function(){var b1=bG.queue(this,e,bZ);bG._queueHooks(this,e);if(e==="fx"&&b1[0]!=="inprogress"){bG.dequeue(this,e)}})},dequeue:function(e){return this.each(function(){bG.dequeue(this,e)})},delay:function(bZ,e){bZ=bG.fx?bG.fx.speeds[bZ]||bZ:bZ;e=e||"fx";return this.queue(e,function(b1,b0){var b2=setTimeout(b1,bZ);b0.stop=function(){clearTimeout(b2)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(b0,b4){var bZ,b1=1,b5=bG.Deferred(),b3=this,e=this.length,b2=function(){if(!(--b1)){b5.resolveWith(b3,[b3])}};if(typeof b0!=="string"){b4=b0;b0=aB}b0=b0||"fx";while(e--){bZ=bG._data(b3[e],b0+"queueHooks");if(bZ&&bZ.empty){b1++;bZ.empty.add(b2)}}b2();return b5.promise(b4)}});var a7,bV,n,bJ=/[\t\r\n]/g,ai=/\r/g,j=/^(?:button|input)$/i,aA=/^(?:button|input|object|select|textarea)$/i,D=/^a(?:rea|)$/i,M=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,bL=bG.support.getSetAttribute;bG.fn.extend({attr:function(e,bZ){return bG.access(this,bG.attr,e,bZ,arguments.length>1)},removeAttr:function(e){return this.each(function(){bG.removeAttr(this,e)})},prop:function(e,bZ){return bG.access(this,bG.prop,e,bZ,arguments.length>1)},removeProp:function(e){e=bG.propFix[e]||e;return this.each(function(){try{this[e]=aB;delete this[e]}catch(bZ){}})},addClass:function(b2){var b4,b0,bZ,b1,b3,b5,e;if(bG.isFunction(b2)){return this.each(function(b6){bG(this).addClass(b2.call(this,b6,this.className))})}if(b2&&typeof b2==="string"){b4=b2.split(aV);for(b0=0,bZ=this.length;b0<bZ;b0++){b1=this[b0];if(b1.nodeType===1){if(!b1.className&&b4.length===1){b1.className=b2}else{b3=" "+b1.className+" ";for(b5=0,e=b4.length;b5<e;b5++){if(b3.indexOf(" "+b4[b5]+" ")<0){b3+=b4[b5]+" "}}b1.className=bG.trim(b3)}}}}return this},removeClass:function(b4){var b1,b2,b3,b5,bZ,b0,e;if(bG.isFunction(b4)){return this.each(function(b6){bG(this).removeClass(b4.call(this,b6,this.className))})}if((b4&&typeof b4==="string")||b4===aB){b1=(b4||"").split(aV);for(b0=0,e=this.length;b0<e;b0++){b3=this[b0];if(b3.nodeType===1&&b3.className){b2=(" "+b3.className+" ").replace(bJ," ");for(b5=0,bZ=b1.length;b5<bZ;b5++){while(b2.indexOf(" "+b1[b5]+" ")>=0){b2=b2.replace(" "+b1[b5]+" "," ")}}b3.className=b4?bG.trim(b2):""}}}return this},toggleClass:function(b1,bZ){var b0=typeof b1,e=typeof bZ==="boolean";if(bG.isFunction(b1)){return this.each(function(b2){bG(this).toggleClass(b1.call(this,b2,this.className,bZ),bZ)})}return this.each(function(){if(b0==="string"){var b4,b3=0,b2=bG(this),b5=bZ,b6=b1.split(aV);while((b4=b6[b3++])){b5=e?b5:!b2.hasClass(b4);b2[b5?"addClass":"removeClass"](b4)}}else{if(b0==="undefined"||b0==="boolean"){if(this.className){bG._data(this,"__className__",this.className)}this.className=this.className||b1===false?"":bG._data(this,"__className__")||""}}})},hasClass:function(e){var b1=" "+e+" ",b0=0,bZ=this.length;for(;b0<bZ;b0++){if(this[b0].nodeType===1&&(" "+this[b0].className+" ").replace(bJ," ").indexOf(b1)>=0){return true}}return false},val:function(b1){var e,bZ,b2,b0=this[0];if(!arguments.length){if(b0){e=bG.valHooks[b0.type]||bG.valHooks[b0.nodeName.toLowerCase()];if(e&&"get" in e&&(bZ=e.get(b0,"value"))!==aB){return bZ}bZ=b0.value;return typeof bZ==="string"?bZ.replace(ai,""):bZ==null?"":bZ}return}b2=bG.isFunction(b1);return this.each(function(b4){var b5,b3=bG(this);if(this.nodeType!==1){return}if(b2){b5=b1.call(this,b4,b3.val())}else{b5=b1}if(b5==null){b5=""}else{if(typeof b5==="number"){b5+=""}else{if(bG.isArray(b5)){b5=bG.map(b5,function(b6){return b6==null?"":b6+""})}}}e=bG.valHooks[this.type]||bG.valHooks[this.nodeName.toLowerCase()];if(!e||!("set" in e)||e.set(this,b5,"value")===aB){this.value=b5}})}});bG.extend({valHooks:{option:{get:function(e){var bZ=e.attributes.value;return !bZ||bZ.specified?e.value:e.text}},select:{get:function(e){var b4,bZ,b3,b1,b2=e.selectedIndex,b5=[],b6=e.options,b0=e.type==="select-one";if(b2<0){return null}bZ=b0?b2:0;b3=b0?b2+1:b6.length;for(;bZ<b3;bZ++){b1=b6[bZ];if(b1.selected&&(bG.support.optDisabled?!b1.disabled:b1.getAttribute("disabled")===null)&&(!b1.parentNode.disabled||!bG.nodeName(b1.parentNode,"optgroup"))){b4=bG(b1).val();if(b0){return b4}b5.push(b4)}}if(b0&&!b5.length&&b6.length){return bG(b6[b2]).val()}return b5},set:function(bZ,b0){var e=bG.makeArray(b0);bG(bZ).find("option").each(function(){this.selected=bG.inArray(bG(this).val(),e)>=0});if(!e.length){bZ.selectedIndex=-1}return e}}},attrFn:{},attr:function(b4,b1,b5,b3){var b0,e,b2,bZ=b4.nodeType;if(!b4||bZ===3||bZ===8||bZ===2){return}if(b3&&bG.isFunction(bG.fn[b1])){return bG(b4)[b1](b5)}if(typeof b4.getAttribute==="undefined"){return bG.prop(b4,b1,b5)}b2=bZ!==1||!bG.isXMLDoc(b4);if(b2){b1=b1.toLowerCase();e=bG.attrHooks[b1]||(M.test(b1)?bV:a7)}if(b5!==aB){if(b5===null){bG.removeAttr(b4,b1);return}else{if(e&&"set" in e&&b2&&(b0=e.set(b4,b5,b1))!==aB){return b0}else{b4.setAttribute(b1,b5+"");return b5}}}else{if(e&&"get" in e&&b2&&(b0=e.get(b4,b1))!==null){return b0}else{b0=b4.getAttribute(b1);return b0===null?aB:b0}}},removeAttr:function(b1,b3){var b2,b4,bZ,e,b0=0;if(b3&&b1.nodeType===1){b4=b3.split(aV);for(;b0<b4.length;b0++){bZ=b4[b0];if(bZ){b2=bG.propFix[bZ]||bZ;e=M.test(bZ);if(!e){bG.attr(b1,bZ,"")}b1.removeAttribute(bL?bZ:b2);if(e&&b2 in b1){b1[b2]=false}}}}},attrHooks:{type:{set:function(e,bZ){if(j.test(e.nodeName)&&e.parentNode){bG.error("type property can't be changed")}else{if(!bG.support.radioValue&&bZ==="radio"&&bG.nodeName(e,"input")){var b0=e.value;e.setAttribute("type",bZ);if(b0){e.value=b0}return bZ}}}},value:{get:function(bZ,e){if(a7&&bG.nodeName(bZ,"button")){return a7.get(bZ,e)}return e in bZ?bZ.value:null},set:function(bZ,b0,e){if(a7&&bG.nodeName(bZ,"button")){return a7.set(bZ,b0,e)}bZ.value=b0}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(b3,b1,b4){var b0,e,b2,bZ=b3.nodeType;if(!b3||bZ===3||bZ===8||bZ===2){return}b2=bZ!==1||!bG.isXMLDoc(b3);if(b2){b1=bG.propFix[b1]||b1;e=bG.propHooks[b1]}if(b4!==aB){if(e&&"set" in e&&(b0=e.set(b3,b4,b1))!==aB){return b0}else{return(b3[b1]=b4)}}else{if(e&&"get" in e&&(b0=e.get(b3,b1))!==null){return b0}else{return b3[b1]}}},propHooks:{tabIndex:{get:function(bZ){var e=bZ.getAttributeNode("tabindex");return e&&e.specified?parseInt(e.value,10):aA.test(bZ.nodeName)||D.test(bZ.nodeName)&&bZ.href?0:aB}}}});bV={get:function(bZ,e){var b1,b0=bG.prop(bZ,e);return b0===true||typeof b0!=="boolean"&&(b1=bZ.getAttributeNode(e))&&b1.nodeValue!==false?e.toLowerCase():aB},set:function(bZ,b1,e){var b0;if(b1===false){bG.removeAttr(bZ,e)}else{b0=bG.propFix[e]||e;if(b0 in bZ){bZ[b0]=true}bZ.setAttribute(e,e.toLowerCase())}return e}};if(!bL){n={name:true,id:true,coords:true};a7=bG.valHooks.button={get:function(b0,bZ){var e;e=b0.getAttributeNode(bZ);return e&&(n[bZ]?e.value!=="":e.specified)?e.value:aB},set:function(b0,b1,bZ){var e=b0.getAttributeNode(bZ);if(!e){e=o.createAttribute(bZ);b0.setAttributeNode(e)}return(e.value=b1+"")}};bG.each(["width","height"],function(bZ,e){bG.attrHooks[e]=bG.extend(bG.attrHooks[e],{set:function(b0,b1){if(b1===""){b0.setAttribute(e,"auto");return b1}}})});bG.attrHooks.contenteditable={get:a7.get,set:function(bZ,b0,e){if(b0===""){b0="false"}a7.set(bZ,b0,e)}}}if(!bG.support.hrefNormalized){bG.each(["href","src","width","height"],function(bZ,e){bG.attrHooks[e]=bG.extend(bG.attrHooks[e],{get:function(b1){var b0=b1.getAttribute(e,2);return b0===null?aB:b0}})})}if(!bG.support.style){bG.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||aB},set:function(e,bZ){return(e.style.cssText=bZ+"")}}}if(!bG.support.optSelected){bG.propHooks.selected=bG.extend(bG.propHooks.selected,{get:function(bZ){var e=bZ.parentNode;if(e){e.selectedIndex;if(e.parentNode){e.parentNode.selectedIndex}}return null}})}if(!bG.support.enctype){bG.propFix.enctype="encoding"}if(!bG.support.checkOn){bG.each(["radio","checkbox"],function(){bG.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}})}bG.each(["radio","checkbox"],function(){bG.valHooks[this]=bG.extend(bG.valHooks[this],{set:function(e,bZ){if(bG.isArray(bZ)){return(e.checked=bG.inArray(bG(e).val(),bZ)>=0)}}})});var bE=/^(?:textarea|input|select)$/i,br=/^([^\.]*|)(?:\.(.+)|)$/,ba=/(?:^|\s)hover(\.\S+|)\b/,a3=/^key/,bK=/^(?:mouse|contextmenu)|click/,by=/^(?:focusinfocus|focusoutblur)$/,aq=function(e){return bG.event.special.hover?e:e.replace(ba,"mouseenter$1 mouseleave$1")};bG.event={add:function(b1,b5,cc,b3,b2){var b6,b4,cd,cb,ca,b8,e,b9,bZ,b0,b7;if(b1.nodeType===3||b1.nodeType===8||!b5||!cc||!(b6=bG._data(b1))){return}if(cc.handler){bZ=cc;cc=bZ.handler;b2=bZ.selector}if(!cc.guid){cc.guid=bG.guid++}cd=b6.events;if(!cd){b6.events=cd={}}b4=b6.handle;if(!b4){b6.handle=b4=function(ce){return typeof bG!=="undefined"&&(!ce||bG.event.triggered!==ce.type)?bG.event.dispatch.apply(b4.elem,arguments):aB};b4.elem=b1}b5=bG.trim(aq(b5)).split(" ");for(cb=0;cb<b5.length;cb++){ca=br.exec(b5[cb])||[];b8=ca[1];e=(ca[2]||"").split(".").sort();b7=bG.event.special[b8]||{};b8=(b2?b7.delegateType:b7.bindType)||b8;b7=bG.event.special[b8]||{};b9=bG.extend({type:b8,origType:ca[1],data:b3,handler:cc,guid:cc.guid,selector:b2,needsContext:b2&&bG.expr.match.needsContext.test(b2),namespace:e.join(".")},bZ);b0=cd[b8];if(!b0){b0=cd[b8]=[];b0.delegateCount=0;if(!b7.setup||b7.setup.call(b1,b3,e,b4)===false){if(b1.addEventListener){b1.addEventListener(b8,b4,false)}else{if(b1.attachEvent){b1.attachEvent("on"+b8,b4)}}}}if(b7.add){b7.add.call(b1,b9);if(!b9.handler.guid){b9.handler.guid=cc.guid}}if(b2){b0.splice(b0.delegateCount++,0,b9)}else{b0.push(b9)}bG.event.global[b8]=true}b1=null},global:{},remove:function(b1,b6,cc,b2,b5){var cd,ce,b9,b0,bZ,b3,b4,cb,b8,e,ca,b7=bG.hasData(b1)&&bG._data(b1);if(!b7||!(cb=b7.events)){return}b6=bG.trim(aq(b6||"")).split(" ");for(cd=0;cd<b6.length;cd++){ce=br.exec(b6[cd])||[];b9=b0=ce[1];bZ=ce[2];if(!b9){for(b9 in cb){bG.event.remove(b1,b9+b6[cd],cc,b2,true)}continue}b8=bG.event.special[b9]||{};b9=(b2?b8.delegateType:b8.bindType)||b9;e=cb[b9]||[];b3=e.length;bZ=bZ?new RegExp("(^|\\.)"+bZ.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(b4=0;b4<e.length;b4++){ca=e[b4];if((b5||b0===ca.origType)&&(!cc||cc.guid===ca.guid)&&(!bZ||bZ.test(ca.namespace))&&(!b2||b2===ca.selector||b2==="**"&&ca.selector)){e.splice(b4--,1);if(ca.selector){e.delegateCount--}if(b8.remove){b8.remove.call(b1,ca)}}}if(e.length===0&&b3!==e.length){if(!b8.teardown||b8.teardown.call(b1,bZ,b7.handle)===false){bG.removeEvent(b1,b9,b7.handle)}delete cb[b9]}}if(bG.isEmptyObject(cb)){delete b7.handle;bG.removeData(b1,"events",true)}},customEvent:{getData:true,setData:true,changeData:true},trigger:function(bZ,b6,b4,cd){if(b4&&(b4.nodeType===3||b4.nodeType===8)){return}var e,b1,b7,cb,b3,b2,b9,b8,b5,cc,ca=bZ.type||bZ,b0=[];if(by.test(ca+bG.event.triggered)){return}if(ca.indexOf("!")>=0){ca=ca.slice(0,-1);b1=true}if(ca.indexOf(".")>=0){b0=ca.split(".");ca=b0.shift();b0.sort()}if((!b4||bG.event.customEvent[ca])&&!bG.event.global[ca]){return}bZ=typeof bZ==="object"?bZ[bG.expando]?bZ:new bG.Event(ca,bZ):new bG.Event(ca);bZ.type=ca;bZ.isTrigger=true;bZ.exclusive=b1;bZ.namespace=b0.join(".");bZ.namespace_re=bZ.namespace?new RegExp("(^|\\.)"+b0.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;b2=ca.indexOf(":")<0?"on"+ca:"";if(!b4){e=bG.cache;for(b7 in e){if(e[b7].events&&e[b7].events[ca]){bG.event.trigger(bZ,b6,e[b7].handle.elem,true)}}return}bZ.result=aB;if(!bZ.target){bZ.target=b4}b6=b6!=null?bG.makeArray(b6):[];b6.unshift(bZ);b9=bG.event.special[ca]||{};if(b9.trigger&&b9.trigger.apply(b4,b6)===false){return}b5=[[b4,b9.bindType||ca]];if(!cd&&!b9.noBubble&&!bG.isWindow(b4)){cc=b9.delegateType||ca;cb=by.test(cc+ca)?b4:b4.parentNode;for(b3=b4;cb;cb=cb.parentNode){b5.push([cb,cc]);b3=cb}if(b3===(b4.ownerDocument||o)){b5.push([b3.defaultView||b3.parentWindow||a2,cc])}}for(b7=0;b7<b5.length&&!bZ.isPropagationStopped();b7++){cb=b5[b7][0];bZ.type=b5[b7][1];b8=(bG._data(cb,"events")||{})[bZ.type]&&bG._data(cb,"handle");if(b8){b8.apply(cb,b6)}b8=b2&&cb[b2];if(b8&&bG.acceptData(cb)&&b8.apply&&b8.apply(cb,b6)===false){bZ.preventDefault()}}bZ.type=ca;if(!cd&&!bZ.isDefaultPrevented()){if((!b9._default||b9._default.apply(b4.ownerDocument,b6)===false)&&!(ca==="click"&&bG.nodeName(b4,"a"))&&bG.acceptData(b4)){if(b2&&b4[ca]&&((ca!=="focus"&&ca!=="blur")||bZ.target.offsetWidth!==0)&&!bG.isWindow(b4)){b3=b4[b2];if(b3){b4[b2]=null}bG.event.triggered=ca;b4[ca]();bG.event.triggered=aB;if(b3){b4[b2]=b3}}}}return bZ.result},dispatch:function(e){e=bG.event.fix(e||a2.event);var b5,b4,ce,b8,b7,bZ,b6,cc,b1,cd,b2=((bG._data(this,"events")||{})[e.type]||[]),b3=b2.delegateCount,ca=a4.call(arguments),b0=!e.exclusive&&!e.namespace,b9=bG.event.special[e.type]||{},cb=[];ca[0]=e;e.delegateTarget=this;if(b9.preDispatch&&b9.preDispatch.call(this,e)===false){return}if(b3&&!(e.button&&e.type==="click")){for(ce=e.target;ce!=this;ce=ce.parentNode||this){if(ce.disabled!==true||e.type!=="click"){b7={};b6=[];for(b5=0;b5<b3;b5++){cc=b2[b5];b1=cc.selector;if(b7[b1]===aB){b7[b1]=cc.needsContext?bG(b1,this).index(ce)>=0:bG.find(b1,this,null,[ce]).length}if(b7[b1]){b6.push(cc)}}if(b6.length){cb.push({elem:ce,matches:b6})}}}}if(b2.length>b3){cb.push({elem:this,matches:b2.slice(b3)})}for(b5=0;b5<cb.length&&!e.isPropagationStopped();b5++){bZ=cb[b5];e.currentTarget=bZ.elem;for(b4=0;b4<bZ.matches.length&&!e.isImmediatePropagationStopped();b4++){cc=bZ.matches[b4];if(b0||(!e.namespace&&!cc.namespace)||e.namespace_re&&e.namespace_re.test(cc.namespace)){e.data=cc.data;e.handleObj=cc;b8=((bG.event.special[cc.origType]||{}).handle||cc.handler).apply(bZ.elem,ca);if(b8!==aB){e.result=b8;if(b8===false){e.preventDefault();e.stopPropagation()}}}}}if(b9.postDispatch){b9.postDispatch.call(this,e)}return e.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(bZ,e){if(bZ.which==null){bZ.which=e.charCode!=null?e.charCode:e.keyCode}return bZ}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(b1,b0){var b2,b3,e,bZ=b0.button,b4=b0.fromElement;if(b1.pageX==null&&b0.clientX!=null){b2=b1.target.ownerDocument||o;b3=b2.documentElement;e=b2.body;b1.pageX=b0.clientX+(b3&&b3.scrollLeft||e&&e.scrollLeft||0)-(b3&&b3.clientLeft||e&&e.clientLeft||0);b1.pageY=b0.clientY+(b3&&b3.scrollTop||e&&e.scrollTop||0)-(b3&&b3.clientTop||e&&e.clientTop||0)}if(!b1.relatedTarget&&b4){b1.relatedTarget=b4===b1.target?b0.toElement:b4}if(!b1.which&&bZ!==aB){b1.which=(bZ&1?1:(bZ&2?3:(bZ&4?2:0)))}return b1}},fix:function(b0){if(b0[bG.expando]){return b0}var bZ,b3,e=b0,b1=bG.event.fixHooks[b0.type]||{},b2=b1.props?this.props.concat(b1.props):this.props;b0=bG.Event(e);for(bZ=b2.length;bZ;){b3=b2[--bZ];b0[b3]=e[b3]}if(!b0.target){b0.target=e.srcElement||o}if(b0.target.nodeType===3){b0.target=b0.target.parentNode}b0.metaKey=!!b0.metaKey;return b1.filter?b1.filter(b0,e):b0},special:{load:{noBubble:true},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(b0,bZ,e){if(bG.isWindow(this)){this.onbeforeunload=e}},teardown:function(bZ,e){if(this.onbeforeunload===e){this.onbeforeunload=null}}}},simulate:function(b0,b2,b1,bZ){var b3=bG.extend(new bG.Event(),b1,{type:b0,isSimulated:true,originalEvent:{}});if(bZ){bG.event.trigger(b3,null,b2)}else{bG.event.dispatch.call(b2,b3)}if(b3.isDefaultPrevented()){b1.preventDefault()}}};bG.event.handle=bG.event.dispatch;bG.removeEvent=o.removeEventListener?function(bZ,e,b0){if(bZ.removeEventListener){bZ.removeEventListener(e,b0,false)}}:function(b0,bZ,b1){var e="on"+bZ;if(b0.detachEvent){if(typeof b0[e]==="undefined"){b0[e]=null}b0.detachEvent(e,b1)}};bG.Event=function(bZ,e){if(!(this instanceof bG.Event)){return new bG.Event(bZ,e)}if(bZ&&bZ.type){this.originalEvent=bZ;this.type=bZ.type;this.isDefaultPrevented=(bZ.defaultPrevented||bZ.returnValue===false||bZ.getPreventDefault&&bZ.getPreventDefault())?R:X}else{this.type=bZ}if(e){bG.extend(this,e)}this.timeStamp=bZ&&bZ.timeStamp||bG.now();this[bG.expando]=true};function X(){return false}function R(){return true}bG.Event.prototype={preventDefault:function(){this.isDefaultPrevented=R;var bZ=this.originalEvent;if(!bZ){return}if(bZ.preventDefault){bZ.preventDefault()}else{bZ.returnValue=false}},stopPropagation:function(){this.isPropagationStopped=R;var bZ=this.originalEvent;if(!bZ){return}if(bZ.stopPropagation){bZ.stopPropagation()}bZ.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=R;this.stopPropagation()},isDefaultPrevented:X,isPropagationStopped:X,isImmediatePropagationStopped:X};bG.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(bZ,e){bG.event.special[bZ]={delegateType:e,bindType:e,handle:function(b3){var b1,b5=this,b4=b3.relatedTarget,b2=b3.handleObj,b0=b2.selector;if(!b4||(b4!==b5&&!bG.contains(b5,b4))){b3.type=b2.origType;b1=b2.handler.apply(this,arguments);b3.type=e}return b1}}});if(!bG.support.submitBubbles){bG.event.special.submit={setup:function(){if(bG.nodeName(this,"form")){return false}bG.event.add(this,"click._submit keypress._submit",function(b1){var b0=b1.target,bZ=bG.nodeName(b0,"input")||bG.nodeName(b0,"button")?b0.form:aB;if(bZ&&!bG._data(bZ,"_submit_attached")){bG.event.add(bZ,"submit._submit",function(e){e._submit_bubble=true});bG._data(bZ,"_submit_attached",true)}})},postDispatch:function(e){if(e._submit_bubble){delete e._submit_bubble;if(this.parentNode&&!e.isTrigger){bG.event.simulate("submit",this.parentNode,e,true)}}},teardown:function(){if(bG.nodeName(this,"form")){return false}bG.event.remove(this,"._submit")}}}if(!bG.support.changeBubbles){bG.event.special.change={setup:function(){if(bE.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){bG.event.add(this,"propertychange._change",function(e){if(e.originalEvent.propertyName==="checked"){this._just_changed=true}});bG.event.add(this,"click._change",function(e){if(this._just_changed&&!e.isTrigger){this._just_changed=false}bG.event.simulate("change",this,e,true)})}return false}bG.event.add(this,"beforeactivate._change",function(b0){var bZ=b0.target;if(bE.test(bZ.nodeName)&&!bG._data(bZ,"_change_attached")){bG.event.add(bZ,"change._change",function(e){if(this.parentNode&&!e.isSimulated&&!e.isTrigger){bG.event.simulate("change",this.parentNode,e,true)}});bG._data(bZ,"_change_attached",true)}})},handle:function(bZ){var e=bZ.target;if(this!==e||bZ.isSimulated||bZ.isTrigger||(e.type!=="radio"&&e.type!=="checkbox")){return bZ.handleObj.handler.apply(this,arguments)}},teardown:function(){bG.event.remove(this,"._change");return !bE.test(this.nodeName)}}}if(!bG.support.focusinBubbles){bG.each({focus:"focusin",blur:"focusout"},function(b1,e){var bZ=0,b0=function(b2){bG.event.simulate(e,b2.target,bG.event.fix(b2),true)};bG.event.special[e]={setup:function(){if(bZ++===0){o.addEventListener(b1,b0,true)}},teardown:function(){if(--bZ===0){o.removeEventListener(b1,b0,true)}}}})}bG.fn.extend({on:function(b0,e,b3,b2,bZ){var b4,b1;if(typeof b0==="object"){if(typeof e!=="string"){b3=b3||e;e=aB}for(b1 in b0){this.on(b1,e,b3,b0[b1],bZ)}return this}if(b3==null&&b2==null){b2=e;b3=e=aB}else{if(b2==null){if(typeof e==="string"){b2=b3;b3=aB}else{b2=b3;b3=e;e=aB}}}if(b2===false){b2=X}else{if(!b2){return this}}if(bZ===1){b4=b2;b2=function(b5){bG().off(b5);return b4.apply(this,arguments)};b2.guid=b4.guid||(b4.guid=bG.guid++)}return this.each(function(){bG.event.add(this,b0,b2,b3,e)})},one:function(bZ,e,b1,b0){return this.on(bZ,e,b1,b0,1)},off:function(b0,e,b2){var bZ,b1;if(b0&&b0.preventDefault&&b0.handleObj){bZ=b0.handleObj;bG(b0.delegateTarget).off(bZ.namespace?bZ.origType+"."+bZ.namespace:bZ.origType,bZ.selector,bZ.handler);return this}if(typeof b0==="object"){for(b1 in b0){this.off(b1,e,b0[b1])}return this}if(e===false||typeof e==="function"){b2=e;e=aB}if(b2===false){b2=X}return this.each(function(){bG.event.remove(this,b0,b2,e)})},bind:function(e,b0,bZ){return this.on(e,null,b0,bZ)},unbind:function(e,bZ){return this.off(e,null,bZ)},live:function(e,b0,bZ){bG(this.context).on(e,this.selector,b0,bZ);return this},die:function(e,bZ){bG(this.context).off(e,this.selector||"**",bZ);return this},delegate:function(e,bZ,b1,b0){return this.on(bZ,e,b1,b0)},undelegate:function(e,bZ,b0){return arguments.length===1?this.off(e,"**"):this.off(bZ,e||"**",b0)},trigger:function(e,bZ){return this.each(function(){bG.event.trigger(e,bZ,this)})},triggerHandler:function(e,bZ){if(this[0]){return bG.event.trigger(e,bZ,this[0],true)}},toggle:function(b1){var bZ=arguments,e=b1.guid||bG.guid++,b0=0,b2=function(b3){var b4=(bG._data(this,"lastToggle"+b1.guid)||0)%b0;bG._data(this,"lastToggle"+b1.guid,b4+1);b3.preventDefault();return bZ[b4].apply(this,arguments)||false};b2.guid=e;while(b0<bZ.length){bZ[b0++].guid=e}return this.click(b2)},hover:function(e,bZ){return this.mouseenter(e).mouseleave(bZ||e)}});bG.each(("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu").split(" "),function(bZ,e){bG.fn[e]=function(b1,b0){if(b0==null){b0=b1;b1=null}return arguments.length>0?this.on(e,null,b1,b0):this.trigger(e)};if(a3.test(e)){bG.event.fixHooks[e]=bG.event.keyHooks}if(bK.test(e)){bG.event.fixHooks[e]=bG.event.mouseHooks}});
/*!
     * Sizzle CSS Selector Engine
     * Copyright 2012 jQuery Foundation and other contributors
     * Released under the MIT license
     * http://sizzlejs.com/
     */
(function(cS,ch){var cX,ca,cL,b0,cm,cA,cd,cg,cc,cJ,b9=true,cu="undefined",cZ=("sizcache"+Math.random()).replace(".",""),b4=String,b8=cS.document,cb=b8.documentElement,cr=0,cf=0,cE=[].pop,cW=[].push,cl=[].slice,co=[].indexOf||function(c8){var c7=0,e=this.length;for(;c7<e;c7++){if(this[c7]===c8){return c7}}return -1},c1=function(e,c7){e[cZ]=c7==null||c7;return e},c5=function(){var e={},c7=[];return c1(function(c8,c9){if(c7.push(c8)>cL.cacheLength){delete e[c7.shift()]}return(e[c8]=c9)},e)},cU=c5(),cV=c5(),cn=c5(),cy="[\\x20\\t\\r\\n\\f]",ck="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",ci=ck.replace("w","w#"),c4="([*^$|!~]?=)",cP="\\["+cy+"*("+ck+")"+cy+"*(?:"+c4+cy+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ci+")|)|)"+cy+"*\\]",c6=":("+ck+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+cP+")|[^:]|\\\\.)*|.*))\\)|)",cz=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+cy+"*((?:-\\d)?\\d*)"+cy+"*\\)|)(?=[^-]|$)",cT=new RegExp("^"+cy+"+|((?:^|[^\\\\])(?:\\\\.)*)"+cy+"+$","g"),b5=new RegExp("^"+cy+"*,"+cy+"*"),cH=new RegExp("^"+cy+"*([\\x20\\t\\r\\n\\f>+~])"+cy+"*"),cM=new RegExp(c6),cO=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,cD=/^:not/,cR=/[\x20\t\r\n\f]*[+~]/,c0=/:not\($/,cs=/h\d/i,cN=/input|select|textarea|button/i,ct=/\\(?!\\)/g,cG={ID:new RegExp("^#("+ck+")"),CLASS:new RegExp("^\\.("+ck+")"),NAME:new RegExp("^\\[name=['\"]?("+ck+")['\"]?\\]"),TAG:new RegExp("^("+ck.replace("w","w*")+")"),ATTR:new RegExp("^"+cP),PSEUDO:new RegExp("^"+c6),POS:new RegExp(cz,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+cy+"*(even|odd|(([+-]|)(\\d*)n|)"+cy+"*(?:([+-]|)"+cy+"*(\\d+)|))"+cy+"*\\)|)","i"),needsContext:new RegExp("^"+cy+"*[>+~]|"+cz,"i")},cK=function(c7){var c9=b8.createElement("div");try{return c7(c9)}catch(c8){return false}finally{c9=null}},b7=cK(function(e){e.appendChild(b8.createComment(""));return !e.getElementsByTagName("*").length}),cC=cK(function(e){e.innerHTML="<a href='#'></a>";return e.firstChild&&typeof e.firstChild.getAttribute!==cu&&e.firstChild.getAttribute("href")==="#"}),cq=cK(function(c7){c7.innerHTML="<select></select>";var e=typeof c7.lastChild.getAttribute("multiple");return e!=="boolean"&&e!=="string"}),cB=cK(function(e){e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>";if(!e.getElementsByClassName||!e.getElementsByClassName("e").length){return false}e.lastChild.className="e";return e.getElementsByClassName("e").length===2}),bZ=cK(function(c7){c7.id=cZ+0;c7.innerHTML="<a name='"+cZ+"'></a><div name='"+cZ+"'></div>";cb.insertBefore(c7,cb.firstChild);var e=b8.getElementsByName&&b8.getElementsByName(cZ).length===2+b8.getElementsByName(cZ+0).length;ca=!b8.getElementById(cZ);cb.removeChild(c7);return e});try{cl.call(cb.childNodes,0)[0].nodeType}catch(c3){cl=function(c7){var c8,e=[];for(;(c8=this[c7]);c7++){e.push(c8)}return e}}function cQ(c9,e,db,de){db=db||[];e=e||b8;var dc,c7,dd,c8,da=e.nodeType;if(!c9||typeof c9!=="string"){return db}if(da!==1&&da!==9){return[]}dd=cm(e);if(!dd&&!de){if((dc=cO.exec(c9))){if((c8=dc[1])){if(da===9){c7=e.getElementById(c8);if(c7&&c7.parentNode){if(c7.id===c8){db.push(c7);return db}}else{return db}}else{if(e.ownerDocument&&(c7=e.ownerDocument.getElementById(c8))&&cA(e,c7)&&c7.id===c8){db.push(c7);return db}}}else{if(dc[2]){cW.apply(db,cl.call(e.getElementsByTagName(c9),0));return db}else{if((c8=dc[3])&&cB&&e.getElementsByClassName){cW.apply(db,cl.call(e.getElementsByClassName(c8),0));return db}}}}}return cY(c9.replace(cT,"$1"),e,db,de,dd)}cQ.matches=function(c7,e){return cQ(c7,null,null,e)};cQ.matchesSelector=function(e,c7){return cQ(c7,null,null,[e]).length>0};function cI(e){return function(c8){var c7=c8.nodeName.toLowerCase();return c7==="input"&&c8.type===e}}function b3(e){return function(c8){var c7=c8.nodeName.toLowerCase();return(c7==="input"||c7==="button")&&c8.type===e}}function cF(e){return c1(function(c7){c7=+c7;return c1(function(c8,dc){var da,c9=e([],c8.length,c7),db=c9.length;while(db--){if(c8[(da=c9[db])]){c8[da]=!(dc[da]=c8[da])}}})})}b0=cQ.getText=function(da){var c9,c7="",c8=0,e=da.nodeType;if(e){if(e===1||e===9||e===11){if(typeof da.textContent==="string"){return da.textContent}else{for(da=da.firstChild;da;da=da.nextSibling){c7+=b0(da)}}}else{if(e===3||e===4){return da.nodeValue}}}else{for(;(c9=da[c8]);c8++){c7+=b0(c9)}}return c7};cm=cQ.isXML=function(e){var c7=e&&(e.ownerDocument||e).documentElement;return c7?c7.nodeName!=="HTML":false};cA=cQ.contains=cb.contains?function(c7,e){var c9=c7.nodeType===9?c7.documentElement:c7,c8=e&&e.parentNode;return c7===c8||!!(c8&&c8.nodeType===1&&c9.contains&&c9.contains(c8))}:cb.compareDocumentPosition?function(c7,e){return e&&!!(c7.compareDocumentPosition(e)&16)}:function(c7,e){while((e=e.parentNode)){if(e===c7){return true}}return false};cQ.attr=function(c8,c7){var c9,e=cm(c8);if(!e){c7=c7.toLowerCase()}if((c9=cL.attrHandle[c7])){return c9(c8)}if(e||cq){return c8.getAttribute(c7)}c9=c8.getAttributeNode(c7);return c9?typeof c8[c7]==="boolean"?c8[c7]?c7:null:c9.specified?c9.value:null:null};cL=cQ.selectors={cacheLength:50,createPseudo:c1,match:cG,attrHandle:cC?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},find:{ID:ca?function(c9,c8,c7){if(typeof c8.getElementById!==cu&&!c7){var e=c8.getElementById(c9);return e&&e.parentNode?[e]:[]}}:function(c9,c8,c7){if(typeof c8.getElementById!==cu&&!c7){var e=c8.getElementById(c9);return e?e.id===c9||typeof e.getAttributeNode!==cu&&e.getAttributeNode("id").value===c9?[e]:ch:[]}},TAG:b7?function(e,c7){if(typeof c7.getElementsByTagName!==cu){return c7.getElementsByTagName(e)}}:function(e,da){var c9=da.getElementsByTagName(e);if(e==="*"){var db,c8=[],c7=0;for(;(db=c9[c7]);c7++){if(db.nodeType===1){c8.push(db)}}return c8}return c9},NAME:bZ&&function(e,c7){if(typeof c7.getElementsByName!==cu){return c7.getElementsByName(name)}},CLASS:cB&&function(c8,c7,e){if(typeof c7.getElementsByClassName!==cu&&!e){return c7.getElementsByClassName(c8)}}},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){e[1]=e[1].replace(ct,"");e[3]=(e[4]||e[5]||"").replace(ct,"");if(e[2]==="~="){e[3]=" "+e[3]+" "}return e.slice(0,4)},CHILD:function(e){e[1]=e[1].toLowerCase();if(e[1]==="nth"){if(!e[2]){cQ.error(e[0])}e[3]=+(e[3]?e[4]+(e[5]||1):2*(e[2]==="even"||e[2]==="odd"));e[4]=+((e[6]+e[7])||e[2]==="odd")}else{if(e[2]){cQ.error(e[0])}}return e},PSEUDO:function(c7){var c8,e;if(cG.CHILD.test(c7[0])){return null}if(c7[3]){c7[2]=c7[3]}else{if((c8=c7[4])){if(cM.test(c8)&&(e=b1(c8,true))&&(e=c8.indexOf(")",c8.length-e)-c8.length)){c8=c8.slice(0,e);c7[0]=c7[0].slice(0,e)}c7[2]=c8}}return c7.slice(0,3)}},filter:{ID:ca?function(e){e=e.replace(ct,"");return function(c7){return c7.getAttribute("id")===e}}:function(e){e=e.replace(ct,"");return function(c8){var c7=typeof c8.getAttributeNode!==cu&&c8.getAttributeNode("id");return c7&&c7.value===e}},TAG:function(e){if(e==="*"){return function(){return true}}e=e.replace(ct,"").toLowerCase();return function(c7){return c7.nodeName&&c7.nodeName.toLowerCase()===e}},CLASS:function(e){var c7=cU[cZ][e];if(!c7){c7=cU(e,new RegExp("(^|"+cy+")"+e+"("+cy+"|$)"))}return function(c8){return c7.test(c8.className||(typeof c8.getAttribute!==cu&&c8.getAttribute("class"))||"")}},ATTR:function(c8,c7,e){return function(db,da){var c9=cQ.attr(db,c8);if(c9==null){return c7==="!="}if(!c7){return true}c9+="";return c7==="="?c9===e:c7==="!="?c9!==e:c7==="^="?e&&c9.indexOf(e)===0:c7==="*="?e&&c9.indexOf(e)>-1:c7==="$="?e&&c9.substr(c9.length-e.length)===e:c7==="~="?(" "+c9+" ").indexOf(e)>-1:c7==="|="?c9===e||c9.substr(0,e.length+1)===e+"-":false}},CHILD:function(e,c8,c9,c7){if(e==="nth"){return function(dc){var db,dd,da=dc.parentNode;if(c9===1&&c7===0){return true}if(da){dd=0;for(db=da.firstChild;db;db=db.nextSibling){if(db.nodeType===1){dd++;if(dc===db){break}}}}dd-=c7;return dd===c9||(dd%c9===0&&dd/c9>=0)}}return function(db){var da=db;switch(e){case"only":case"first":while((da=da.previousSibling)){if(da.nodeType===1){return false}}if(e==="first"){return true}da=db;case"last":while((da=da.nextSibling)){if(da.nodeType===1){return false}}return true}}},PSEUDO:function(c9,c8){var e,c7=cL.pseudos[c9]||cL.setFilters[c9.toLowerCase()]||cQ.error("unsupported pseudo: "+c9);if(c7[cZ]){return c7(c8)}if(c7.length>1){e=[c9,c9,"",c8];return cL.setFilters.hasOwnProperty(c9.toLowerCase())?c1(function(dc,de){var db,da=c7(dc,c8),dd=da.length;while(dd--){db=co.call(dc,da[dd]);dc[db]=!(de[db]=da[dd])}}):function(da){return c7(da,0,e)}}return c7}},pseudos:{not:c1(function(e){var c7=[],c8=[],c9=cd(e.replace(cT,"$1"));return c9[cZ]?c1(function(db,dg,de,dc){var df,da=c9(db,null,dc,[]),dd=db.length;while(dd--){if((df=da[dd])){db[dd]=!(dg[dd]=df)}}}):function(dc,db,da){c7[0]=dc;c9(c7,null,da,c8);return !c8.pop()}}),has:c1(function(e){return function(c7){return cQ(e,c7).length>0}}),contains:c1(function(e){return function(c7){return(c7.textContent||c7.innerText||b0(c7)).indexOf(e)>-1}}),enabled:function(e){return e.disabled===false},disabled:function(e){return e.disabled===true},checked:function(e){var c7=e.nodeName.toLowerCase();return(c7==="input"&&!!e.checked)||(c7==="option"&&!!e.selected)},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},parent:function(e){return !cL.pseudos.empty(e)},empty:function(c7){var e;c7=c7.firstChild;while(c7){if(c7.nodeName>"@"||(e=c7.nodeType)===3||e===4){return false}c7=c7.nextSibling}return true},header:function(e){return cs.test(e.nodeName)},text:function(c8){var c7,e;return c8.nodeName.toLowerCase()==="input"&&(c7=c8.type)==="text"&&((e=c8.getAttribute("type"))==null||e.toLowerCase()===c7)},radio:cI("radio"),checkbox:cI("checkbox"),file:cI("file"),password:cI("password"),image:cI("image"),submit:b3("submit"),reset:b3("reset"),button:function(c7){var e=c7.nodeName.toLowerCase();return e==="input"&&c7.type==="button"||e==="button"},input:function(e){return cN.test(e.nodeName)},focus:function(e){var c7=e.ownerDocument;return e===c7.activeElement&&(!c7.hasFocus||c7.hasFocus())&&!!(e.type||e.href)},active:function(e){return e===e.ownerDocument.activeElement},first:cF(function(e,c8,c7){return[0]}),last:cF(function(e,c8,c7){return[c8-1]}),eq:cF(function(e,c8,c7){return[c7<0?c7+c8:c7]}),even:cF(function(e,c9,c8){for(var c7=0;c7<c9;c7+=2){e.push(c7)}return e}),odd:cF(function(e,c9,c8){for(var c7=1;c7<c9;c7+=2){e.push(c7)}return e}),lt:cF(function(e,c9,c8){for(var c7=c8<0?c8+c9:c8;--c7>=0;){e.push(c7)}return e}),gt:cF(function(e,c9,c8){for(var c7=c8<0?c8+c9:c8;++c7<c9;){e.push(c7)}return e})}};function b2(c7,e,c8){if(c7===e){return c8}var c9=c7.nextSibling;while(c9){if(c9===e){return -1}c9=c9.nextSibling}return 1}cg=cb.compareDocumentPosition?function(c7,e){if(c7===e){cc=true;return 0}return(!c7.compareDocumentPosition||!e.compareDocumentPosition?c7.compareDocumentPosition:c7.compareDocumentPosition(e)&4)?-1:1}:function(de,dd){if(de===dd){cc=true;return 0}else{if(de.sourceIndex&&dd.sourceIndex){return de.sourceIndex-dd.sourceIndex}}var db,c7,c8=[],e=[],da=de.parentNode,dc=dd.parentNode,df=da;if(da===dc){return b2(de,dd)}else{if(!da){return -1}else{if(!dc){return 1}}}while(df){c8.unshift(df);df=df.parentNode}df=dc;while(df){e.unshift(df);df=df.parentNode}db=c8.length;c7=e.length;for(var c9=0;c9<db&&c9<c7;c9++){if(c8[c9]!==e[c9]){return b2(c8[c9],e[c9])}}return c9===db?b2(de,e[c9],-1):b2(c8[c9],dd,1)};[0,0].sort(cg);b9=!cc;cQ.uniqueSort=function(c7){var c8,e=1;cc=b9;c7.sort(cg);if(cc){for(;(c8=c7[e]);e++){if(c8===c7[e-1]){c7.splice(e--,1)}}}return c7};cQ.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};function b1(da,df){var c7,db,dd,de,dc,c8,e,c9=cV[cZ][da];if(c9){return df?0:c9.slice(0)}dc=da;c8=[];e=cL.preFilter;while(dc){if(!c7||(db=b5.exec(dc))){if(db){dc=dc.slice(db[0].length)}c8.push(dd=[])}c7=false;if((db=cH.exec(dc))){dd.push(c7=new b4(db.shift()));dc=dc.slice(c7.length);c7.type=db[0].replace(cT," ")}for(de in cL.filter){if((db=cG[de].exec(dc))&&(!e[de]||(db=e[de](db,b8,true)))){dd.push(c7=new b4(db.shift()));dc=dc.slice(c7.length);c7.type=de;c7.matches=db}}if(!c7){break}}return df?dc.length:dc?cQ.error(da):cV(da,c8).slice(0)}function cw(da,c8,c9){var e=c8.dir,db=c9&&c8.dir==="parentNode",c7=cf++;return c8.first?function(de,dd,dc){while((de=de[e])){if(db||de.nodeType===1){return da(de,dd,dc)}}}:function(df,de,dd){if(!dd){var dc,dg=cr+" "+c7+" ",dh=dg+cX;while((df=df[e])){if(db||df.nodeType===1){if((dc=df[cZ])===dh){return df.sizset}else{if(typeof dc==="string"&&dc.indexOf(dg)===0){if(df.sizset){return df}}else{df[cZ]=dh;if(da(df,de,dd)){df.sizset=true;return df}df.sizset=false}}}}}else{while((df=df[e])){if(db||df.nodeType===1){if(da(df,de,dd)){return df}}}}}}function ce(e){return e.length>1?function(da,c9,c7){var c8=e.length;while(c8--){if(!e[c8](da,c9,c7)){return false}}return true}:e[0]}function cv(e,c7,c8,c9,dc){var da,df=[],db=0,dd=e.length,de=c7!=null;for(;db<dd;db++){if((da=e[db])){if(!c8||c8(da,c9,dc)){df.push(da);if(de){c7.push(db)}}}}return df}function c2(c8,c7,da,c9,db,e){if(c9&&!c9[cZ]){c9=c2(c9)}if(db&&!db[cZ]){db=c2(db,e)}return c1(function(dn,dk,de,dm){if(dn&&db){return}var dl,dg,dh,df=[],dp=[],dd=dk.length,dc=dn||cp(c7||"*",de.nodeType?[de]:de,[],dn),di=c8&&(dn||!c7)?cv(dc,df,c8,de,dm):dc,dj=da?db||(dn?c8:dd||c9)?[]:dk:di;if(da){da(di,dj,de,dm)}if(c9){dh=cv(dj,dp);c9(dh,[],de,dm);dl=dh.length;while(dl--){if((dg=dh[dl])){dj[dp[dl]]=!(di[dp[dl]]=dg)}}}if(dn){dl=c8&&dj.length;while(dl--){if((dg=dj[dl])){dn[df[dl]]=!(dk[df[dl]]=dg)}}}else{dj=cv(dj===dk?dj.splice(dd,dj.length):dj);if(db){db(null,dk,dj,dm)}else{cW.apply(dk,dj)}}})}function cx(dc){var c7,da,c8,db=dc.length,df=cL.relative[dc[0].type],dg=df||cL.relative[" "],c9=df?1:0,dd=cw(function(dh){return dh===c7},dg,true),de=cw(function(dh){return co.call(c7,dh)>-1},dg,true),e=[function(dj,di,dh){return(!df&&(dh||di!==cJ))||((c7=di).nodeType?dd(dj,di,dh):de(dj,di,dh))}];for(;c9<db;c9++){if((da=cL.relative[dc[c9].type])){e=[cw(ce(e),da)]}else{da=cL.filter[dc[c9].type].apply(null,dc[c9].matches);if(da[cZ]){c8=++c9;for(;c8<db;c8++){if(cL.relative[dc[c8].type]){break}}return c2(c9>1&&ce(e),c9>1&&dc.slice(0,c9-1).join("").replace(cT,"$1"),da,c9<c8&&cx(dc.slice(c9,c8)),c8<db&&cx((dc=dc.slice(c8))),c8<db&&dc.join(""))}e.push(da)}}return ce(e)}function b6(c9,c8){var e=c8.length>0,da=c9.length>0,c7=function(dk,de,dj,di,dr){var df,dg,dl,dq=[],dp=0,dh="0",db=dk&&[],dm=dr!=null,dn=cJ,dd=dk||da&&cL.find.TAG("*",dr&&de.parentNode||de),dc=(cr+=dn==null?1:Math.E);if(dm){cJ=de!==b8&&de;cX=c7.el}for(;(df=dd[dh])!=null;dh++){if(da&&df){for(dg=0;(dl=c9[dg]);dg++){if(dl(df,de,dj)){di.push(df);break}}if(dm){cr=dc;cX=++c7.el}}if(e){if((df=!dl&&df)){dp--}if(dk){db.push(df)}}}dp+=dh;if(e&&dh!==dp){for(dg=0;(dl=c8[dg]);dg++){dl(db,dq,de,dj)}if(dk){if(dp>0){while(dh--){if(!(db[dh]||dq[dh])){dq[dh]=cE.call(di)}}}dq=cv(dq)}cW.apply(di,dq);if(dm&&!dk&&dq.length>0&&(dp+c8.length)>1){cQ.uniqueSort(di)}}if(dm){cr=dc;cJ=dn}return db};c7.el=0;return e?c1(c7):c7}cd=cQ.compile=function(e,db){var c8,c7=[],da=[],c9=cn[cZ][e];if(!c9){if(!db){db=b1(e)}c8=db.length;while(c8--){c9=cx(db[c8]);if(c9[cZ]){c7.push(c9)}else{da.push(c9)}}c9=cn(e,b6(da,c7))}return c9};function cp(c7,db,da,c8){var c9=0,e=db.length;for(;c9<e;c9++){cQ(c7,db[c9],da,c8)}return da}function cY(c8,e,da,de,dd){var db,dh,c7,dg,df,dc=b1(c8),c9=dc.length;if(!de){if(dc.length===1){dh=dc[0]=dc[0].slice(0);if(dh.length>2&&(c7=dh[0]).type==="ID"&&e.nodeType===9&&!dd&&cL.relative[dh[1].type]){e=cL.find.ID(c7.matches[0].replace(ct,""),e,dd)[0];if(!e){return da}c8=c8.slice(dh.shift().length)}for(db=cG.POS.test(c8)?-1:dh.length-1;db>=0;db--){c7=dh[db];if(cL.relative[(dg=c7.type)]){break}if((df=cL.find[dg])){if((de=df(c7.matches[0].replace(ct,""),cR.test(dh[0].type)&&e.parentNode||e,dd))){dh.splice(db,1);c8=de.length&&dh.join("");if(!c8){cW.apply(da,cl.call(de,0));return da}break}}}}}cd(c8,dc)(de,e,dd,da,cR.test(c8));return da}if(b8.querySelectorAll){(function(){var db,dc=cY,da=/'|\\/g,c8=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,c7=[":focus"],e=[":active",":focus"],c9=cb.matchesSelector||cb.mozMatchesSelector||cb.webkitMatchesSelector||cb.oMatchesSelector||cb.msMatchesSelector;cK(function(dd){dd.innerHTML="<select><option selected=''></option></select>";if(!dd.querySelectorAll("[selected]").length){c7.push("\\["+cy+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)")}if(!dd.querySelectorAll(":checked").length){c7.push(":checked")}});cK(function(dd){dd.innerHTML="<p test=''></p>";if(dd.querySelectorAll("[test^='']").length){c7.push("[*^$]="+cy+"*(?:\"\"|'')")}dd.innerHTML="<input type='hidden'/>";if(!dd.querySelectorAll(":enabled").length){c7.push(":enabled",":disabled")}});c7=new RegExp(c7.join("|"));cY=function(dj,de,dl,dp,dn){if(!dp&&!dn&&(!c7||!c7.test(dj))){var dh,dm,dg=true,dd=cZ,df=de,dk=de.nodeType===9&&dj;if(de.nodeType===1&&de.nodeName.toLowerCase()!=="object"){dh=b1(dj);if((dg=de.getAttribute("id"))){dd=dg.replace(da,"\\$&")}else{de.setAttribute("id",dd)}dd="[id='"+dd+"'] ";dm=dh.length;while(dm--){dh[dm]=dd+dh[dm].join("")}df=cR.test(dj)&&de.parentNode||de;dk=dh.join(",")}if(dk){try{cW.apply(dl,cl.call(df.querySelectorAll(dk),0));return dl}catch(di){}finally{if(!dg){de.removeAttribute("id")}}}}return dc(dj,de,dl,dp,dn)};if(c9){cK(function(de){db=c9.call(de,"div");try{c9.call(de,"[test!='']:sizzle");e.push("!=",c6)}catch(dd){}});e=new RegExp(e.join("|"));cQ.matchesSelector=function(de,dg){dg=dg.replace(c8,"='$1']");if(!cm(de)&&!e.test(dg)&&(!c7||!c7.test(dg))){try{var dd=c9.call(de,dg);if(dd||db||de.document&&de.document.nodeType!==11){return dd}}catch(df){}}return cQ(dg,null,null,[de]).length>0}}})()}cL.pseudos.nth=cL.pseudos.eq;function cj(){}cL.filters=cj.prototype=cL.pseudos;cL.setFilters=new cj();cQ.attr=bG.attr;bG.find=cQ;bG.expr=cQ.selectors;bG.expr[":"]=bG.expr.pseudos;bG.unique=cQ.uniqueSort;bG.text=cQ.getText;bG.isXMLDoc=cQ.isXML;bG.contains=cQ.contains})(a2);var ag=/Until$/,bq=/^(?:parents|prev(?:Until|All))/,al=/^.[^:#\[\.,]*$/,y=bG.expr.match.needsContext,bu={children:true,contents:true,next:true,prev:true};bG.fn.extend({find:function(e){var b2,bZ,b4,b5,b3,b1,b0=this;if(typeof e!=="string"){return bG(e).filter(function(){for(b2=0,bZ=b0.length;b2<bZ;b2++){if(bG.contains(b0[b2],this)){return true}}})}b1=this.pushStack("","find",e);for(b2=0,bZ=this.length;b2<bZ;b2++){b4=b1.length;bG.find(e,this[b2],b1);if(b2>0){for(b5=b4;b5<b1.length;b5++){for(b3=0;b3<b4;b3++){if(b1[b3]===b1[b5]){b1.splice(b5--,1);break}}}}}return b1},has:function(b1){var b0,bZ=bG(b1,this),e=bZ.length;return this.filter(function(){for(b0=0;b0<e;b0++){if(bG.contains(this,bZ[b0])){return true}}})},not:function(e){return this.pushStack(aM(this,e,false),"not",e)},filter:function(e){return this.pushStack(aM(this,e,true),"filter",e)},is:function(e){return !!e&&(typeof e==="string"?y.test(e)?bG(e,this.context).index(this[0])>=0:bG.filter(e,this).length>0:this.filter(e).length>0)},closest:function(b2,b1){var b3,b0=0,e=this.length,bZ=[],b4=y.test(b2)||typeof b2!=="string"?bG(b2,b1||this.context):0;for(;b0<e;b0++){b3=this[b0];while(b3&&b3.ownerDocument&&b3!==b1&&b3.nodeType!==11){if(b4?b4.index(b3)>-1:bG.find.matchesSelector(b3,b2)){bZ.push(b3);break}b3=b3.parentNode}}bZ=bZ.length>1?bG.unique(bZ):bZ;return this.pushStack(bZ,"closest",b2)},index:function(e){if(!e){return(this[0]&&this[0].parentNode)?this.prevAll().length:-1}if(typeof e==="string"){return bG.inArray(this[0],bG(e))}return bG.inArray(e.jquery?e[0]:e,this)},add:function(e,bZ){var b1=typeof e==="string"?bG(e,bZ):bG.makeArray(e&&e.nodeType?[e]:e),b0=bG.merge(this.get(),b1);return this.pushStack(aR(b1[0])||aR(b0[0])?b0:bG.unique(b0))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}});bG.fn.andSelf=bG.fn.addBack;function aR(e){return !e||!e.parentNode||e.parentNode.nodeType===11}function aY(bZ,e){do{bZ=bZ[e]}while(bZ&&bZ.nodeType!==1);return bZ}bG.each({parent:function(bZ){var e=bZ.parentNode;return e&&e.nodeType!==11?e:null},parents:function(e){return bG.dir(e,"parentNode")},parentsUntil:function(bZ,e,b0){return bG.dir(bZ,"parentNode",b0)},next:function(e){return aY(e,"nextSibling")},prev:function(e){return aY(e,"previousSibling")},nextAll:function(e){return bG.dir(e,"nextSibling")},prevAll:function(e){return bG.dir(e,"previousSibling")},nextUntil:function(bZ,e,b0){return bG.dir(bZ,"nextSibling",b0)},prevUntil:function(bZ,e,b0){return bG.dir(bZ,"previousSibling",b0)},siblings:function(e){return bG.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return bG.sibling(e.firstChild)},contents:function(e){return bG.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:bG.merge([],e.childNodes)}},function(e,bZ){bG.fn[e]=function(b2,b0){var b1=bG.map(this,bZ,b2);if(!ag.test(e)){b0=b2}if(b0&&typeof b0==="string"){b1=bG.filter(b0,b1)}b1=this.length>1&&!bu[e]?bG.unique(b1):b1;if(this.length>1&&bq.test(e)){b1=b1.reverse()}return this.pushStack(b1,e,a4.call(arguments).join(","))}});bG.extend({filter:function(b0,e,bZ){if(bZ){b0=":not("+b0+")"}return e.length===1?bG.find.matchesSelector(e[0],b0)?[e[0]]:[]:bG.find.matches(b0,e)},dir:function(b0,bZ,b2){var e=[],b1=b0[bZ];while(b1&&b1.nodeType!==9&&(b2===aB||b1.nodeType!==1||!bG(b1).is(b2))){if(b1.nodeType===1){e.push(b1)}b1=b1[bZ]}return e},sibling:function(b0,bZ){var e=[];for(;b0;b0=b0.nextSibling){if(b0.nodeType===1&&b0!==bZ){e.push(b0)}}return e}});function aM(b1,b0,e){b0=b0||0;if(bG.isFunction(b0)){return bG.grep(b1,function(b3,b2){var b4=!!b0.call(b3,b2,b3);return b4===e})}else{if(b0.nodeType){return bG.grep(b1,function(b3,b2){return(b3===b0)===e})}else{if(typeof b0==="string"){var bZ=bG.grep(b1,function(b2){return b2.nodeType===1});if(al.test(b0)){return bG.filter(b0,bZ,!e)}else{b0=bG.filter(b0,bZ)}}}}return bG.grep(b1,function(b3,b2){return(bG.inArray(b3,b0)>=0)===e})}function A(e){var b0=c.split("|"),bZ=e.createDocumentFragment();if(bZ.createElement){while(b0.length){bZ.createElement(b0.pop())}}return bZ}var c="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",av=/ jQuery\d+="(?:null|\d+)"/g,bY=/^\s+/,ay=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,p=/<([\w:]+)/,bT=/<tbody/i,J=/<|&#?\w+;/,aj=/<(?:script|style|link)/i,ap=/<(?:script|object|embed|option|style)/i,K=new RegExp("<(?:"+c+")[\\s/>]","i"),aE=/^(?:checkbox|radio)$/,bR=/checked\s*(?:[^=]|=\s*.checked.)/i,bw=/\/(java|ecma)script/i,aH=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,T={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},aQ=A(o),l=aQ.appendChild(o.createElement("div"));T.optgroup=T.option;T.tbody=T.tfoot=T.colgroup=T.caption=T.thead;T.th=T.td;if(!bG.support.htmlSerialize){T._default=[1,"X<div>","</div>"]}bG.fn.extend({text:function(e){return bG.access(this,function(bZ){return bZ===aB?bG.text(this):this.empty().append((this[0]&&this[0].ownerDocument||o).createTextNode(bZ))},null,e,arguments.length)},wrapAll:function(e){if(bG.isFunction(e)){return this.each(function(b0){bG(this).wrapAll(e.call(this,b0))})}if(this[0]){var bZ=bG(e,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){bZ.insertBefore(this[0])}bZ.map(function(){var b0=this;while(b0.firstChild&&b0.firstChild.nodeType===1){b0=b0.firstChild}return b0}).append(this)}return this},wrapInner:function(e){if(bG.isFunction(e)){return this.each(function(bZ){bG(this).wrapInner(e.call(this,bZ))})}return this.each(function(){var bZ=bG(this),b0=bZ.contents();if(b0.length){b0.wrapAll(e)}else{bZ.append(e)}})},wrap:function(e){var bZ=bG.isFunction(e);return this.each(function(b0){bG(this).wrapAll(bZ?e.call(this,b0):e)})},unwrap:function(){return this.parent().each(function(){if(!bG.nodeName(this,"body")){bG(this).replaceWith(this.childNodes)}}).end()},append:function(){return this.domManip(arguments,true,function(e){if(this.nodeType===1||this.nodeType===11){this.appendChild(e)}})},prepend:function(){return this.domManip(arguments,true,function(e){if(this.nodeType===1||this.nodeType===11){this.insertBefore(e,this.firstChild)}})},before:function(){if(!aR(this[0])){return this.domManip(arguments,false,function(bZ){this.parentNode.insertBefore(bZ,this)})}if(arguments.length){var e=bG.clean(arguments);return this.pushStack(bG.merge(e,this),"before",this.selector)}},after:function(){if(!aR(this[0])){return this.domManip(arguments,false,function(bZ){this.parentNode.insertBefore(bZ,this.nextSibling)})}if(arguments.length){var e=bG.clean(arguments);return this.pushStack(bG.merge(this,e),"after",this.selector)}},remove:function(e,b1){var b0,bZ=0;for(;(b0=this[bZ])!=null;bZ++){if(!e||bG.filter(e,[b0]).length){if(!b1&&b0.nodeType===1){bG.cleanData(b0.getElementsByTagName("*"));bG.cleanData([b0])}if(b0.parentNode){b0.parentNode.removeChild(b0)}}}return this},empty:function(){var bZ,e=0;for(;(bZ=this[e])!=null;e++){if(bZ.nodeType===1){bG.cleanData(bZ.getElementsByTagName("*"))}while(bZ.firstChild){bZ.removeChild(bZ.firstChild)}}return this},clone:function(bZ,e){bZ=bZ==null?false:bZ;e=e==null?bZ:e;return this.map(function(){return bG.clone(this,bZ,e)})},html:function(e){return bG.access(this,function(b2){var b1=this[0]||{},b0=0,bZ=this.length;if(b2===aB){return b1.nodeType===1?b1.innerHTML.replace(av,""):aB}if(typeof b2==="string"&&!aj.test(b2)&&(bG.support.htmlSerialize||!K.test(b2))&&(bG.support.leadingWhitespace||!bY.test(b2))&&!T[(p.exec(b2)||["",""])[1].toLowerCase()]){b2=b2.replace(ay,"<$1></$2>");try{for(;b0<bZ;b0++){b1=this[b0]||{};if(b1.nodeType===1){bG.cleanData(b1.getElementsByTagName("*"));b1.innerHTML=b2}}b1=0}catch(b3){}}if(b1){this.empty().append(b2)}},null,e,arguments.length)},replaceWith:function(e){if(!aR(this[0])){if(bG.isFunction(e)){return this.each(function(b1){var b0=bG(this),bZ=b0.html();b0.replaceWith(e.call(this,b1,bZ))})}if(typeof e!=="string"){e=bG(e).detach()}return this.each(function(){var b0=this.nextSibling,bZ=this.parentNode;bG(this).remove();if(b0){bG(b0).before(e)}else{bG(bZ).append(e)}})}return this.length?this.pushStack(bG(bG.isFunction(e)?e():e),"replaceWith",e):this},detach:function(e){return this.remove(e,true)},domManip:function(b4,b8,b7){b4=[].concat.apply([],b4);var b0,b2,b3,b6,b1=0,b5=b4[0],bZ=[],e=this.length;if(!bG.support.checkClone&&e>1&&typeof b5==="string"&&bR.test(b5)){return this.each(function(){bG(this).domManip(b4,b8,b7)})}if(bG.isFunction(b5)){return this.each(function(ca){var b9=bG(this);b4[0]=b5.call(this,ca,b8?b9.html():aB);b9.domManip(b4,b8,b7)})}if(this[0]){b0=bG.buildFragment(b4,this,bZ);b3=b0.fragment;b2=b3.firstChild;if(b3.childNodes.length===1){b3=b2}if(b2){b8=b8&&bG.nodeName(b2,"tr");for(b6=b0.cacheable||e-1;b1<e;b1++){b7.call(b8&&bG.nodeName(this[b1],"table")?x(this[b1],"tbody"):this[b1],b1===b6?b3:bG.clone(b3,true,true))}}b3=b2=null;if(bZ.length){bG.each(bZ,function(b9,ca){if(ca.src){if(bG.ajax){bG.ajax({url:ca.src,type:"GET",dataType:"script",async:false,global:false,"throws":true})}else{bG.error("no ajax")}}else{bG.globalEval((ca.text||ca.textContent||ca.innerHTML||"").replace(aH,""))}if(ca.parentNode){ca.parentNode.removeChild(ca)}})}}return this}});function x(bZ,e){return bZ.getElementsByTagName(e)[0]||bZ.appendChild(bZ.ownerDocument.createElement(e))}function ao(b5,bZ){if(bZ.nodeType!==1||!bG.hasData(b5)){return}var b2,b1,e,b4=bG._data(b5),b3=bG._data(bZ,b4),b0=b4.events;if(b0){delete b3.handle;b3.events={};for(b2 in b0){for(b1=0,e=b0[b2].length;b1<e;b1++){bG.event.add(bZ,b2,b0[b2][b1])}}}if(b3.data){b3.data=bG.extend({},b3.data)}}function F(bZ,e){var b0;if(e.nodeType!==1){return}if(e.clearAttributes){e.clearAttributes()}if(e.mergeAttributes){e.mergeAttributes(bZ)}b0=e.nodeName.toLowerCase();if(b0==="object"){if(e.parentNode){e.outerHTML=bZ.outerHTML}if(bG.support.html5Clone&&(bZ.innerHTML&&!bG.trim(e.innerHTML))){e.innerHTML=bZ.innerHTML}}else{if(b0==="input"&&aE.test(bZ.type)){e.defaultChecked=e.checked=bZ.checked;if(e.value!==bZ.value){e.value=bZ.value}}else{if(b0==="option"){e.selected=bZ.defaultSelected}else{if(b0==="input"||b0==="textarea"){e.defaultValue=bZ.defaultValue}else{if(b0==="script"&&e.text!==bZ.text){e.text=bZ.text}}}}}e.removeAttribute(bG.expando)}bG.buildFragment=function(b1,b2,bZ){var b0,e,b3,b4=b1[0];b2=b2||o;b2=!b2.nodeType&&b2[0]||b2;b2=b2.ownerDocument||b2;if(b1.length===1&&typeof b4==="string"&&b4.length<512&&b2===o&&b4.charAt(0)==="<"&&!ap.test(b4)&&(bG.support.checkClone||!bR.test(b4))&&(bG.support.html5Clone||!K.test(b4))){e=true;b0=bG.fragments[b4];b3=b0!==aB}if(!b0){b0=b2.createDocumentFragment();bG.clean(b1,b2,b0,bZ);if(e){bG.fragments[b4]=b3&&b0}}return{fragment:b0,cacheable:e}};bG.fragments={};bG.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,bZ){bG.fn[e]=function(b0){var b2,b4=0,b3=[],b6=bG(b0),b1=b6.length,b5=this.length===1&&this[0].parentNode;if((b5==null||b5&&b5.nodeType===11&&b5.childNodes.length===1)&&b1===1){b6[bZ](this[0]);return this}else{for(;b4<b1;b4++){b2=(b4>0?this.clone(true):this).get();bG(b6[b4])[bZ](b2);b3=b3.concat(b2)}return this.pushStack(b3,e,b6.selector)}}});function m(e){if(typeof e.getElementsByTagName!=="undefined"){return e.getElementsByTagName("*")}else{if(typeof e.querySelectorAll!=="undefined"){return e.querySelectorAll("*")}else{return[]}}}function bS(e){if(aE.test(e.type)){e.defaultChecked=e.checked}}bG.extend({clone:function(b2,b4,b0){var e,bZ,b1,b3;if(bG.support.html5Clone||bG.isXMLDoc(b2)||!K.test("<"+b2.nodeName+">")){b3=b2.cloneNode(true)}else{l.innerHTML=b2.outerHTML;l.removeChild(b3=l.firstChild)}if((!bG.support.noCloneEvent||!bG.support.noCloneChecked)&&(b2.nodeType===1||b2.nodeType===11)&&!bG.isXMLDoc(b2)){F(b2,b3);e=m(b2);bZ=m(b3);for(b1=0;e[b1];++b1){if(bZ[b1]){F(e[b1],bZ[b1])}}}if(b4){ao(b2,b3);if(b0){e=m(b2);bZ=m(b3);for(b1=0;e[b1];++b1){ao(e[b1],bZ[b1])}}}e=bZ=null;return b3},clean:function(cb,b0,e,b1){var b8,b7,ca,cf,b4,ce,b5,b2,bZ,b9,cd,b6,b3=b0===o&&aQ,cc=[];if(!b0||typeof b0.createDocumentFragment==="undefined"){b0=o}for(b8=0;(ca=cb[b8])!=null;b8++){if(typeof ca==="number"){ca+=""}if(!ca){continue}if(typeof ca==="string"){if(!J.test(ca)){ca=b0.createTextNode(ca)}else{b3=b3||A(b0);b5=b0.createElement("div");b3.appendChild(b5);ca=ca.replace(ay,"<$1></$2>");cf=(p.exec(ca)||["",""])[1].toLowerCase();b4=T[cf]||T._default;ce=b4[0];b5.innerHTML=b4[1]+ca+b4[2];while(ce--){b5=b5.lastChild}if(!bG.support.tbody){b2=bT.test(ca);bZ=cf==="table"&&!b2?b5.firstChild&&b5.firstChild.childNodes:b4[1]==="<table>"&&!b2?b5.childNodes:[];for(b7=bZ.length-1;b7>=0;--b7){if(bG.nodeName(bZ[b7],"tbody")&&!bZ[b7].childNodes.length){bZ[b7].parentNode.removeChild(bZ[b7])}}}if(!bG.support.leadingWhitespace&&bY.test(ca)){b5.insertBefore(b0.createTextNode(bY.exec(ca)[0]),b5.firstChild)}ca=b5.childNodes;b5.parentNode.removeChild(b5)}}if(ca.nodeType){cc.push(ca)}else{bG.merge(cc,ca)}}if(b5){ca=b5=b3=null}if(!bG.support.appendChecked){for(b8=0;(ca=cc[b8])!=null;b8++){if(bG.nodeName(ca,"input")){bS(ca)}else{if(typeof ca.getElementsByTagName!=="undefined"){bG.grep(ca.getElementsByTagName("input"),bS)}}}}if(e){cd=function(cg){if(!cg.type||bw.test(cg.type)){return b1?b1.push(cg.parentNode?cg.parentNode.removeChild(cg):cg):e.appendChild(cg)}};for(b8=0;(ca=cc[b8])!=null;b8++){if(!(bG.nodeName(ca,"script")&&cd(ca))){e.appendChild(ca);if(typeof ca.getElementsByTagName!=="undefined"){b6=bG.grep(bG.merge([],ca.getElementsByTagName("script")),cd);cc.splice.apply(cc,[b8+1,0].concat(b6));b8+=b6.length}}}}return cc},cleanData:function(bZ,b7){var b2,b0,b1,b6,b3=0,b8=bG.expando,e=bG.cache,b4=bG.support.deleteExpando,b5=bG.event.special;for(;(b1=bZ[b3])!=null;b3++){if(b7||bG.acceptData(b1)){b0=b1[b8];b2=b0&&e[b0];if(b2){if(b2.events){for(b6 in b2.events){if(b5[b6]){bG.event.remove(b1,b6)}else{bG.removeEvent(b1,b6,b2.handle)}}}if(e[b0]){delete e[b0];if(b4){delete b1[b8]}else{if(b1.removeAttribute){b1.removeAttribute(b8)}else{b1[b8]=null}}bG.deletedIds.push(b0)}}}}}});(function(){var e,bZ;bG.uaMatch=function(b1){b1=b1.toLowerCase();var b0=/(chrome)[ \/]([\w.]+)/.exec(b1)||/(webkit)[ \/]([\w.]+)/.exec(b1)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(b1)||/(msie) ([\w.]+)/.exec(b1)||b1.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(b1)||[];return{browser:b0[1]||"",version:b0[2]||"0"}};e=bG.uaMatch(d.userAgent);bZ={};if(e.browser){bZ[e.browser]=true;bZ.version=e.version}if(bZ.chrome){bZ.webkit=true}else{if(bZ.webkit){bZ.safari=true}}bG.browser=bZ;bG.sub=function(){function b0(b3,b4){return new b0.fn.init(b3,b4)}bG.extend(true,b0,this);b0.superclass=this;b0.fn=b0.prototype=this();b0.fn.constructor=b0;b0.sub=this.sub;b0.fn.init=function b2(b3,b4){if(b4&&b4 instanceof bG&&!(b4 instanceof b0)){b4=b0(b4)}return bG.fn.init.call(this,b3,b4,b1)};b0.fn.init.prototype=b0.fn;var b1=b0(o);return b0}})();var E,az,aW,be=/alpha\([^)]*\)/i,aS=/opacity=([^)]*)/,bk=/^(top|right|bottom|left)$/,G=/^(none|table(?!-c[ea]).+)/,aZ=/^margin/,a8=new RegExp("^("+bx+")(.*)$","i"),W=new RegExp("^("+bx+")(?!px)[a-z%]+$","i"),S=new RegExp("^([-+])=("+bx+")","i"),bh={},a9={position:"absolute",visibility:"hidden",display:"block"},bA={letterSpacing:0,fontWeight:400},bQ=["Top","Right","Bottom","Left"],ar=["Webkit","O","Moz","ms"],aJ=bG.fn.toggle;function b(b1,bZ){if(bZ in b1){return bZ}var b2=bZ.charAt(0).toUpperCase()+bZ.slice(1),e=bZ,b0=ar.length;while(b0--){bZ=ar[b0]+b2;if(bZ in b1){return bZ}}return e}function Q(bZ,e){bZ=e||bZ;return bG.css(bZ,"display")==="none"||!bG.contains(bZ.ownerDocument,bZ)}function s(b3,e){var b2,b4,bZ=[],b0=0,b1=b3.length;for(;b0<b1;b0++){b2=b3[b0];if(!b2.style){continue}bZ[b0]=bG._data(b2,"olddisplay");if(e){if(!bZ[b0]&&b2.style.display==="none"){b2.style.display=""}if(b2.style.display===""&&Q(b2)){bZ[b0]=bG._data(b2,"olddisplay",bC(b2.nodeName))}}else{b4=E(b2,"display");if(!bZ[b0]&&b4!=="none"){bG._data(b2,"olddisplay",b4)}}}for(b0=0;b0<b1;b0++){b2=b3[b0];if(!b2.style){continue}if(!e||b2.style.display==="none"||b2.style.display===""){b2.style.display=e?bZ[b0]||"":"none"}}return b3}bG.fn.extend({css:function(e,bZ){return bG.access(this,function(b1,b0,b2){return b2!==aB?bG.style(b1,b0,b2):bG.css(b1,b0)},e,bZ,arguments.length>1)},show:function(){return s(this,true)},hide:function(){return s(this)},toggle:function(b0,bZ){var e=typeof b0==="boolean";if(bG.isFunction(b0)&&bG.isFunction(bZ)){return aJ.apply(this,arguments)}return this.each(function(){if(e?b0:Q(this)){bG(this).show()}else{bG(this).hide()}})}});bG.extend({cssHooks:{opacity:{get:function(b0,bZ){if(bZ){var e=E(b0,"opacity");return e===""?"1":e}}}},cssNumber:{fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":bG.support.cssFloat?"cssFloat":"styleFloat"},style:function(b1,b0,b7,b2){if(!b1||b1.nodeType===3||b1.nodeType===8||!b1.style){return}var b5,b6,b8,b3=bG.camelCase(b0),bZ=b1.style;b0=bG.cssProps[b3]||(bG.cssProps[b3]=b(bZ,b3));b8=bG.cssHooks[b0]||bG.cssHooks[b3];if(b7!==aB){b6=typeof b7;if(b6==="string"&&(b5=S.exec(b7))){b7=(b5[1]+1)*b5[2]+parseFloat(bG.css(b1,b0));b6="number"}if(b7==null||b6==="number"&&isNaN(b7)){return}if(b6==="number"&&!bG.cssNumber[b3]){b7+="px"}if(!b8||!("set" in b8)||(b7=b8.set(b1,b7,b2))!==aB){try{bZ[b0]=b7}catch(b4){}}}else{if(b8&&"get" in b8&&(b5=b8.get(b1,false,b2))!==aB){return b5}return bZ[b0]}},css:function(b4,b2,b3,bZ){var b5,b1,e,b0=bG.camelCase(b2);b2=bG.cssProps[b0]||(bG.cssProps[b0]=b(b4.style,b0));e=bG.cssHooks[b2]||bG.cssHooks[b0];if(e&&"get" in e){b5=e.get(b4,true,bZ)}if(b5===aB){b5=E(b4,b2)}if(b5==="normal"&&b2 in bA){b5=bA[b2]}if(b3||bZ!==aB){b1=parseFloat(b5);return b3||bG.isNumeric(b1)?b1||0:b5}return b5},swap:function(b2,b1,b3){var b0,bZ,e={};for(bZ in b1){e[bZ]=b2.style[bZ];b2.style[bZ]=b1[bZ]}b0=b3.call(b2);for(bZ in b1){b2.style[bZ]=e[bZ]}return b0}});if(a2.getComputedStyle){E=function(b5,bZ){var e,b2,b1,b4,b3=a2.getComputedStyle(b5,null),b0=b5.style;if(b3){e=b3[bZ];if(e===""&&!bG.contains(b5.ownerDocument,b5)){e=bG.style(b5,bZ)}if(W.test(e)&&aZ.test(bZ)){b2=b0.width;b1=b0.minWidth;b4=b0.maxWidth;b0.minWidth=b0.maxWidth=b0.width=e;e=b3.width;b0.width=b2;b0.minWidth=b1;b0.maxWidth=b4}}return e}}else{if(o.documentElement.currentStyle){E=function(b2,b0){var b3,e,bZ=b2.currentStyle&&b2.currentStyle[b0],b1=b2.style;if(bZ==null&&b1&&b1[b0]){bZ=b1[b0]}if(W.test(bZ)&&!bk.test(b0)){b3=b1.left;e=b2.runtimeStyle&&b2.runtimeStyle.left;if(e){b2.runtimeStyle.left=b2.currentStyle.left}b1.left=b0==="fontSize"?"1em":bZ;bZ=b1.pixelLeft+"px";b1.left=b3;if(e){b2.runtimeStyle.left=e}}return bZ===""?"auto":bZ}}}function aG(e,b0,b1){var bZ=a8.exec(b0);return bZ?Math.max(0,bZ[1]-(b1||0))+(bZ[2]||"px"):b0}function at(b1,bZ,e,b3){var b0=e===(b3?"border":"content")?4:bZ==="width"?1:0,b2=0;for(;b0<4;b0+=2){if(e==="margin"){b2+=bG.css(b1,e+bQ[b0],true)}if(b3){if(e==="content"){b2-=parseFloat(E(b1,"padding"+bQ[b0]))||0}if(e!=="margin"){b2-=parseFloat(E(b1,"border"+bQ[b0]+"Width"))||0}}else{b2+=parseFloat(E(b1,"padding"+bQ[b0]))||0;if(e!=="padding"){b2+=parseFloat(E(b1,"border"+bQ[b0]+"Width"))||0}}}return b2}function u(b1,bZ,e){var b2=bZ==="width"?b1.offsetWidth:b1.offsetHeight,b0=true,b3=bG.support.boxSizing&&bG.css(b1,"boxSizing")==="border-box";if(b2<=0||b2==null){b2=E(b1,bZ);if(b2<0||b2==null){b2=b1.style[bZ]}if(W.test(b2)){return b2}b0=b3&&(bG.support.boxSizingReliable||b2===b1.style[bZ]);b2=parseFloat(b2)||0}return(b2+at(b1,bZ,e||(b3?"border":"content"),b0))+"px"}function bC(b0){if(bh[b0]){return bh[b0]}var e=bG("<"+b0+">").appendTo(o.body),bZ=e.css("display");e.remove();if(bZ==="none"||bZ===""){az=o.body.appendChild(az||bG.extend(o.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!aW||!az.createElement){aW=(az.contentWindow||az.contentDocument).document;aW.write("<!doctype html><html><body>");aW.close()}e=aW.body.appendChild(aW.createElement(b0));bZ=E(e,"display");o.body.removeChild(az)}bh[b0]=bZ;return bZ}bG.each(["height","width"],function(bZ,e){bG.cssHooks[e]={get:function(b2,b1,b0){if(b1){if(b2.offsetWidth===0&&G.test(E(b2,"display"))){return bG.swap(b2,a9,function(){return u(b2,e,b0)})}else{return u(b2,e,b0)}}},set:function(b1,b2,b0){return aG(b1,b2,b0?at(b1,e,b0,bG.support.boxSizing&&bG.css(b1,"boxSizing")==="border-box"):0)}}});if(!bG.support.opacity){bG.cssHooks.opacity={get:function(bZ,e){return aS.test((e&&bZ.currentStyle?bZ.currentStyle.filter:bZ.style.filter)||"")?(0.01*parseFloat(RegExp.$1))+"":e?"1":""},set:function(b2,b3){var b1=b2.style,bZ=b2.currentStyle,e=bG.isNumeric(b3)?"alpha(opacity="+b3*100+")":"",b0=bZ&&bZ.filter||b1.filter||"";b1.zoom=1;if(b3>=1&&bG.trim(b0.replace(be,""))===""&&b1.removeAttribute){b1.removeAttribute("filter");if(bZ&&!bZ.filter){return}}b1.filter=be.test(b0)?b0.replace(be,e):b0+" "+e}}}bG(function(){if(!bG.support.reliableMarginRight){bG.cssHooks.marginRight={get:function(bZ,e){return bG.swap(bZ,{display:"inline-block"},function(){if(e){return E(bZ,"marginRight")}})}}}if(!bG.support.pixelPosition&&bG.fn.position){bG.each(["top","left"],function(e,bZ){bG.cssHooks[bZ]={get:function(b2,b1){if(b1){var b0=E(b2,bZ);return W.test(b0)?bG(b2).position()[bZ]+"px":b0}}}})}});if(bG.expr&&bG.expr.filters){bG.expr.filters.hidden=function(e){return(e.offsetWidth===0&&e.offsetHeight===0)||(!bG.support.reliableHiddenOffsets&&((e.style&&e.style.display)||E(e,"display"))==="none")};bG.expr.filters.visible=function(e){return !bG.expr.filters.hidden(e)}}bG.each({margin:"",padding:"",border:"Width"},function(e,bZ){bG.cssHooks[e+bZ]={expand:function(b2){var b1,b3=typeof b2==="string"?b2.split(" "):[b2],b0={};for(b1=0;b1<4;b1++){b0[e+bQ[b1]+bZ]=b3[b1]||b3[b1-2]||b3[0]}return b0}};if(!aZ.test(e)){bG.cssHooks[e+bZ].set=aG}});var bs=/%20/g,aP=/\[\]$/,U=/\r?\n/g,bz=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,aD=/^(?:select|textarea)/i;bG.fn.extend({serialize:function(){return bG.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?bG.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||aD.test(this.nodeName)||bz.test(this.type))}).map(function(e,bZ){var b0=bG(this).val();return b0==null?null:bG.isArray(b0)?bG.map(b0,function(b2,b1){return{name:bZ.name,value:b2.replace(U,"\r\n")}}):{name:bZ.name,value:b0.replace(U,"\r\n")}}).get()}});bG.param=function(e,b0){var b1,bZ=[],b2=function(b3,b4){b4=bG.isFunction(b4)?b4():(b4==null?"":b4);bZ[bZ.length]=encodeURIComponent(b3)+"="+encodeURIComponent(b4)};if(b0===aB){b0=bG.ajaxSettings&&bG.ajaxSettings.traditional}if(bG.isArray(e)||(e.jquery&&!bG.isPlainObject(e))){bG.each(e,function(){b2(this.name,this.value)})}else{for(b1 in e){k(b1,e[b1],b0,b2)}}return bZ.join("&").replace(bs,"+")};function k(b0,b2,bZ,b1){var e;if(bG.isArray(b2)){bG.each(b2,function(b4,b3){if(bZ||aP.test(b0)){b1(b0,b3)}else{k(b0+"["+(typeof b3==="object"?b4:"")+"]",b3,bZ,b1)}})}else{if(!bZ&&bG.type(b2)==="object"){for(e in b2){k(b0+"["+e+"]",b2[e],bZ,b1)}}else{b1(b0,b2)}}}var bX,Y,an=/#.*$/,ad=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,B=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,r=/^(?:GET|HEAD)$/,aC=/^\/\//,bN=/\?/,g=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,P=/([?&])_=[^&]*/,aT=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,bW=bG.fn.load,v={},a6={},aX=["*/"]+["*"];try{Y=aI.href}catch(bd){Y=o.createElement("a");Y.href="";Y=Y.href}bX=aT.exec(Y.toLowerCase())||[];function bI(e){return function(b2,b4){if(typeof b2!=="string"){b4=b2;b2="*"}var bZ,b5,b6,b1=b2.toLowerCase().split(aV),b0=0,b3=b1.length;if(bG.isFunction(b4)){for(;b0<b3;b0++){bZ=b1[b0];b6=/^\+/.test(bZ);if(b6){bZ=bZ.substr(1)||"*"}b5=e[bZ]=e[bZ]||[];b5[b6?"unshift":"push"](b4)}}}}function q(bZ,b8,b3,b6,b5,b1){b5=b5||b8.dataTypes[0];b1=b1||{};b1[b5]=true;var b7,b4=bZ[b5],b0=0,e=b4?b4.length:0,b2=(bZ===v);for(;b0<e&&(b2||!b7);b0++){b7=b4[b0](b8,b3,b6);if(typeof b7==="string"){if(!b2||b1[b7]){b7=aB}else{b8.dataTypes.unshift(b7);b7=q(bZ,b8,b3,b6,b7,b1)}}}if((b2||!b7)&&!b1["*"]){b7=q(bZ,b8,b3,b6,"*",b1)}return b7}function t(b0,b1){var bZ,e,b2=bG.ajaxSettings.flatOptions||{};for(bZ in b1){if(b1[bZ]!==aB){(b2[bZ]?b0:(e||(e={})))[bZ]=b1[bZ]}}if(e){bG.extend(true,b0,e)}}bG.fn.load=function(b1,b4,b5){if(typeof b1!=="string"&&bW){return bW.apply(this,arguments)}if(!this.length){return this}var e,b2,b0,bZ=this,b3=b1.indexOf(" ");if(b3>=0){e=b1.slice(b3,b1.length);b1=b1.slice(0,b3)}if(bG.isFunction(b4)){b5=b4;b4=aB}else{if(b4&&typeof b4==="object"){b2="POST"}}bG.ajax({url:b1,type:b2,dataType:"html",data:b4,complete:function(b7,b6){if(b5){bZ.each(b5,b0||[b7.responseText,b6,b7])}}}).done(function(b6){b0=arguments;bZ.html(e?bG("<div>").append(b6.replace(g,"")).find(e):b6)});return this};bG.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,bZ){bG.fn[bZ]=function(b0){return this.on(bZ,b0)}});bG.each(["get","post"],function(e,bZ){bG[bZ]=function(b0,b2,b3,b1){if(bG.isFunction(b2)){b1=b1||b3;b3=b2;b2=aB}return bG.ajax({type:bZ,url:b0,data:b2,success:b3,dataType:b1})}});bG.extend({getScript:function(e,bZ){return bG.get(e,aB,bZ,"script")},getJSON:function(e,bZ,b0){return bG.get(e,bZ,b0,"json")},ajaxSetup:function(bZ,e){if(e){t(bZ,bG.ajaxSettings)}else{e=bZ;bZ=bG.ajaxSettings}t(bZ,e);return bZ},ajaxSettings:{url:Y,isLocal:B.test(bX[1]),global:true,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":aX},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a2.String,"text html":true,"text json":bG.parseJSON,"text xml":bG.parseXML},flatOptions:{context:true,url:true}},ajaxPrefilter:bI(v),ajaxTransport:bI(a6),ajax:function(b4,b1){if(typeof b4==="object"){b1=b4;b4=aB}b1=b1||{};var b7,cl,b2,cg,b9,cd,b0,cf,b8=bG.ajaxSetup({},b1),cn=b8.context||b8,cb=cn!==b8&&(cn.nodeType||cn instanceof bG)?bG(cn):bG.event,cm=bG.Deferred(),ci=bG.Callbacks("once memory"),b5=b8.statusCode||{},cc={},cj={},b3=0,b6="canceled",ce={readyState:0,setRequestHeader:function(co,cp){if(!b3){var e=co.toLowerCase();co=cj[e]=cj[e]||co;cc[co]=cp}return this},getAllResponseHeaders:function(){return b3===2?cl:null},getResponseHeader:function(co){var e;if(b3===2){if(!b2){b2={};while((e=ad.exec(cl))){b2[e[1].toLowerCase()]=e[2]}}e=b2[co.toLowerCase()]}return e===aB?null:e},overrideMimeType:function(e){if(!b3){b8.mimeType=e}return this},abort:function(e){e=e||b6;if(cg){cg.abort(e)}ca(0,e);return this}};function ca(cs,co,ct,cq){var e,cw,cu,cr,cv,cp=co;if(b3===2){return}b3=2;if(b9){clearTimeout(b9)}cg=aB;cl=cq||"";ce.readyState=cs>0?4:0;if(ct){cr=h(b8,ce,ct)}if(cs>=200&&cs<300||cs===304){if(b8.ifModified){cv=ce.getResponseHeader("Last-Modified");if(cv){bG.lastModified[b7]=cv}cv=ce.getResponseHeader("Etag");if(cv){bG.etag[b7]=cv}}if(cs===304){cp="notmodified";e=true}else{e=ae(b8,cr);cp=e.state;cw=e.data;cu=e.error;e=!cu}}else{cu=cp;if(!cp||cs){cp="error";if(cs<0){cs=0}}}ce.status=cs;ce.statusText=(co||cp)+"";if(e){cm.resolveWith(cn,[cw,cp,ce])}else{cm.rejectWith(cn,[ce,cp,cu])}ce.statusCode(b5);b5=aB;if(b0){cb.trigger("ajax"+(e?"Success":"Error"),[ce,b8,e?cw:cu])}ci.fireWith(cn,[ce,cp]);if(b0){cb.trigger("ajaxComplete",[ce,b8]);if(!(--bG.active)){bG.event.trigger("ajaxStop")}}}cm.promise(ce);ce.success=ce.done;ce.error=ce.fail;ce.complete=ci.add;ce.statusCode=function(co){if(co){var e;if(b3<2){for(e in co){b5[e]=[b5[e],co[e]]}}else{e=co[ce.status];ce.always(e)}}return this};b8.url=((b4||b8.url)+"").replace(an,"").replace(aC,bX[1]+"//");b8.dataTypes=bG.trim(b8.dataType||"*").toLowerCase().split(aV);if(b8.crossDomain==null){cd=aT.exec(b8.url.toLowerCase())||false;b8.crossDomain=cd&&(cd.join(":")+(cd[3]?"":cd[1]==="http:"?80:443))!==(bX.join(":")+(bX[3]?"":bX[1]==="http:"?80:443))}if(b8.data&&b8.processData&&typeof b8.data!=="string"){b8.data=bG.param(b8.data,b8.traditional)}q(v,b8,b1,ce);if(b3===2){return ce}b0=b8.global;b8.type=b8.type.toUpperCase();b8.hasContent=!r.test(b8.type);if(b0&&bG.active++===0){bG.event.trigger("ajaxStart")}if(!b8.hasContent){if(b8.data){b8.url+=(bN.test(b8.url)?"&":"?")+b8.data;delete b8.data}b7=b8.url;if(b8.cache===false){var bZ=bG.now(),ck=b8.url.replace(P,"$1_="+bZ);b8.url=ck+((ck===b8.url)?(bN.test(b8.url)?"&":"?")+"_="+bZ:"")}}if(b8.data&&b8.hasContent&&b8.contentType!==false||b1.contentType){ce.setRequestHeader("Content-Type",b8.contentType)}if(b8.ifModified){b7=b7||b8.url;if(bG.lastModified[b7]){ce.setRequestHeader("If-Modified-Since",bG.lastModified[b7])}if(bG.etag[b7]){ce.setRequestHeader("If-None-Match",bG.etag[b7])}}ce.setRequestHeader("Accept",b8.dataTypes[0]&&b8.accepts[b8.dataTypes[0]]?b8.accepts[b8.dataTypes[0]]+(b8.dataTypes[0]!=="*"?", "+aX+"; q=0.01":""):b8.accepts["*"]);for(cf in b8.headers){ce.setRequestHeader(cf,b8.headers[cf])}if(b8.beforeSend&&(b8.beforeSend.call(cn,ce,b8)===false||b3===2)){return ce.abort()}b6="abort";for(cf in {success:1,error:1,complete:1}){ce[cf](b8[cf])}cg=q(a6,b8,b1,ce);if(!cg){ca(-1,"No Transport")}else{ce.readyState=1;if(b0){cb.trigger("ajaxSend",[ce,b8])}if(b8.async&&b8.timeout>0){b9=setTimeout(function(){ce.abort("timeout")},b8.timeout)}try{b3=1;cg.send(cc,ca)}catch(ch){if(b3<2){ca(-1,ch)}else{throw ch}}}return ce},active:0,lastModified:{},etag:{}});function h(b7,b6,b3){var b2,b4,b1,e,bZ=b7.contents,b5=b7.dataTypes,b0=b7.responseFields;for(b4 in b0){if(b4 in b3){b6[b0[b4]]=b3[b4]}}while(b5[0]==="*"){b5.shift();if(b2===aB){b2=b7.mimeType||b6.getResponseHeader("content-type")}}if(b2){for(b4 in bZ){if(bZ[b4]&&bZ[b4].test(b2)){b5.unshift(b4);break}}}if(b5[0] in b3){b1=b5[0]}else{for(b4 in b3){if(!b5[0]||b7.converters[b4+" "+b5[0]]){b1=b4;break}if(!e){e=b4}}b1=b1||e}if(b1){if(b1!==b5[0]){b5.unshift(b1)}return b3[b1]}}function ae(b9,b1){var b7,bZ,b5,b3,b6=b9.dataTypes.slice(),b0=b6[0],b8={},b2=0;if(b9.dataFilter){b1=b9.dataFilter(b1,b9.dataType)}if(b6[1]){for(b7 in b9.converters){b8[b7.toLowerCase()]=b9.converters[b7]}}for(;(b5=b6[++b2]);){if(b5!=="*"){if(b0!=="*"&&b0!==b5){b7=b8[b0+" "+b5]||b8["* "+b5];if(!b7){for(bZ in b8){b3=bZ.split(" ");if(b3[1]===b5){b7=b8[b0+" "+b3[0]]||b8["* "+b3[0]];if(b7){if(b7===true){b7=b8[bZ]}else{if(b8[bZ]!==true){b5=b3[0];b6.splice(b2--,0,b5)}}break}}}}if(b7!==true){if(b7&&b9["throws"]){b1=b7(b1)}else{try{b1=b7(b1)}catch(b4){return{state:"parsererror",error:b7?b4:"No conversion from "+b0+" to "+b5}}}}}b0=b5}}return{state:"success",data:b1}}var bp=[],aw=/\?/,a5=/(=)\?(?=&|$)|\?\?/,bl=bG.now();bG.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=bp.pop()||(bG.expando+"_"+(bl++));this[e]=true;return e}});bG.ajaxPrefilter("json jsonp",function(b8,b3,b7){var b6,e,b5,b1=b8.data,bZ=b8.url,b0=b8.jsonp!==false,b4=b0&&a5.test(bZ),b2=b0&&!b4&&typeof b1==="string"&&!(b8.contentType||"").indexOf("application/x-www-form-urlencoded")&&a5.test(b1);if(b8.dataTypes[0]==="jsonp"||b4||b2){b6=b8.jsonpCallback=bG.isFunction(b8.jsonpCallback)?b8.jsonpCallback():b8.jsonpCallback;e=a2[b6];if(b4){b8.url=bZ.replace(a5,"$1"+b6)}else{if(b2){b8.data=b1.replace(a5,"$1"+b6)}else{if(b0){b8.url+=(aw.test(bZ)?"&":"?")+b8.jsonp+"="+b6}}}b8.converters["script json"]=function(){if(!b5){bG.error(b6+" was not called")}return b5[0]};b8.dataTypes[0]="json";a2[b6]=function(){b5=arguments};b7.always(function(){a2[b6]=e;if(b8[b6]){b8.jsonpCallback=b3.jsonpCallback;bp.push(b6)}if(b5&&bG.isFunction(e)){e(b5[0])}b5=e=aB});return"script"}});bG.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){bG.globalEval(e);return e}}});bG.ajaxPrefilter("script",function(e){if(e.cache===aB){e.cache=false}if(e.crossDomain){e.type="GET";e.global=false}});bG.ajaxTransport("script",function(b0){if(b0.crossDomain){var e,bZ=o.head||o.getElementsByTagName("head")[0]||o.documentElement;return{send:function(b1,b2){e=o.createElement("script");e.async="async";if(b0.scriptCharset){e.charset=b0.scriptCharset}e.src=b0.url;e.onload=e.onreadystatechange=function(b4,b3){if(b3||!e.readyState||/loaded|complete/.test(e.readyState)){e.onload=e.onreadystatechange=null;if(bZ&&e.parentNode){bZ.removeChild(e)}e=aB;if(!b3){b2(200,"success")}}};bZ.insertBefore(e,bZ.firstChild)},abort:function(){if(e){e.onload(0,1)}}}}});var ah,aN=a2.ActiveXObject?function(){for(var e in ah){ah[e](0,1)}}:false,au=0;function bB(){try{return new a2.XMLHttpRequest()}catch(bZ){}}function bb(){try{return new a2.ActiveXObject("Microsoft.XMLHTTP")}catch(bZ){}}bG.ajaxSettings.xhr=a2.ActiveXObject?function(){return !this.isLocal&&bB()||bb()}:bB;(function(e){bG.extend(bG.support,{ajax:!!e,cors:!!e&&("withCredentials" in e)})})(bG.ajaxSettings.xhr());if(bG.support.ajax){bG.ajaxTransport(function(e){if(!e.crossDomain||bG.support.cors){var bZ;return{send:function(b5,b0){var b3,b2,b4=e.xhr();if(e.username){b4.open(e.type,e.url,e.async,e.username,e.password)}else{b4.open(e.type,e.url,e.async)}if(e.xhrFields){for(b2 in e.xhrFields){b4[b2]=e.xhrFields[b2]}}if(e.mimeType&&b4.overrideMimeType){b4.overrideMimeType(e.mimeType)}if(!e.crossDomain&&!b5["X-Requested-With"]){b5["X-Requested-With"]="XMLHttpRequest"}try{for(b2 in b5){b4.setRequestHeader(b2,b5[b2])}}catch(b1){}b4.send((e.hasContent&&e.data)||null);bZ=function(ce,b8){var b9,b7,b6,cc,cb;try{if(bZ&&(b8||b4.readyState===4)){bZ=aB;if(b3){b4.onreadystatechange=bG.noop;if(aN){delete ah[b3]}}if(b8){if(b4.readyState!==4){b4.abort()}}else{b9=b4.status;b6=b4.getAllResponseHeaders();cc={};cb=b4.responseXML;if(cb&&cb.documentElement){cc.xml=cb}try{cc.text=b4.responseText}catch(ce){}try{b7=b4.statusText}catch(cd){b7=""}if(!b9&&e.isLocal&&!e.crossDomain){b9=cc.text?200:404}else{if(b9===1223){b9=204}}}}}catch(ca){if(!b8){b0(-1,ca)}}if(cc){b0(b9,b7,cc,b6)}};if(!e.async){bZ()}else{if(b4.readyState===4){setTimeout(bZ,0)}else{b3=++au;if(aN){if(!ah){ah={};bG(a2).unload(aN)}ah[b3]=bZ}b4.onreadystatechange=bZ}}},abort:function(){if(bZ){bZ(0,1)}}}}})}var L,ab,bO=/^(?:toggle|show|hide)$/,bH=new RegExp("^(?:([-+])=|)("+bx+")([a-z%]*)$","i"),bM=/queueHooks$/,ax=[i],a1={"*":[function(e,b5){var b1,b6,b7=this.createTween(e,b5),b2=bH.exec(b5),b3=b7.cur(),bZ=+b3||0,b0=1,b4=20;if(b2){b1=+b2[2];b6=b2[3]||(bG.cssNumber[e]?"":"px");if(b6!=="px"&&bZ){bZ=bG.css(b7.elem,e,true)||b1||1;do{b0=b0||".5";bZ=bZ/b0;bG.style(b7.elem,e,bZ+b6)}while(b0!==(b0=b7.cur()/b3)&&b0!==1&&--b4)}b7.unit=b6;b7.start=bZ;b7.end=b2[1]?bZ+(b2[1]+1)*b1:b1}return b7}]};function bj(){setTimeout(function(){L=aB},0);return(L=bG.now())}function bc(bZ,e){bG.each(e,function(b4,b2){var b3=(a1[b4]||[]).concat(a1["*"]),b0=0,b1=b3.length;for(;b0<b1;b0++){if(b3[b0].call(bZ,b4,b2)){return}}})}function f(b0,b4,b7){var b8,b3=0,e=0,bZ=ax.length,b6=bG.Deferred().always(function(){delete b2.elem}),b2=function(){var cd=L||bj(),ca=Math.max(0,b1.startTime+b1.duration-cd),cc=1-(ca/b1.duration||0),b9=0,cb=b1.tweens.length;for(;b9<cb;b9++){b1.tweens[b9].run(cc)}b6.notifyWith(b0,[b1,cc,ca]);if(cc<1&&cb){return ca}else{b6.resolveWith(b0,[b1]);return false}},b1=b6.promise({elem:b0,props:bG.extend({},b4),opts:bG.extend(true,{specialEasing:{}},b7),originalProperties:b4,originalOptions:b7,startTime:L||bj(),duration:b7.duration,tweens:[],createTween:function(cc,b9,cb){var ca=bG.Tween(b0,b1.opts,cc,b9,b1.opts.specialEasing[cc]||b1.opts.easing);b1.tweens.push(ca);return ca},stop:function(ca){var b9=0,cb=ca?b1.tweens.length:0;for(;b9<cb;b9++){b1.tweens[b9].run(1)}if(ca){b6.resolveWith(b0,[b1,ca])}else{b6.rejectWith(b0,[b1,ca])}return this}}),b5=b1.props;ak(b5,b1.opts.specialEasing);for(;b3<bZ;b3++){b8=ax[b3].call(b1,b0,b5,b1.opts);if(b8){return b8}}bc(b1,b5);if(bG.isFunction(b1.opts.start)){b1.opts.start.call(b0,b1)}bG.fx.timer(bG.extend(b2,{anim:b1,queue:b1.opts.queue,elem:b0}));return b1.progress(b1.opts.progress).done(b1.opts.done,b1.opts.complete).fail(b1.opts.fail).always(b1.opts.always)}function ak(b1,b3){var b0,bZ,b4,b2,e;for(b0 in b1){bZ=bG.camelCase(b0);b4=b3[bZ];b2=b1[b0];if(bG.isArray(b2)){b4=b2[1];b2=b1[b0]=b2[0]}if(b0!==bZ){b1[bZ]=b2;delete b1[b0]}e=bG.cssHooks[bZ];if(e&&"expand" in e){b2=e.expand(b2);delete b1[bZ];for(b0 in b2){if(!(b0 in b1)){b1[b0]=b2[b0];b3[b0]=b4}}}else{b3[bZ]=b4}}}bG.Animation=bG.extend(f,{tweener:function(bZ,b2){if(bG.isFunction(bZ)){b2=bZ;bZ=["*"]}else{bZ=bZ.split(" ")}var b1,e=0,b0=bZ.length;for(;e<b0;e++){b1=bZ[e];a1[b1]=a1[b1]||[];a1[b1].unshift(b2)}},prefilter:function(bZ,e){if(e){ax.unshift(bZ)}else{ax.push(bZ)}}});function i(b2,b7,e){var b6,b0,b9,b1,cd,cc,cb,ca,b3=this,bZ=b2.style,b8={},b5=[],b4=b2.nodeType&&Q(b2);if(!e.queue){cb=bG._queueHooks(b2,"fx");if(cb.unqueued==null){cb.unqueued=0;ca=cb.empty.fire;cb.empty.fire=function(){if(!cb.unqueued){ca()}}}cb.unqueued++;b3.always(function(){b3.always(function(){cb.unqueued--;if(!bG.queue(b2,"fx").length){cb.empty.fire()}})})}if(b2.nodeType===1&&("height" in b7||"width" in b7)){e.overflow=[bZ.overflow,bZ.overflowX,bZ.overflowY];if(bG.css(b2,"display")==="inline"&&bG.css(b2,"float")==="none"){if(!bG.support.inlineBlockNeedsLayout||bC(b2.nodeName)==="inline"){bZ.display="inline-block"}else{bZ.zoom=1}}}if(e.overflow){bZ.overflow="hidden";if(!bG.support.shrinkWrapBlocks){b3.done(function(){bZ.overflow=e.overflow[0];bZ.overflowX=e.overflow[1];bZ.overflowY=e.overflow[2]})}}for(b6 in b7){b9=b7[b6];if(bO.exec(b9)){delete b7[b6];if(b9===(b4?"hide":"show")){continue}b5.push(b6)}}b1=b5.length;if(b1){cd=bG._data(b2,"fxshow")||bG._data(b2,"fxshow",{});if(b4){bG(b2).show()}else{b3.done(function(){bG(b2).hide()})}b3.done(function(){var ce;bG.removeData(b2,"fxshow",true);for(ce in b8){bG.style(b2,ce,b8[ce])}});for(b6=0;b6<b1;b6++){b0=b5[b6];cc=b3.createTween(b0,b4?cd[b0]:0);b8[b0]=cd[b0]||bG.style(b2,b0);if(!(b0 in cd)){cd[b0]=cc.start;if(b4){cc.end=cc.start;cc.start=b0==="width"||b0==="height"?1:0}}}}}function H(b0,bZ,b2,e,b1){return new H.prototype.init(b0,bZ,b2,e,b1)}bG.Tween=H;H.prototype={constructor:H,init:function(b1,bZ,b3,e,b2,b0){this.elem=b1;this.prop=b3;this.easing=b2||"swing";this.options=bZ;this.start=this.now=this.cur();this.end=e;this.unit=b0||(bG.cssNumber[b3]?"":"px")},cur:function(){var e=H.propHooks[this.prop];return e&&e.get?e.get(this):H.propHooks._default.get(this)},run:function(b0){var bZ,e=H.propHooks[this.prop];if(this.options.duration){this.pos=bZ=bG.easing[this.easing](b0,this.options.duration*b0,0,1,this.options.duration)}else{this.pos=bZ=b0}this.now=(this.end-this.start)*bZ+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(e&&e.set){e.set(this)}else{H.propHooks._default.set(this)}return this}};H.prototype.init.prototype=H.prototype;H.propHooks={_default:{get:function(bZ){var e;if(bZ.elem[bZ.prop]!=null&&(!bZ.elem.style||bZ.elem.style[bZ.prop]==null)){return bZ.elem[bZ.prop]}e=bG.css(bZ.elem,bZ.prop,false,"");return !e||e==="auto"?0:e},set:function(e){if(bG.fx.step[e.prop]){bG.fx.step[e.prop](e)}else{if(e.elem.style&&(e.elem.style[bG.cssProps[e.prop]]!=null||bG.cssHooks[e.prop])){bG.style(e.elem,e.prop,e.now+e.unit)}else{e.elem[e.prop]=e.now}}}}};H.propHooks.scrollTop=H.propHooks.scrollLeft={set:function(e){if(e.elem.nodeType&&e.elem.parentNode){e.elem[e.prop]=e.now}}};bG.each(["toggle","show","hide"],function(bZ,e){var b0=bG.fn[e];bG.fn[e]=function(b1,b3,b2){return b1==null||typeof b1==="boolean"||(!bZ&&bG.isFunction(b1)&&bG.isFunction(b3))?b0.apply(this,arguments):this.animate(bF(e,true),b1,b3,b2)}});bG.fn.extend({fadeTo:function(e,b1,b0,bZ){return this.filter(Q).css("opacity",0).show().end().animate({opacity:b1},e,b0,bZ)},animate:function(b4,b1,b3,b2){var b0=bG.isEmptyObject(b4),e=bG.speed(b1,b3,b2),bZ=function(){var b5=f(this,bG.extend({},b4),e);if(b0){b5.stop(true)}};return b0||e.queue===false?this.each(bZ):this.queue(e.queue,bZ)},stop:function(b0,bZ,e){var b1=function(b2){var b3=b2.stop;delete b2.stop;b3(e)};if(typeof b0!=="string"){e=bZ;bZ=b0;b0=aB}if(bZ&&b0!==false){this.queue(b0||"fx",[])}return this.each(function(){var b5=true,b2=b0!=null&&b0+"queueHooks",b4=bG.timers,b3=bG._data(this);if(b2){if(b3[b2]&&b3[b2].stop){b1(b3[b2])}}else{for(b2 in b3){if(b3[b2]&&b3[b2].stop&&bM.test(b2)){b1(b3[b2])}}}for(b2=b4.length;b2--;){if(b4[b2].elem===this&&(b0==null||b4[b2].queue===b0)){b4[b2].anim.stop(e);b5=false;b4.splice(b2,1)}}if(b5||!e){bG.dequeue(this,b0)}})}});function bF(b0,b2){var b1,e={height:b0},bZ=0;b2=b2?1:0;for(;bZ<4;bZ+=2-b2){b1=bQ[bZ];e["margin"+b1]=e["padding"+b1]=b0}if(b2){e.opacity=e.width=b0}return e}bG.each({slideDown:bF("show"),slideUp:bF("hide"),slideToggle:bF("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,bZ){bG.fn[e]=function(b0,b2,b1){return this.animate(bZ,b0,b2,b1)}});bG.speed=function(b0,b1,bZ){var e=b0&&typeof b0==="object"?bG.extend({},b0):{complete:bZ||!bZ&&b1||bG.isFunction(b0)&&b0,duration:b0,easing:bZ&&b1||b1&&!bG.isFunction(b1)&&b1};e.duration=bG.fx.off?0:typeof e.duration==="number"?e.duration:e.duration in bG.fx.speeds?bG.fx.speeds[e.duration]:bG.fx.speeds._default;if(e.queue==null||e.queue===true){e.queue="fx"}e.old=e.complete;e.complete=function(){if(bG.isFunction(e.old)){e.old.call(this)}if(e.queue){bG.dequeue(this,e.queue)}};return e};bG.easing={linear:function(e){return e},swing:function(e){return 0.5-Math.cos(e*Math.PI)/2}};bG.timers=[];bG.fx=H.prototype.init;bG.fx.tick=function(){var b0,bZ=bG.timers,e=0;for(;e<bZ.length;e++){b0=bZ[e];if(!b0()&&bZ[e]===b0){bZ.splice(e--,1)}}if(!bZ.length){bG.fx.stop()}};bG.fx.timer=function(e){if(e()&&bG.timers.push(e)&&!ab){ab=setInterval(bG.fx.tick,bG.fx.interval)}};bG.fx.interval=13;bG.fx.stop=function(){clearInterval(ab);ab=null};bG.fx.speeds={slow:600,fast:200,_default:400};bG.fx.step={};if(bG.expr&&bG.expr.filters){bG.expr.filters.animated=function(e){return bG.grep(bG.timers,function(bZ){return e===bZ.elem}).length}}var bm=/^(?:body|html)$/i;bG.fn.offset=function(b9){if(arguments.length){return b9===aB?this:this.each(function(ca){bG.offset.setOffset(this,b9,ca)})}var bZ,b4,b5,b2,b6,e,b1,b3={top:0,left:0},b0=this[0],b7=b0&&b0.ownerDocument;if(!b7){return}if((b4=b7.body)===b0){return bG.offset.bodyOffset(b0)}bZ=b7.documentElement;if(!bG.contains(bZ,b0)){return b3}if(typeof b0.getBoundingClientRect!=="undefined"){b3=b0.getBoundingClientRect()}b5=bn(b7);b2=bZ.clientTop||b4.clientTop||0;b6=bZ.clientLeft||b4.clientLeft||0;e=b5.pageYOffset||bZ.scrollTop;b1=b5.pageXOffset||bZ.scrollLeft;var b8=a2.document.compatMode;if(b8=="BackCompat"&&!!a2.ActiveXObject){return{top:b3.top+Math.max(a2.document.documentElement.scrollTop,a2.document.body.scrollTop)-b2,left:b3.left+Math.max(a2.document.documentElement.scrollLeft,a2.document.body.scrollLeft)-b6}}return{top:b3.top+e-b2,left:b3.left+b1-b6}};bG.offset={bodyOffset:function(e){var b0=e.offsetTop,bZ=e.offsetLeft;if(bG.support.doesNotIncludeMarginInBodyOffset){b0+=parseFloat(bG.css(e,"marginTop"))||0;bZ+=parseFloat(bG.css(e,"marginLeft"))||0}return{top:b0,left:bZ}},setOffset:function(b1,ca,b4){var b5=bG.css(b1,"position");if(b5==="static"){b1.style.position="relative"}var b3=bG(b1),bZ=b3.offset(),e=bG.css(b1,"top"),b8=bG.css(b1,"left"),b9=(b5==="absolute"||b5==="fixed")&&bG.inArray("auto",[e,b8])>-1,b7={},b6={},b0,b2;if(b9){b6=b3.position();b0=b6.top;b2=b6.left}else{b0=parseFloat(e)||0;b2=parseFloat(b8)||0}if(bG.isFunction(ca)){ca=ca.call(b1,b4,bZ)}if(ca.top!=null){b7.top=(ca.top-bZ.top)+b0}if(ca.left!=null){b7.left=(ca.left-bZ.left)+b2}if("using" in ca){ca.using.call(b1,b7)}else{b3.css(b7)}}};bG.fn.extend({position:function(){if(!this[0]){return}var b0=this[0],bZ=this.offsetParent(),b1=this.offset(),e=bm.test(bZ[0].nodeName)?{top:0,left:0}:bZ.offset();b1.top-=parseFloat(bG.css(b0,"marginTop"))||0;b1.left-=parseFloat(bG.css(b0,"marginLeft"))||0;e.top+=parseFloat(bG.css(bZ[0],"borderTopWidth"))||0;e.left+=parseFloat(bG.css(bZ[0],"borderLeftWidth"))||0;return{top:b1.top-e.top,left:b1.left-e.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||o.body;while(e&&(!bm.test(e.nodeName)&&bG.css(e,"position")==="static")){e=e.offsetParent}return e||o.body})}});bG.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b0,bZ){var e=/Y/.test(bZ);bG.fn[b0]=function(b1){return bG.access(this,function(b3,b6,b5){var b4=bn(b3);if(b5===aB){var b2=a2.document.compatMode;if(b2=="BackCompat"&&!!a2.ActiveXObject){return b4?(bZ in b4)?b4[bZ]:Math.max(a2.document.documentElement[b6],a2.document.body[b6]):b3[b6]}return b4?(bZ in b4)?b4[bZ]:b4.document.documentElement[b6]:b3[b6]}if(b4){b4.scrollTo(!e?b5:bG(b4).scrollLeft(),e?b5:bG(b4).scrollTop())}else{b3[b6]=b5}},b0,b1,arguments.length,null)}});function bn(e){return bG.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:false}bG.each({Height:"height",Width:"width"},function(e,bZ){bG.each({padding:"inner"+e,content:bZ,"":"outer"+e},function(b0,b1){bG.fn[b1]=function(b5,b4){var b3=arguments.length&&(b0||typeof b5!=="boolean"),b2=b0||(b5===true||b4===true?"margin":"border");return bG.access(this,function(b8,b7,b9){var ca;if(bG.isWindow(b8)){var b6=a2.document.compatMode;if(b6=="BackCompat"){return b8.document.body["client"+e]}return b8.document.documentElement["client"+e]}if(b8.nodeType===9){ca=b8.documentElement;return Math.max(b8.body["scroll"+e],ca["scroll"+e],b8.body["offset"+e],ca["offset"+e],ca["client"+e])}return b9===aB?bG.css(b8,b7,b9,b2):bG.style(b8,b7,b9,b2)},bZ,b3?b5:aB,b3,null)}})});a2.comtop.cQuery=bG;if(typeof define==="function"&&define.amd&&define.amd.jQuery){define("jquery",[],function(){return bG})}})(window);(function(c,d){var a=c("head");a.attr("style","font-family:isIE\\0; border:none; *font-family:isIE7; _font-family:isIE6;-moz-border-radius-topleft:0");d.Browser={isIE:false,isIE6:false,isIE7:false,isIE8:false,isIE9:false,notIE:true,isQM:document.compatMode!=="CSS1Compat"};var b=a.css("font-family");if(/^isIE\d?$/.test(b)){d.Browser[b]=true;d.Browser.notIE=false;if(b==="isIE6"||b==="isIE7"){d.Browser.isIE=true}else{if(a.css("border")===undefined){d.Browser.isIE8=true}else{d.Browser.isIE9=true}}}a.removeAttr("style")})(window.comtop.cQuery,window.comtop);if(comtop.Browser.isIE6){document.execCommand("BackgroundImageCache",false,true)}(function(b){var a=b.cQuery;a.page={height:function(){if(b.Browser.isIE6||b.Browser.isIE7||b.Browser.isIE8){var d=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);var e=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);if(d<e){return a(window).height()}else{if(b.Browser.isQM){return d-4}return d}}else{if(b.Browser.isQM){return a(document).height()-4}return a(document).height()}},width:function(){var e=a("<div></div>");e.css({height:1});var d=parseInt(a("body").css("paddingLeft"))+parseInt(a("body").css("paddingRight"))+parseInt(a("body").css("marginLeft"))+parseInt(a("body").css("marginRight"));a("body").append(e);var c=e.width();e.remove();return c+d},scrollTop:function(){return a("html").scrollTop()||a("body").scrollTop()},scrollLeft:function(){return a("html").scrollLeft()||a("body").scrollLeft()}};a.client={width:function(){if(b.Browser.isQM){return document.documentElement.clientWidth||document.documentElement.offsetWidth-21}return a(window).width()},height:function(){if(b.Browser.isQM){return window.innerHeight||document.documentElement.offsetHeight-4}return a(window).height()}}})(window.comtop);(function(a){a.JCT=b;function b(c,e){if(b.clearWhiteSpace){c=c.replace(/[\f\n\r\t\v]+/g,"")}this.Fn=new b.Instance(c,e);for(var d in this){this.Fn.Reserve+=d+","}}b.prototype={Extend:function(e,c){for(var d in e){if(this[d]&&this[d].Fn&&this[d].Fn.JavaScriptCommonTemplates&&this[d].Extend){this[d].Extend(e[d])}else{if(this.Fn.Reserve.indexOf(","+d+",")==-1){this[d]=e[d]}}}if(typeof e.ERun=="function"){e.ERun.apply(this,c||[])}return this},ExtendTo:function(e,c){for(var d in this){if(this.Fn.Reserve.indexOf(","+d+",")>0&&e[d]){continue}if(e[d]==null){e[d]=this[d]}else{if(this[d].Fn&&this[d].Fn.JavaScriptCommonTemplates&&this[d].ExtendTo){this[d].ExtendTo(e[d])}}}if(typeof e.ERun=="function"){e.ERun.apply(e,c||[])}return this},ExecChilds:function(e,d){if(typeof e=="string"){d=e;e=0}d=d||"Exec";if(!e){e={};for(var f in this){if(this[f].Fn&&this[f].Fn.JavaScriptCommonTemplates){e[f]=[]}}}for(var f in e){if(this[f]&&(typeof this[f][d]=="function")){this[f][d].apply(this[f],e[f])}}return this},BuildChilds:function(f){var d={},e=false;if(undefined==f){f=[]}else{if(typeof f=="string"){f=f.split(",")}else{d=f;e=true}}if(f instanceof Array){for(var c=0;c<f.length;c++){d[f[c]]=true}}for(var c in this){if(this[c].Fn&&this[c].Fn.JavaScriptCommonTemplates&&(f.length==0||d[c])){this[c].Build(e?f[c]:[])}}return this},GetView:function(){this.Fn.V=[];this.GetViewContinue.apply(this,arguments);return this.Fn.V.join("")},GetViewContinue:function(){this.Build.apply(this,[arguments])},Build:function(c){this.Fn.Build(this,c,arguments.callee.caller===this.GetViewContinue);return this},PushView:function(c){this.Fn.V.push(c)}};b.Instance=function(c,d){this.Init(c,d)};b.clearWhiteSpace=true;b.Instance.prototype={JavaScriptCommonTemplates:3,Reserve:",",args:[],Tags:{comment:{block:{begin:"<!---",end:"-->"},exp:{begin:"+-",end:"-+"},member:{begin:"/*+",end:"*/"},memberend:{begin:"/*-",end:"*/"},clean:{begin:"<!--clean",end:"/clean-->"}},script:{block:{begin:'<script type="text/jct">',end:"<\/script>"},exp:{begin:"+-",end:"-+"},member:{begin:"/*+",end:"*/"},memberend:{begin:"/*-",end:"*/"},clean:{begin:"<!--clean",end:"/clean-->"}},code:{block:{begin:'<code class="jct">',end:"</code>"},exp:{begin:"+-",end:"-+"},member:{begin:"/*+",end:"*/"},memberend:{begin:"/*-",end:"*/"},clean:{begin:"<!--clean",end:"/clean-->"}}},Init:function(e,h){this.Src=e||"";this.Path=h||"";for(var d in this.Tags){if(this.Src.indexOf(this.Tags[d].block.begin)>=0){break}}this.Tag=this.Tags[d];this.A=[];this.V=[];this.EXEC=[];var f=[];var g=[0,0,0,0,0];var c=this.Src.length;while(this.Slice(this.Tag.clean,g[4],g,c)){f.push(this.Src.slice(g[0],g[1]))}if(f.length){f.push(this.Src.slice(g[4]));this.Src=f.join("")}},Build:function(c,d,g){this.EXEC=[];this.Parse(c);try{var f=this.EXEC.join("\n");c.GetViewContinue=new Function(this.args,f);this.Src=""}catch(e){this.V=["jCT Parse Error"];c.ERROR={message:e.message+"\n"+(e.lineNumber||e.number),code:f}}if(c.BRun){c.BRun.apply(c,d||[])}if(g){this.V=[];c.GetViewContinue.apply(c,d||[])}},Parse:function(q){var s=this.Tag,e=this.A,r=this.EXEC,m=this.Src.length,c=[0,0,0,0,0],o=[0,0,0,0,0];while(this.Slice(s.block,c[4],c,m)){o=[0,0,0,0,c[0]];while(this.Slice(s.exp,o[4],o,c[1])){r.push("this.Fn.V.push(this.Fn.A["+e.length+"]);");e.push(this.Src.slice(o[0],o[1]));r.push("this.Fn.V.push("+this.Src.slice(o[2],o[3])+");")}if(o[4]!=c[1]){r.push("this.Fn.V.push(this.Fn.A["+e.length+"]);");e.push(this.Src.slice(o[4],c[1]))}if(this.Src.slice(c[2],c[2]+2)=="//"){var l=this.Src.slice(c[2]+2,c[2]+3);if(l=="/"){l=this.Src.slice(c[2]+3,c[3]);var f=l.indexOf(" ");var k=[];if(f>0){k=l.slice(f+1).split(",");l=l.slice(0,f)}var d=s.block.begin+"///"+l+s.block.end;var i=this.Src.indexOf(d,c[4]);if(i>0){var n=new b(this.Src.slice(c[4],i),this.Path);n.Fn.args=k;if(!q[l]){q[l]={}}for(var g in n){q[l][g]=n[g]}c[4]=i+d.length}}else{if(l=="."){l=this.Src.slice(c[2]+3,c[3]);var f=l.indexOf(" ")+1;if(l.slice(f,f+8)=="function"){var h=l.slice(0,f-1);q[h]=new Function("return "+l.slice(f,l.length))()}else{var h=new Function("return "+l.slice(f));q[l.slice(0,f)]=h.call(q)}}else{if(l==" "){this.args=this.Src.slice(c[2]+2,c[3]).slice(1).split(",")}}}}else{r.push(this.Src.slice(c[2],c[3]))}}o=[0,0,0,0,c[4]];c[1]=m;while(this.Slice(s.exp,o[4],o,c[1])){r.push("this.Fn.V.push(this.Fn.A["+e.length+"]);");e.push(this.Src.slice(o[0],o[1]));r.push("this.Fn.V.push("+this.Src.slice(o[2],o[3])+");")}if(o[4]!=c[1]){r.push("this.Fn.V.push(this.Fn.A["+e.length+"]);");e.push(this.Src.slice(o[4],c[1]))}},Slice:function(k,j,c,i){var d=k.begin;var e=k.end;var g,h,f;g=this.Src.indexOf(d,j);if(g<0||g>=i){return false}h=g+d.length;if(h<0||h>=i){return false}f=this.Src.indexOf(e,h);if(f<0||f>=i){return false}c[0]=j;c[1]=g;c[2]=h;c[3]=f;c[4]=f+e.length;return true}}})(window.comtop);(function(d,e){window.cui=function(h){var g=d(h);var i=g.data("uitype")||g;if(i.options){var f=i.options.uitype;f=f.charAt(0).toLowerCase()+f.substring(1);if(!i[f]){i[f]=function(){return this}}}if(!i.cuiCreated){i.cuiCreated=function(l,j){if(this[l]){this[l].apply(this,Array.prototype.slice.call(arguments,1))}else{var k=this.data("cuiCreated")||[];k.push({method:l,arg:Array.prototype.slice.call(arguments,1)});this.data("cuiCreated",k)}delete this.cuiCreated;return this}}return i};function b(g,h){g.options=d.extend(true,{},h.options,g.options);if(h.options&&h.options.uitype){var j=h.options.uitype;g._superUITypes=d.extend(true,[],h._superUITypes);g._superUITypes.push(j)}var f=g.options?g.options.uitype:null;if(!f){return}var i=f.charAt(0).toLowerCase()+f.substring(1);if(d.fn[i]==null){d.fn[i]=function(k){var m=d(this).eq(0);var n=e.UI[f].prototype.options.scope;m.selector=m.selector.replace(".slice(0,1)","");if(!m.selector&&n!="uitype"){var l="e-"+e.guid(),p=this.nodeName||"";m.attr("eventID",l);m.selector=p+"[eventID="+l+"]:eq(0)"}var o=null;if(n==null){o=m.data("uitype")}else{if(n=="uitype"){o=m.data(f)}}if(o==null){k=k||{};k.el=m;o=new e.UI[f](k);e.UI.componentList.push(o);if(m.size()){if(n==null){m.data("uitype",o)}else{if(n=="uitype"){m.data(f,o)}}}}return o}}g[i]=function(){return this}}var a=false,c=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;e.Class=function(){};e.Class.extend=function(j){var i=this.prototype;b(j,i);a=true;var h=new this();a=false;for(var g in j){h[g]=typeof j[g]=="function"&&typeof i[g]=="function"&&c.test(j[g])?(function(k,l){return function(){var n=this._super;this._super=i[k];var m=l.apply(this,arguments);this._super=n;return m}})(g,j[g]):j[g]}function f(){if(!a&&this.__init){this.__init.apply(this,arguments)}}f.prototype=h;f.prototype.constructor=f;f.extend=arguments.callee;return f};e._registerCmp=b})(window.comtop.cQuery,window.comtop);(function(b,e){var a=a||{};e.UI.templatePath=null;e.UI.componentList=[];e.UI.Base=e.Class.extend({options:{},tpls:{},autoTpls:{},isInit:false,cui_prompt:"",__load:function(f,h,g){typeof g==="undefined"&&(g=false);typeof h!=="function"&&(h=function(){});b.ajax({url:f,async:g,dataType:"text",success:h,error:function(){}})},__loadTemplate:function(o){o=o||"template.html";var t=this,n=t.options.uitype,f="",q,r=a[n],l=b("body"),s=l.attr("cuitmplmark")||"",g=new RegExp(o);n=n.charAt(0).toUpperCase()+n.substring(1);if(!r){if(!g.test(s)){if(!e.UI.templatePath){e.UI.scanTemplateUrl(o)}q=d(o);f=q.path+"template/"+o;l.attr("cuitmplmark",s+"["+q.mark+"#"+o+"]");t.__load(f,function(A){A=A.match(/<cmptpl[^>]*>(\s|\r|\t|.)*?<\/cmptpl>/g);for(var w=0,u=A.length;w<u;w++){var v=A[w].match(/uiType="([\w-]*)"/)[1],B=A[w].match(/var="([\w-]*)"/)[1],z=A[w].match(/parse="([\w-]*)"/)[1]!="false",x=A[w].replace(/<cmptpl[^>]*>/,"").replace(/<\/cmptpl>/,"");var y=a[v]||{tpls:{},autoTpls:{}};y.tpls[B]=x;z&&(y.autoTpls[B]=true);a[v]=y}})}r=a[n]||{tpls:{},autoTpls:{}}}t.tpls=b.extend(true,{},r.tpls);t.autoTpls=b.extend(true,{},r.autoTpls);if(t._superUITypes){for(var m=t._superUITypes.length-1;m>=0;m--){n=t._superUITypes[m];var j=a[n];if(j){var h=a[n].tpls;for(var k in h){if(!t.tpls[k]){t.tpls[k]=h[k]}}var p=a[n].autoTpls;for(k in p){if(!t.autoTpls[k]){t.autoTpls[k]=p[k]}}}}}l=null},_buildTemplate:function(k,j,p,m){var n=this,o=b(k);p=p||n.options;if(typeof n.tpls[j]=="object"){n.tpls[j].el=o;n.__createTargetCmp(n.tpls[j])}else{var l=b.trim(n._buildTemplateStr(j,p))||"";var f=l.match(/\#ref\=[\w\.]*\#/g)||[];var g="";for(var h=0;h<f.length;h++){g=b.trim(f[h].replace(/#/g,"").replace("ref=",""));l=l.replace(f[h],n._buildTemplateStr(g,p)||"")}l=n._bindTplEvent(l);m?o.append(l):o.html(l);return l}},_buildTemplateStr:function(i,h){var g=this;var f=new e.JCT(g.tpls[i]);f.Build();return f.GetView(h)},__createTargetCmp:function(f){new e.UI[f.uitype](f)},__init:function(r){var q=this,f={target:{eventName:"change",source:"getValue",target:"setValue"},scope:null},o=r.isScanner,i={},l="",g="";q.options.tpls=q.options.tpls||{};for(var h in q.options){if(o){switch(h){case"readonly":case"width":case"height":l=c(r.el[0],h);break;default:l=r.el.attr(h)}}else{l=r[h];i[h]=l;continue}if(typeof l!=="string"){continue}i[h]=l;if(l=="null"){r[h]=null;continue}g=q.options[h]==null?"function":typeof q.options[h];r[h]=q._convertTo(l,g,q.options[h])}if(q.options.textmode==undefined){delete r.textmode}f=q.options=b.extend(true,{},f,q.options,r);q._init(i,r);if(f.textmode){q.setTextMode();return}q.__loadTemplate(f.template);for(var n in f.tpls){q.tpls["super."+n]=q.tpls[n];if(typeof f.tpls[n]==="string"){q.tpls[n]=q.tpls[f.tpls[n]]||f.tpls[n]}else{q.tpls[n]=f.tpls[n]}}for(n in q.tpls){if(q.autoTpls[n]==true){var j=b(f.el);var k=j.get(0).tagName;if(/[DIV|SPAN]/.test(k)&&b.trim(j.html())==""){q._buildTemplate(j,n,f)}else{q._bindTplEvent()}}}q._create();if(j){var m=j.data("cuiCreated");if(m){b.each(m,function(){if(q[this.method]){q[this.method].apply(q,this.arg)}});j.removeData("cuiCreated")}}},_bindTplEvent:function(r){var s=this,f=s.options;if(typeof r==="string"){var j=f.el.selector,m=r.match(/events=\"[\w-\s\;\=\,\.]*\"/g)||[],q=[],g=null,p=null,h=null;for(var n=0;n<m.length;n++){q=[];g=m[n].replace(/\"/g,"").replace(/events\=/,"").split(";");for(var l=0,o=g.length;l<o;l++){p=g[l].split("=");if(!b.trim(p[0])){continue}q.push("on",p[0],'="',(e.Browser.isIE?"return ":""),"comtop.proxyHandler(event, '",j,"', this, '",p[1],"');\" ")}var h=new RegExp(m[n],"g");q.push(m[n].replace("events","etsBak"));r=r.replace(h,q.join(""))}return r}r=r||b(f.el);b("[etsBak]",r).each(function(){var v=b(this),u=v.attr("etsBak").split(";"),k;for(var t=0;t<u.length;t++){k=u[t].split("=");v.bind(k[0]+".comtopBase",{self:s,func:k[1]},comtop.proxyHandler)}v=null});return r},_unbindTplEvent:function(g){var f=this,h=f.options;g=g||h.el;b("[etsBak]",g).each(function(){var l=b(this),k=l.attr("etsBak").split(";");for(var j=0;j<k.length;j++){l.removeAttr("on"+k[j].split("=")[0])}l.unbind(".comtopBase")})},_triggerHandler:function(f,g){b(this).triggerHandler(f,g)},_init:function(f){},_create:function(){},bind:function(f,h,g){b(this).bind(f,h,g);return this},unbind:function(f,g){b(this).unbind(f,g);return this},setValue:function(){},getValue:function(){},show:function(){this.options.el.show();return this},hide:function(){this.options.el.hide();return this},setReadonly:function(){},setTextMode:function(){var g=this,h=g.options,i=h.el[0].nodeName,f=g.getLabelValue();if(i=="SPAN"||i=="DIV"){h.el.html(f)}else{if(i=="INPUT"||i=="BUTTON"||i=="TEXTAREA"){h.el=h.el.replaceWith("<span>"+f+"</span>")}}},getLabelValue:function(){return this.options.value||""},disable:function(f){f=typeof f==="undefined"?false:f;b("input, select, textarea, button",this.options.el).attr("disabled",f);return this},destroy:function(){var f=this,g=f.options;f._unbindTplEvent(g.el);g.el.removeData();if(f.tpls){g.el.empty()}},_convertTo:function(k,i,g){if(b.trim(k)===""){return i==="string"?"":g}var h={},j=/^(?:\{.*\}|\[.*\])$/;switch(i){case"string":k=""+k;break;case"boolean":k=!!(k==="true");break;case"number":k=+k;break;case"object":k=j.test(k)?b.parseJSON(k.replace(/\\'/g,"#@@#").replace(/'/g,'"').replace(/#@@#/g,"'")):f(k);break;case"function":k=f(k);break;default:k=g}function f(o){var l=o.split("."),n=window;for(var m=0;m<l.length;m++){n=n[l[m]]}return(typeof n==="object"||typeof n==="function")&&!n.nodeName?n:g}return k}});e.proxyHandler=function(p,j,f,h){var q=null,o=null,g=null,n=null,m=0,l=0;if(j){if(!p){p=b.Event()}p=b.event.fix(p);for(m=0;m<e.UI.componentList.length;m++){n=e.UI.componentList[m];if(n.options.el.selector===j){q=n;break}}if(q==null){return false}}else{q=p.data.self;h=p.data.func;f=this;p.data=null}h=h.split(",");for(m=0;m<h.length;m++){if(b.isFunction(q[h[m]])){q[h[m]](p,f,p.target||p.srcElement)}else{o=window;g=h[m].split(".");for(l=0;l<g.length;l++){o=o[g[l]]}o(p,f,p.target||p.srcElement)}}if(p.type==="click"&&p.target.nodeName.toLocaleLowerCase()==="a"&&e.Browser.isIE){return false}};e.UI.scanTemplateUrl=function(m){var k,g,j=0,l=0,p,q,h,n=new RegExp(m),o=[],f=[];k=b('script[src*="cui/js/comtop.ui"]');g=b("script[cuiTemplate]");p=k.eq(0).attr("src");q=p.substr(0,p.lastIndexOf("/"));q=p.substr(0,q.lastIndexOf("/")+1);o.push({path:q,attrTmpl:""});for(l=g.length;j<l;j++){p=g.eq(j).attr("src");if(!p){continue}q=p.substr(0,p.lastIndexOf("/"));q=p.substr(0,q.lastIndexOf("/")+1);f.push({path:q,attrTmpl:g.eq(j).attr("cuiTemplate")})}e.UI.templatePath={scriptTP:f,scriptOP:o}};function d(j){var h=e.UI.templatePath,g=new RegExp(j);for(var f=0;f<h.scriptTP.length;f++){if(g.test(h.scriptTP[f].attrTmpl)){return{path:h.scriptTP[f].path,mark:"extend"}}}return{path:h.scriptOP[0].path,mark:"cui"}}function c(j,g){var f;if(typeof j.outerHTML!=="undefined"){f=j.outerHTML}else{b("body").append('<div style="display: none;" id="f8_outerHTML_bug"></div>');b("#f8_outerHTML_bug").append(b(j).clone());f=b("#f8_outerHTML_bug")[0].innerHTML;b("#f8_outerHTML_bug").remove()}var h=f.match(/<[^>]*>/)[0].replace(/[\r\n\t]/g,"");var i=new RegExp("\\s"+g+"=[\"']*([\\w-\\%]*)[\"']*");var k=h.match(i);return k?k[1]:null}b(window).bind("unload",function(){if(comtop.Browser.isIE&&window.CollectGarbage){window.CollectGarbage()}window.comtop=undefined;window.cui=undefined})})(window.comtop.cQuery,window.comtop);(function(a,b){b.Dom.minWidth=function(d,e,f,c){if(b.Browser.isIE){if(d.width()<e){if(b.Browser.isQM){f=f||0;c=c||0;d.width(e+f+c)}else{d.width(e)}}}else{d.css({minWidth:e})}};b.Dom.maxWidth=function(d,e,f,c){if(b.Browser.isIE){if(d.width()>e){if(b.Browser.isQM){f=f||0;c=c||0;d.width(e+f+c)}else{d.width(e)}}}else{d.css({maxWidth:e})}};b.Dom.minHeight=function(d,e,f,c){if(b.Browser.isIE){if(d.height()<e){if(b.Browser.isQM){f=f||0;c=c||0;d.height(e+f+c)}else{d.height(e)}}}else{d.css({minHeight:e})}};b.Dom.maxHeight=function(d,e,f,c){if(b.Browser.isIE){if(d.height()>e){if(b.Browser.isQM){f=f||0;c=c||0;d.height(e+f+c)}else{d.height(e)}}}else{d.css({maxHeight:e})}};b.Dom.windowSize=function(){var c=a(window);return{width:c.width(),height:c.height()}};b.Dom.DocumentSize=function(i){i=i||document;var e=0,d=0;if(!b.Browser.isIE){e=a(i).width();d=a(i).height()}else{if(i.documentElement&&(i.documentElement.scrollWidth||i.documentElement.scrollHeight)){var h=i.documentElement.scrollHeight;var c=i.documentElement.offsetHeight;var f=i.documentElement.scrollWidth;var g=i.documentElement.offsetWidth;e=Math.max(f,g);d=Math.max(h,c)}else{if(i.body&&(i.body.scrollHeight||i.body.scrollWidth)){var h=i.body.scrollHeight;var c=i.body.offsetHeight;var f=i.body.scrollWidth;var g=i.body.offsetWidth;e=Math.max(f,g);d=Math.max(h,c)}}}return{width:e,height:d}};b.MQ={topicList:{},sub:function(c,d){this.topicList[c]=this.topicList[c]||[];this.topicList[c].push(d)},unsub:function(c,e){var f=this.topicList[c];if(!f){return}for(var d=0;d<f.length;d++){if(f==e){f.splice(d,1);break}}},pub:function(c,e){var d=this.topicList[c];if(!d||d.length==0){console.warn("no widget has subscribe this topic "+c);return}for(handler in d){handler(e)}}};b.String.getBytesLength=function(f){var d=0;for(var e=0;e<f.length;e++){var g=f.charCodeAt(e);if((g>=1&&g<=126)||(65376<=g&&g<=65439)){d++}else{d+=2}}return d};b.String.intercept=function(j,h){var f="";var e=0;for(var g=0,d=j.length;g<d;g++){var k=j.charCodeAt(g);if((k>=0&&k<=126)||(65376<=k&&k<=65439)){e++}else{e+=2}if(e<=h){f+=j.charAt(g)}else{break}}return f};b.Date.format=function(e,d){var f={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"H+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds(),"w+":b.Date.getOnWeek(e).week};if(/(y+)/.test(d)){d=d.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))}for(var c in f){if(new RegExp("("+c+")").test(d)){d=d.replace(RegExp.$1,RegExp.$1.length==1?f[c]:("00"+f[c]).substr((""+f[c]).length))}}return d};b.Date.simpleformat=function(f,e){if(!f){return""}var m=a.type(f);if(m==="string"||m==="number"){var j=new Date();j.setTime(f);if(isNaN(j.getDate())){return f}f=j}var l=["y+","yyyy","M","MM","d","dd","h","hh","m","mm","s","ss"],n=f.getFullYear().toString(),k=(f.getMonth()+1).toString(),c=f.getDate().toString(),o=f.getHours().toString(),g=f.getMinutes().toString(),p=f.getSeconds().toString();function q(i){return i.charAt(1)?i:0+i}var d=[n.slice(2),n,k,q(k),c,q(c),o,q(o),g,q(g),p,q(p)];for(var h=l.length;h--;){e=e.replace(new RegExp(l[h]),d[h])}return e};b.Date.getOnWeek=function(d,e,g){if(!d){return null}var f,c=e?4:1,h=new Date(d.getTime());h.setDate(h.getDate()+c-(g?h.getDay():h.getDay()||7));f=h.getTime();h.setMonth(0);h.setDate(1);return{year:h.getFullYear(),week:Math.floor(Math.round((f-h)/86400000)/7)+1}};b.Date.getWeekRange=function(h,e,j,g){g=j?false:g;var c=new Date(h,0,1),k=b.Date.getOnWeek(c,j,g).week,d,f,i;i=k!=1?g?7-c.getDay():8-(c.getDay()||7):0;d=(e-1)*7+i;f=d+6;return[new Date(d*86400000+c.getTime()),new Date(f*86400000+c.getTime())]};b.Date.parse=function(r,x){r=a.trim(r);if(r===""){return null}var B,k,g,A,z,t,n,p,l;k=[-1,"([0-9]{4})","([0-9]{2})"];g=[-1,"(0[1-9]|1[0-2])","([1-9]|1[0-2])"];A=[-1,"(0[1-9]|[1-2][0-9]|30|31)","([1-9]|[1-2][0-9]|30|31)"];z=[-1,"([0-1][0-9]|20|21|22|23)","([0-9]|1[0-9]|20|21|22|23)"];t=[-1,"([0-5][0-9])","([0-9]|[1-5][0-9])"];n=[-1,"([0-5][0-9])","([0-9]|[1-5][0-9])"];p=[-1,"([0-0][1-4])","([1-4])"];l=[-1,"([0-5][0-9])","([0-9]|[1-4][0-9]|5[0-3])"];if(j(r,x)){var c=new Date(),C=B.exec(r),f=u(x),e=[c.getFullYear(),1,1,0,0,0,1,1];C.shift();for(var v=0;v<8;v++){e[v]=f[v]>=0?+(C[f[v]]):e[v]}if(f[6]>=0&&f[1]<0){e[1]=(e[6]-1)*3;e[2]=1;e[3]=0;e[4]=0;e[5]=0}else{if(f[7]>=0&&f[1]){var o=b.Date.getWeekRange(e[0],e[7]);e[1]=o[0].getMonth();e[2]=o[0].getDate()}else{e[1]=e[1]-1}}return new Date(e[0],e[1],e[2],e[3],e[4],e[5],0)}else{return null}function j(h,d){d=d.replace(/yyyy/,k[1]).replace(/yy/,k[2]).replace(/MM/,g[1]).replace(/M/,g[2]).replace(/dd/,A[1]).replace(/d/,A[2]).replace(/hh/,z[1]).replace(/h/,z[2]).replace(/mm/,t[1]).replace(/m/,t[2]).replace(/ss/,n[1]).replace(/s/,n[2]).replace(/qq/,p[1]).replace(/q/,p[2]).replace(/ww/,l[1]).replace(/w/,l[2]);B=new RegExp("^"+d+"$");return B.test(h)}function u(s){var h=[],q=0,m,w;k[0]=s.indexOf("yyyy");k[0]<0&&(k[0]=s.indexOf("yy"));k[0]>=0&&(h[q]=k[0],q++);g[0]=s.indexOf("MM");g[0]<0&&(g[0]=s.indexOf("M"));g[0]>=0&&(h[q]=g[0],q++);A[0]=s.indexOf("dd");A[0]<0&&(A[0]=s.indexOf("d"));A[0]>=0&&(h[q]=A[0],q++);z[0]=s.indexOf("hh");z[0]<0&&(z[0]=s.indexOf("h"));z[0]>=0&&(h[q]=z[0],q++);t[0]=s.indexOf("mm");t[0]<0&&(t[0]=s.indexOf("m"));t[0]>=0&&(h[q]=t[0],q++);n[0]=s.indexOf("ss");n[0]<0&&(n[0]=s.indexOf("s"));n[0]>=0&&(h[q]=n[0],q++);p[0]=s.indexOf("qq");p[0]<0&&(p[0]=s.indexOf("q"));p[0]>=0&&(h[q]=p[0],q++);l[0]=s.indexOf("ww");l[0]<0&&(l[0]=s.indexOf("w"));l[0]>=0&&(h[q]=l[0],q++);w=[k[0],g[0],A[0],z[0],t[0],n[0],p[0],l[0]];for(q=0;q<h.length-1;q++){for(m=0;m<h.length-1-q;m++){if(h[m]>h[m+1]){var d=h[m];h[m]=h[m+1];h[m+1]=d}}}for(q=0;q<h.length;q++){for(m=0;m<w.length;m++){if(h[q]==w[m]){w[m]=q}}}return w}};b.Number.money=function(p,d){if(typeof p!=="string"&&typeof p!=="number"){p=0}d=d===undefined?2:d;var o="",f=false,g=1;if(/-/.test(p+"")){f=true;p=(p+"").replace("-","")}for(var k=0;k<d;k++){o+="0";g=g*10}p=parseFloat(p,10)||0;p=(Math.round(p*g)/g).toString().split(".");var h=p[0],e=(p[1]||""+o).slice(0,d),m=h.length,c=m%3,n=c?[h.slice(0,c)]:[];for(var l=0,q=Math.floor(m/3);l<q;l+=1){n.push(h.slice(c+l*3,c+l*3+3))}if(e.length<d){for(var k=0,m=e.length;k<d-m;k++){e+="0"}}return(f?"-":"")+n.join(",")+(d>0?".":"")+e};b.Number.round=function(k,d){var f,e,l,c,n,g,h,m,j;if(!(f=/^(\+|\-)?(\d+|\d*(\.)\d+)$/.exec(k+""))){return}d=!d||d<0?0:d;e=f[1]?f[1].replace("+",""):"";g=f[2].replace(/^0+/g,"");g=g.replace(/(\.\d*?)0+$/g,"$1");g=g.charAt(0)==="."?"0"+g:g;l=g.search(/\./);c=g.substring(l);if(l===-1||!c||c.length<=d){j=e+g}else{n=g.split("");n.length=l+d+1;if(c.charAt(d+1)-0<5){j=e+n.join("")}else{for(h=n.length;h--;){if(n[h]==="."){m=true;continue}n[h]=n[h]-0+1;if(n[h]===10){n[h]=!m?"":0}else{break}}j=e+(h<0?"1"+n.join(""):n.join(""))}}j=j.replace(/\.0*$/,"").replace(/^\-0$/,"");return !j?"0":j};b.Tools.fixedNumber=function(c){var e=typeof c,d=null;if(e==="number"){d=Math.floor(c)}else{if(e==="string"){c=a.trim(c);if(c==="auto"){d="auto"}else{if(/\d+(\.\d*)?%/.test(c)){d=c.replace(/\.\d*/,"");if(d==="%"||d==="0%"){d=0}}else{if(/\d/.test(c.charAt(0))){d=parseInt(c.replace(/x/,""))}}}}}return d};cui.ajax=function(c){var g=c.type||"GET",d=c.dataType||"json",i=c.success||h.noop,e=c.error,f=c.scope||window;var h=window.comtop.cQuery;h.ajax({url:c.url,type:g,data:c.data,dataType:d,success:function(j){if(d=="json"){if(j.success===false){if(e&&e.call){e.call(f,j)}else{cui.error(j.exMessage)}}else{i.call(f,j)}}else{i.call(f,j)}},error:function(j,k){if(e&&e.call){e.call(f)}else{if(k=="parsererror"){cui.error("")}else{if(k=="timeout"){cui.error("")}else{if(j.status==404){cui.error("")}else{if(j.status==0){}else{cui.error("")}}}}}}})}})(window.comtop.cQuery,window.comtop);(function(a,b){b.UI.Databind=b.UI.Base.extend({options:{uitype:"Databind",scope:"uitype",data:{}},data:{},initData:{},bindMapping:{},_init:function(){this.data=this.options.el.get(0);this.initData=a.extend(true,{},this.data);this.bindMapping={}},setValue:function(d,e){for(var c in d){if(c.toLowerCase().indexOf("jquery")>=0){continue}this.set(c,d[c],e)}},getValue:function(){var d=a.extend({},this.data);for(var c in d){if(c.toLowerCase().indexOf("jquery")>=0){delete d[c]}}return d},_change:function(e){var f=e.data.propName;var d=e.data.el;var g=cui(d).getValue();var c=this.data[f];if(g!=c){this.data[f]=g;this._triggerHandler("change",[f,c,g])}},addBind:function(d,e){this.bindMapping[e]=d;var c=cui(d);c.bind("change",{propName:e,el:d},a.proxy(this._change,this));if(!c.options.textmode){c.setValue(this.data[e],true)}else{c.options.value=this.data[e];c.setTextMode()}return this},reset:function(){for(var c in this.initData){this.set(c,this.initData[c],true)}},setEmpty:function(){var e,d="",c;for(c in this.bindMapping){cui(this.bindMapping[c]).onValid()}for(c in this.data){if(c.toLowerCase().indexOf("jquery")>=0){continue}e=Object.prototype.toString.call(this.data[c]).match(/\[object\s([A-Za-z]{1,})\]/)[1].toLocaleLowerCase();e=this.data[c]===null?"null":e;switch(e){case"number":d="";break;case"string":d="";break;case"array":d=[];break;case"object":d={};break;case"null":d=null;break;case"undefined":d=undefined}this.set(c,d,true)}},set:function(g,f,h){var c=this.data[g];if(f!=c||h){this.data[g]=f;var e=this.bindMapping[g];var d=cui(e);if(e){if(!d.options.textmode){d.setValue(f,!!h)}else{d.options.value=f;d.setTextMode()}}this._triggerHandler("change",[g,c,f])}},get:function(c){return this.data[c]},destroy:function(){this._super();for(var c in this.bindMapping){if(c){cui(this.bindMapping[c]).unbind("change",null,this._change)}}}})})(window.comtop.cQuery,window.comtop);(function(a,b){b.UI.Validate=b.UI.Base.extend({options:{uitype:"Validate",onValid:null,onInValid:null},invalidClass:"validate_invalid",messageClass:"validate_validation_message",invalidFieldClass:"validate_invalid_field",_create:function(){a.extend(this,this.options)},destroy:function(){var e=this;var d=a.data(this.options.el,"validateEl")||[];a.each(d,function(f,h){var i=cui("#"+h.id);var g=i.options.el;i.unbind("change",e._validateEvent);g.removeData("validateRule")});a.removeData(this.options.el,"validateEl")},add:function(h,j,i){var k=a.type(h)=="string"?cui("#"+h):h;if(!k.options){return}var g=k.options.el;var f=g.data("validateRule")||[];var e=null;if(!i&&!c[j]){e={type:"required",params:{m:j}}}else{e={type:j,params:i||{}}}f.push(e);g.data("validateRule",f);var d=a.data(this.options.el,"validateEl")||[];if(!this._contains(g[0],d)){k.bind("change",this,this._validateEvent);d.push(g[0])}a.data(this.options.el,"validateEl",d)},disValid:function(f,d){var g=a.type(f)=="string"?cui("#"+f):f;if(!g.options){return}var e=g.options.el;if(d){e.data("disValid","true")}else{e.removeData("disValid")}},_contains:function(e,f){var d=false;a.each(f,function(g,h){if(e===h){d=true;return}});return d},remove:function(i,j){var k=a.type(i)=="string"?cui("#"+i):i;if(!k.options){return}var h=k.options.el;var g=[];if(j){g=h.data("validateRule")||[];var d=-1;a.each(g,function(l,m){if(m.type==j){d=l}});if(d>=0){g.splice(d,1)}}if(g.length<1){h.removeData("validateRule");k.unbind("change",this,this._validateEvent);var e=a.data(this.options.el,"validateEl")||[];var f=-1;a.each(e,function(l,m){if(m.id==h[0].id){f=l}});if(f>=0){e.splice(f,1)}if(e.length<1){a.removeData(this.options.el,"validateEl")}else{a.data(this.options.el,"validateEl",e)}}else{h.data("validateRule",g)}},_validateEvent:function(g,f){var d=g.data;d._validate(this,!!f)},validAllElement:function(){return this._validElement(a.data(this.options.el,"validateEl"))},validOneElement:function(d){var e=a.type(d)=="string"?cui("#"+d):d;if(!e.options){return false}return this._validate(e)},validElement:function(p,l,d){var g=[],h,n;p=p||"ALL";p=p.toLocaleUpperCase(p);switch(p){case"AREA":var o=a(l);var r=[];var m=[];var k=b.UI.componentList;for(h=0,n=k.length;h<n;h++){if(o.find(k[h].options.el).length){if(typeof k[h].options.textmode!=="undefined"){m.push(k[h].options.el[0])}}if(k[h].options.el){if(typeof k[h].options.textmode!=="undefined"){r.push(k[h].options.el[0])}}}d=typeof d==="undefined"?true:false;if(d){g=m}else{var e=false;for(h=0,n=r.length;h<n;h++){for(var f=0,q=m.length;f<q;f++){if(a(m[f]).attr("id")==a(r[h]).attr("id")){e=true;break}}if(!e){g.push(r[h])}e=false}}break;case"CUSTOM":d=typeof d==="undefined"?true:false;if(d){for(h=0,n=l.length;h<n;h++){g.push(a("#"+l[h])[0])}}else{var k=b.UI.componentList;var m=[];for(h=0,n=k.length;h<n;h++){if(k[h].options.el){if(typeof k[h].options.textmode!=="undefined"){m.push(k[h].options.el[0])}}}var e=false;for(h=0,n=m.length;h<n;h++){for(var f=0,q=l.length;f<q;f++){if(a(m[h]).attr("id")==l[f]){e=true;break}}if(!e){g.push(m[h])}e=false}}break;case"ALL":default:g=a.data(this.options.el,"validateEl")}return this._validElement(g)},_validElement:function(e){e=e||[];var j=[];var h=[];var k=true;for(var g=0;g<e.length;g++){var f=e[g];var l=cui(f);if(typeof l.options==="undefined"){continue}var d=this._validate(l);d=a.extend(d,{id:f.id});if(d.valid){j.push(d)}else{k=false;h.push(d)}}return[h,j,k]},_validate:function(i,h){var e=i.options.el;if(h){i.onValid(i);return false}if(!e[0].disabled){var d=null;var f=i.options.el.data("disValid");if(f&&f=="true"){d={valid:true,message:""}}else{d=this._doValidate(i)}var g=d.valid;if(g){if(i.onValid&&!this.options.onValid){i.onValid(i)}else{if(!i.onValid&&!this.options.onValid){this.onValid(e)}else{this.options.onValid.apply(this,[e])}}}else{if(i.onInValid&&!this.options.onInValid){i.onInValid(i,d.message)}else{if(!i.onInValid&&!this.options.onInValid){this.onInValid(e,d.message)}else{this.options.onInValid.apply(this,[e,d.message])}}}return d}},_doValidate:function(k){var h=k.options.el;var j=false;var g=h.data("validateRule")||[];for(var f=0;f<g.length;f++){var e=g[f];var d=this._validateElement(k,e);j=!d.valid;if(j){return{valid:false,message:d.message}}}return{valid:true,message:""}},_validateElement:function(k,d){var h=d.type;var f=d.params;var i=k.getValue();var j=true;var g="";try{c[h](i,f)}catch(e){g=e.message;j=false}finally{return{valid:j,message:g}}},onInValid:function(d,e){this._insertMessage(d,this._createMessageSpan(e));this._addFieldClass(d)},onValid:function(d){this._removeMessageAndFieldClass(d)},_createMessageSpan:function(d){return a("<span></span>").html(d)},_insertMessage:function(d,e){this._removeMessage(d);a(e).addClass(this.messageClass+(" "+this.invalidClass));a(e).insertAfter(d)},_addFieldClass:function(d){this._removeFieldClass(d);a(d).addClass(this.invalidFieldClass)},_removeMessage:function(d){if(nextEl=a(d).next("."+this.messageClass)){a(nextEl).remove()}},_removeFieldClass:function(d){a(d).removeClass(this.invalidFieldClass)},_removeMessageAndFieldClass:function(d){this._removeMessage(d);this._removeFieldClass(d)}});var c={required:function(e,f){var g=a.extend({m:"!"},f||{});if(e===""||e===null||e===undefined){c.fail(g.m)}if(g.emptyVal){a.each(g.emptyVal,function(h,j){if(e==j){c.fail(g.m)}})}if(a.type(e)=="array"&&e.length==0){c.fail(g.m)}else{if(a.type(e)=="array"){for(var d=0;d<e.length;d++){if(e[d]===""||e[d]===null||e[d]===undefined){c.fail(g.m);break}}}}return true},numeric:function(e,f){var d=e;if(""===e){return true}var e=Number(e);var f=f||{};var g={notANumberMessage:f.notnm||"!",notAnIntegerMessage:f.notim||"!",wrongNumberMessage:f.wrongm||" "+f.is+"!",tooLowMessage:f.minm||" "+f.min+"!",tooHighMessage:f.maxm||" "+f.max+"!",is:((f.is)||(f.is==0))?f.is:null,minimum:((f.min)||(f.min==0))?f.min:null,maximum:((f.max)||(f.max==0))?f.max:null,onlyInteger:f.oi||false};if(!isFinite(e)){c.fail(g.notANumberMessage)}if(g.onlyInteger&&!/^\d+$/.test(String(d))){c.fail(g.notAnIntegerMessage)}switch(true){case (g.is!==null):if(e!=Number(g.is)){c.fail(g.wrongNumberMessage)}break;case (g.minimum!==null&&g.maximum!==null):c.numeric(e,{minm:g.tooLowMessage,min:g.minimum});c.numeric(e,{maxm:g.tooHighMessage,max:g.maximum});break;case (g.minimum!==null):if(e<Number(g.minimum)){c.fail(g.tooLowMessage)}break;case (g.maximum!==null):if(e>Number(g.maximum)){c.fail(g.tooHighMessage)}break}return true},format:function(d,e){var d=String(d);if(""==d){return true}var f=a.extend({m:"!",pattern:/./,negate:false},e||{});f.pattern=a.type(f.pattern)=="string"?new RegExp(f.pattern):f.pattern;if(!f.negate){if(!f.pattern.test(d)){c.fail(f.m)}}return true},email:function(d,e){if(""==d){return true}var f=a.extend({m:"!"},e||{});c.format(d,{m:f.m,pattern:/^([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})$/i});return true},dateFormat:function(d,e){var f=a.extend({m:"yyyy-MM-dd"},e||{});c.format(d,{m:f.m,pattern:/^((((((0[48])|([13579][26])|([2468][048]))00)|([0-9][0-9]((0[48])|([13579][26])|([2468][048]))))-02-29)|(((000[1-9])|(00[1-9][0-9])|(0[1-9][0-9][0-9])|([1-9][0-9][0-9][0-9]))-((((0[13578])|(1[02]))-31)|(((0[1,3-9])|(1[0-2]))-(29|30))|(((0[1-9])|(1[0-2]))-((0[1-9])|(1[0-9])|(2[0-8]))))))$/i});return true},length:function(d,e){var d=String(d);var e=e||{};var f={wrongLengthMessage:e.wrongm||" "+e.is+" !",tooShortMessage:e.minm||" "+e.min+" !",tooLongMessage:e.maxm||" "+e.max+" !",is:((e.is)||(e.is==0))?e.is:null,minimum:((e.min)||(e.min==0))?e.min:null,maximum:((e.max)||(e.max==0))?e.max:null};switch(true){case (f.is!==null):if(d.replace(/[^\x00-\xff]/g,"xx").length!=Number(f.is)){c.fail(f.wrongLengthMessage)}break;case (f.minimum!==null&&f.maximum!==null):c.length(d,{minm:f.tooShortMessage,min:f.minimum});c.length(d,{maxm:f.tooLongMessage,max:f.maximum});break;case (f.minimum!==null):if(d.replace(/[^\x00-\xff]/g,"xx").length<Number(f.minimum)){c.fail(f.tooShortMessage)}break;case (f.maximum!==null):if(d.replace(/[^\x00-\xff]/g,"xx").length>Number(f.maximum)){c.fail(f.tooLongMessage)}break;default:throw new c.error("Validate::Length - !")}return true},inclusion:function(f,g){var h=a.extend({m:"",within:[],allowNull:false,partialMatch:false,caseSensitive:true,negate:false},g||{});h.m=h.m||f+""+h.within.join(",")+"";if(h.allowNull&&!f){return true}if(!h.allowNull&&!f){c.fail(h.m)}if(!h.caseSensitive){var d=[];a.each(h.within,function(i,j){if(typeof j=="string"){j=j.toLowerCase()}d.push(j)});h.within=d;if(typeof f=="string"){f=f.toLowerCase()}}var e=false;a.each(h.within,function(i,j){if(j==f){e=true}if(h.partialMatch){if(f.indexOf(j)!=-1){e=true}}});if((!h.negate&&!e)||(h.negate&&e)){c.fail(h.m)}return true},exclusion:function(d,e){var f=a.extend({m:"",within:[],allowNull:false,partialMatch:false,caseSensitive:true},e||{});f.m=f.m||d+""+f.within.join(",")+"";f.negate=true;c.inclusion(d,f);return true},confirmation:function(d,e){if(!e.match){throw new Error("Validate::Confirmation - id!")}var f=a.extend({m:"!",match:null},e||{});f.match=a.type(f.match)=="string"?cui("#"+f.match):f.match;if(!f.match||f.match.length==0){throw new Error("Validate::Confirmation - !")}if(d!=f.match.getValue()){c.fail(f.m)}return true},acceptance:function(d,e){var f=a.extend({m:"!"},e||{});if(!d){c.fail(f.m)}return true},custom:function(e,f){var g=a.extend({against:function(){return true},args:{},m:"!"},f||{});var d=g.against;if(a.type(d)=="string"){d=window[d]}if(!d(e,g.args)){c.fail(g.m)}return true},error:function(d){this.message=d;this.name="ValidationError"},fail:function(d){throw new c.error(d)}}})(window.comtop.cQuery,window.comtop);(function(a,b){b.UI.Tip=b.UI.Base.extend({options:{uitype:"Tip",pointee:true,position:"auto",live:false,trigger:"hover",x:false,maxWidth:150,fade:false,opacity:1,tipEl:null,content_cls:".ctip-msg",close_cls:".ctip-x"},_init:function(){this.options.uid="tip_"+comtop.guid();var c=this.options;this.$el=a(c.el);this.$tipEl=c.tipEl?a(c.tipEl):this.$el;this._bindElEvent();this._fixTitle()},_create:function(){if(this.options.trigger=="onload"){this.show()}},_bindElEvent:function(){var c=this,g=this.options;var d=(g.live=="true"||g.live===true)?"live":"bind",f=g.trigger=="hover"?"mouseenter":g.trigger=="click"?"click":"focus",e=g.trigger=="hover"?"mouseleave":g.trigger=="click"?"":"blur";this.$el[d](f,function(){c.show();return false})[d](e,function(){c.hide();return false})},_lazyCreate:function(){if(!this.created){var c=this.options;a(document.body).append(this._getView());this.$tip=a("#"+c.uid);this._bindEvent();this.created=true}},_setMaxWidth:function(){var e=this.$tip,d=this.options;if(b.Browser.isIE6){var c=e.find(".ctip-msg").width()>d.maxWidth?d.maxWidth:"auto";if(b.Browser.isQM&&c!="auto"){c=c+16}e.children(".ctip-content").css("width",c)}else{e.children(".ctip-content").css("maxWidth",d.maxWidth)}},_getView:function(){return this._buildTemplateStr("tip",this.options)},_bindEvent:function(){var c=this,d=this.options;if(d.x===true){this.$tip.find(d.close_cls).bind("click",function(){c.hide();return false})}},_fixTitle:function(){this.$el.removeAttr("title")},_setPosition:function(){var h=this.$tip,g=this.$el,f=this.options;var j=a.extend({},g.offset(),{width:g[0].offsetWidth,height:g[0].offsetHeight});var d=h[0].offsetWidth,e=h[0].offsetHeight,c=f.position;if(b.Browser.isIE&&d>f.maxWidth){h.width(f.maxWidth);d=h[0].offsetWidth;e=h[0].offsetHeight}if(c=="auto"){c=this._calAutoPosition(j)}var i={};switch(c){case"t":i={left:j.left+j.width/2-d/2,top:j.top-e-5};break;case"b":i={left:j.left+j.width/2-d/2,top:j.top+j.height+5};break;case"l":i={left:j.left-d-5,top:j.top+j.height/2-e/2};break;case"r":i={left:j.left+j.width+5,top:j.top+j.height/2-e/2};break;case"lt":i={left:j.left,top:j.top-e-5};break;case"lb":i={left:j.left,top:j.top+j.height+5};break;case"rt":i={left:j.left+j.width-d,top:j.top-e-5};break;case"rb":i={left:j.left+j.width-d,top:j.top+j.height+5};break}h.css(i).addClass("ctip-"+c)},_calAutoPosition:function(i){var g=b.Dom.windowSize();var c=i.top>(a(document).scrollTop()+g.height/2)?"t":"b";var f="",h=this.options.maxWidth/2,e=i.left+i.width/2-a(document).scrollLeft(),d=g.width-e;if(e<h){f="l"}else{if(d<h){f="r"}}return f+c},getContent:function(){var c=this.options;return c.content?c.content:this.$tipEl.attr("tip")},setContent:function(){var c=this.getContent();this.$tip.find(this.options.content_cls).html(c)},show:function(){this._lazyCreate();if(a.trim(this.getContent())==""){return}this.setContent();this.$tip[0].className="ctip";this.$tip.css({top:0,left:0,display:"block"});this._setMaxWidth();this._setPosition()},hide:function(){if(this.$tip){this.$tip.hide()}}});cui.tipList={};cui.tip=function(d,c){c=c||{};c.el=a(d);var e=new b.UI.Tip(c);cui.tipList[e.options.uid]=e;c.el.attr("tipID",e.options.uid);return e}})(window.comtop.cQuery,window.comtop);
/*!
 * jQuery UI Widget 1.10.0
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
(function(b,e){var a=0,d=Array.prototype.slice,c=b.cleanData;b.cleanData=function(f){for(var g=0,h;(h=f[g])!=null;g++){try{b(h).triggerHandler("remove")}catch(j){}}c(f)};b.widget=function(f,g,n){var k,l,i,m,h={},j=f.split(".")[0];f=f.split(".")[1];k=j+"-"+f;if(!n){n=g;g=b.Widget}b.expr[":"][k.toLowerCase()]=function(o){return !!b.data(o,k)};b[j]=b[j]||{};l=b[j][f];i=b[j][f]=function(o,p){if(!this._createWidget){return new i(o,p)}if(arguments.length){this._createWidget(o,p)}};b.extend(i,l,{version:n.version,_proto:b.extend({},n),_childConstructors:[]});m=new g();m.options=b.widget.extend({},m.options);b.each(n,function(p,o){if(!b.isFunction(o)){h[p]=o;return}h[p]=(function(){var q=function(){return g.prototype[p].apply(this,arguments)},r=function(s){return g.prototype[p].apply(this,s)};return function(){var u=this._super,s=this._superApply,t;this._super=q;this._superApply=r;t=o.apply(this,arguments);this._super=u;this._superApply=s;return t}})()});i.prototype=b.widget.extend(m,{widgetEventPrefix:l?m.widgetEventPrefix:f},h,{constructor:i,namespace:j,widgetName:f,widgetFullName:k});if(l){b.each(l._childConstructors,function(p,q){var o=q.prototype;b.widget(o.namespace+"."+o.widgetName,i,q._proto)});delete l._childConstructors}else{g._childConstructors.push(i)}b.widget.bridge(f,i)};b.widget.extend=function(k){var g=d.call(arguments,1),j=0,f=g.length,h,i;for(;j<f;j++){for(h in g[j]){i=g[j][h];if(g[j].hasOwnProperty(h)&&i!==e){if(b.isPlainObject(i)){k[h]=b.isPlainObject(k[h])?b.widget.extend({},k[h],i):b.widget.extend({},i)}else{k[h]=i}}}}return k};b.widget.bridge=function(g,f){var h=f.prototype.widgetFullName||g;b.fn[g]=function(k){var i=typeof k==="string",j=d.call(arguments,1),l=this;k=!i&&j.length?b.widget.extend.apply(null,[k].concat(j)):k;if(i){this.each(function(){var n,m=b.data(this,h);if(!m){return b.error("cannot call methods on "+g+" prior to initialization; attempted to call method '"+k+"'")}if(!b.isFunction(m[k])||k.charAt(0)==="_"){return b.error("no such method '"+k+"' for "+g+" widget instance")}n=m[k].apply(m,j);if(n!==m&&n!==e){l=n&&n.jquery?l.pushStack(n.get()):n;return false}})}else{this.each(function(){var m=b.data(this,h);if(m){m.option(k||{})._init()}else{b.data(this,h,new f(k,this))}})}return l}};b.Widget=function(){};b.Widget._childConstructors=[];b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:false,create:null},_createWidget:function(f,g){g=b(g||this.defaultElement||this)[0];this.element=b(g);this.uuid=a++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=b.widget.extend({},this.options,this._getCreateOptions(),f);this.bindings=b();this.hoverable=b();this.focusable=b();if(g!==this){b.data(g,this.widgetFullName,this);this._on(true,this.element,{remove:function(h){if(h.target===g){this.destroy()}}});this.document=b(g.style?g.ownerDocument:g.document||g);this.window=b(this.document[0].defaultView||this.document[0].parentWindow)}this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:b.noop,_getCreateEventData:b.noop,_create:b.noop,_init:b.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(b.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:b.noop,widget:function(){return this.element},option:function(j,k){var f=j,l,h,g;if(arguments.length===0){return b.widget.extend({},this.options)}if(typeof j==="string"){f={};l=j.split(".");j=l.shift();if(l.length){h=f[j]=b.widget.extend({},this.options[j]);for(g=0;g<l.length-1;g++){h[l[g]]=h[l[g]]||{};h=h[l[g]]}j=l.pop();if(k===e){return h[j]===e?null:h[j]}h[j]=k}else{if(k===e){return this.options[j]===e?null:this.options[j]}f[j]=k}}this._setOptions(f);return this},_setOptions:function(f){var g;for(g in f){this._setOption(g,f[g])}return this},_setOption:function(f,g){this.options[f]=g;if(f==="disabled"){this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!g).attr("aria-disabled",g);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_on:function(i,h,g){var j,f=this;if(typeof i!=="boolean"){g=h;h=i;i=false}if(!g){g=h;h=this.element;j=this.widget()}else{h=j=b(h);this.bindings=this.bindings.add(h)}b.each(g,function(p,o){function m(){if(!i&&(f.options.disabled===true||b(this).hasClass("ui-state-disabled"))){return}return(typeof o==="string"?f[o]:o).apply(f,arguments)}if(typeof o!=="string"){m.guid=o.guid=o.guid||m.guid||b.guid++}var n=p.match(/^(\w+)\s*(.*)$/),l=n[1]+f.eventNamespace,k=n[2];if(k){j.delegate(k,l,m)}else{h.bind(l,m)}})},_off:function(g,f){f=(f||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;g.unbind(f).undelegate(f)},_delay:function(i,h){function g(){return(typeof i==="string"?f[i]:i).apply(f,arguments)}var f=this;return setTimeout(g,h||0)},_hoverable:function(f){this.hoverable=this.hoverable.add(f);this._on(f,{mouseenter:function(g){b(g.currentTarget).addClass("ui-state-hover")},mouseleave:function(g){b(g.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(f){this.focusable=this.focusable.add(f);this._on(f,{focusin:function(g){b(g.currentTarget).addClass("ui-state-focus")},focusout:function(g){b(g.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(f,g,h){var k,j,i=this.options[f];h=h||{};g=b.Event(g);g.type=(f===this.widgetEventPrefix?f:this.widgetEventPrefix+f).toLowerCase();g.target=this.element[0];j=g.originalEvent;if(j){for(k in j){if(!(k in g)){g[k]=j[k]}}}this.element.trigger(g,h);return !(b.isFunction(i)&&i.apply(this.element[0],[g].concat(h))===false||g.isDefaultPrevented())}};b.each({show:"fadeIn",hide:"fadeOut"},function(g,f){b.Widget.prototype["_"+g]=function(j,i,l){if(typeof i==="string"){i={effect:i}}var k,h=!i?g:i===true||typeof i==="number"?f:i.effect||f;i=i||{};if(typeof i==="number"){i={duration:i}}k=!b.isEmptyObject(i);i.complete=l;if(i.delay){j.delay(i.delay)}if(k&&b.effects&&b.effects.effect[h]){j[g](i)}else{if(h!==g&&j[h]){j[h](i.duration,i.easing,l)}else{j.queue(function(m){b(this)[g]();if(l){l.call(j[0])}m()})}}}})})(window.comtop.cQuery);(function(a){a.cookie=function(c,k,n){if(typeof k!="undefined"){n=n||{};if(k===null){k="";n=$.extend({},n);n.expires=-1}var f="";if(n.expires&&(typeof n.expires=="number"||n.expires.toUTCString)){var g;if(typeof n.expires=="number"){g=new Date();g.setTime(g.getTime()+(n.expires*24*60*60*1000))}else{g=n.expires}f="; expires="+g.toUTCString()}var m=n.path?"; path="+(n.path):"";var h=n.domain?"; domain="+(n.domain):"";var b=n.secure?"; secure":"";document.cookie=[c,"=",encodeURIComponent(k),f,m,h,b].join("")}else{var e=null;if(document.cookie&&document.cookie!=""){var l=document.cookie.split(";");for(var j=0;j<l.length;j++){var d=a.trim(l[j]);if(d.substring(0,c.length+1)==(c+"=")){e=decodeURIComponent(d.substring(c.length+1));break}}}return e}}})(window.comtop.cQuery);var _canLog=true;function _log(i,j){if(!_canLog){return}var e=Array.prototype.slice.apply(arguments,[1]);var l=new Date();var h=l.getHours()+":"+l.getMinutes()+":"+l.getSeconds()+"."+l.getMilliseconds();e[0]=h+" - "+e[0];try{switch(i){case"info":window.console.info.apply(window.console,e);break;case"warn":window.console.warn.apply(window.console,e);break;default:window.console.log.apply(window.console,e);break}}catch(k){if(!window.console){_canLog=false}}}function logMsg(b){Array.prototype.unshift.apply(arguments,["debug"]);_log.apply(this,arguments)}var getDynaTreePersistData=null;var DTNodeStatus_Error=-1;var DTNodeStatus_Loading=1;var DTNodeStatus_Ok=0;(function($){var Class={create:function(){return function(){this.initialize.apply(this,arguments)}}};function getDtNodeFromElement(el){alert("getDtNodeFromElement is deprecated");return $.ui.dynatree.getNode(el)}function noop(){}var DynaTreeNode=Class.create();DynaTreeNode.prototype={initialize:function(parent,tree,data){this.parent=parent;this.tree=tree;if(typeof data==="string"){data={title:data}}if(data.key===undefined){data.key="_"+tree._nodeCount++}this.data=$.extend({},$.ui.dynatree.nodedatadefaults,data);this.li=null;this.span=null;this.ul=null;this.childList=null;this._isLoading=false;this.hasSubSel=false;this.bExpanded=false;this.bSelected=false},toString:function(){return"DynaTreeNode<"+this.data.key+">: '"+this.data.title+"'"},toDict:function(recursive,callback){var dict=$.extend({},this.data);dict.activate=(this.tree.activeNode===this);dict.focus=(this.tree.focusNode===this);dict.expand=this.bExpanded;dict.select=this.bSelected;if(callback){callback(dict)}if(recursive&&this.childList){dict.children=[];for(var i=0,l=this.childList.length;i<l;i++){dict.children.push(this.childList[i].toDict(true,callback))}}else{delete dict.children}return dict},disable:function(){this.data.disable=true;var li=$(this.li);this.expand(false);li.children().removeClass("dynatree-active").addClass("dynatree-node-disable");li.find(".dynatree-checkbox").removeClass("dynatree-checkbox").addClass("dynatree-checkbox-disable");li.find(".dynatree-radio").removeClass("dynatree-radio").addClass("dynatree-radio-disable")},enable:function(){this.data.disable=false;var li=$(this.li);li.children().removeClass("dynatree-node-disable");li.find(".dynatree-checkbox-disable").removeClass("dynatree-checkbox-disable").addClass("dynatree-checkbox");li.find(".dynatree-radio-disable").removeClass("dynatree-radio-disable").addClass("dynatree-radio")},fromDict:function(dict){var children=dict.children;if(children===undefined){this.data=$.extend(this.data,dict);this.render();return}dict=$.extend({},dict);dict.children=undefined;this.data=$.extend(this.data,dict);this.removeChildren();this.addChild(children)},_getInnerHtml:function(){var tree=this.tree,opts=tree.options,cache=tree.cache,level=this.getLevel(),data=this.data,res="",imageSrc;if(level<opts.minExpandLevel){if(level>1){res+=cache.tagConnector}}else{if(this.hasChildren()!==false){res+=cache.tagExpander}else{res+=cache.tagConnector}}if(opts.checkbox&&data.hideCheckbox!==true&&!data.isStatusNode){res+=cache.tagCheckbox}if(data.icon){if(data.icon.charAt(0)==="/"){imageSrc=data.icon}else{imageSrc=opts.imagePath+data.icon}res+="<img src='"+imageSrc+"' alt='' />"}else{if(data.icon===false){}else{res+=cache.tagNodeIcon}}var nodeTitle="";if(opts.onCustomRender){nodeTitle=opts.onCustomRender.call(tree,this)||""}if(!nodeTitle){var tooltip=data.tooltip?' title="'+data.tooltip.replace(/\"/g,"&quot;")+'"':"",href=data.href||"javascript:;";if(opts.noLink||data.noLink){nodeTitle='<span style="display:inline-block;" class="'+opts.classNames.title+'"'+tooltip+">"+data.title+"</span>"}else{nodeTitle='<a hidefocus="true" onclick="return false;"  href="'+href+'" class="'+opts.classNames.title+'"'+tooltip+">"+data.title+"</a>"}}res+=nodeTitle;return res},_fixOrder:function(){var cl=this.childList;if(!cl||!this.ul){return}var childLI=this.ul.firstChild;for(var i=0,l=cl.length-1;i<l;i++){var childNode1=cl[i];var childNode2=childLI.dtnode;if(childNode1!==childNode2){this.tree.logDebug("_fixOrder: mismatch at index "+i+": "+childNode1+" != "+childNode2);this.ul.insertBefore(childNode1.li,childNode2.li)}else{childLI=childLI.nextSibling}}},render:function(useEffects,includeInvisible){var tree=this.tree,parent=this.parent,data=this.data,opts=tree.options,cn=opts.classNames,isLastSib=this.isLastSibling(),firstTime=false;if(!parent&&!this.ul){this.li=this.span=null;this.ul=document.createElement("ul");if(opts.minExpandLevel>1){this.ul.className=cn.container+" "+cn.noConnector}else{this.ul.className=cn.container}}else{if(parent){if(!this.li){firstTime=true;this.li=document.createElement("li");this.li.dtnode=this;if(data.key&&opts.generateIds){this.li.id=opts.idPrefix+data.key}this.span=document.createElement("span");this.span.className=cn.title;this.li.appendChild(this.span);if(!parent.ul){parent.ul=document.createElement("ul");parent.ul.style.display="none";parent.li.appendChild(parent.ul)}parent.ul.appendChild(this.li)}this.span.innerHTML=this._getInnerHtml();var cnList=[];cnList.push(cn.node);if(data.isFolder){cnList.push(cn.folder)}if(this.bExpanded){cnList.push(cn.expanded)}if(this.hasChildren()!==false){cnList.push(cn.hasChildren)}if(data.isLazy&&this.childList===null){cnList.push(cn.lazy)}if(isLastSib){cnList.push(cn.lastsib)}if(this.bSelected){cnList.push(cn.selected)}if(this.hasSubSel){cnList.push(cn.partsel)}if(tree.activeNode===this){cnList.push(cn.active)}if(data.addClass){cnList.push(data.addClass)}if(data._firstNode){cnList.push("dynatree-first-node")}if(data.partSelect){cnList.push(cn.partsel)}cnList.push(cn.combinedExpanderPrefix+(this.bExpanded?"e":"c")+(data.isLazy&&this.childList===null?"d":"")+(isLastSib?"l":""));cnList.push(cn.combinedIconPrefix+(this.bExpanded?"e":"c")+(data.isFolder?"f":""));this.span.className=cnList.join(" ");this.li.className=isLastSib?cn.lastsib:"";if(data.disable){this.disable()}if(data._customStyle){$(this.span).find("a").attr("style",data._customStyle)}if(typeof data.customerClass==="string"){$(this.span).find("a").addClass(data.customerClass)}if(firstTime&&opts.onCreate){opts.onCreate.call(tree,this,this.span)}if(opts.onRender){opts.onRender.call(tree,this,this.span)}}}if(this.li){$(this.li).data("nodeData",this.data)}if((this.bExpanded||includeInvisible===true)&&$.isArray(this.childList)){for(var i=0,l=this.childList.length;i<l;i++){this.childList[i].render(false,includeInvisible)}this._fixOrder()}if(this.ul){var isHidden=(this.ul.style.display==="none");var isExpanded=!!this.bExpanded;if(useEffects&&opts.fx&&(isHidden===isExpanded)){var duration=opts.fx.duration||200;$(this.ul).animate(opts.fx,duration)}else{this.ul.style.display=(this.bExpanded||!parent)?"":"none"}}},getKeyPath:function(excludeSelf){var path=[];this.visitParents(function(node){if(node.parent){path.unshift(node.data.key)}},!excludeSelf);return"/"+path.join(this.tree.options.keyPathSeparator)},getParent:function(){return this.parent},getChildren:function(){if(this.hasChildren()===undefined){return undefined}return this.childList},hasChildren:function(){if(this.data.isLazy){if(this.childList===null||this.childList===undefined){return undefined}else{if(this.childList.length===0){return false}else{if(this.childList.length===1&&this.childList[0].isStatusNode()){return undefined}}}return true}return !!this.childList},isFirstSibling:function(){var p=this.parent;return !p||p.childList[0]===this},isLastSibling:function(){var p=this.parent;return !p||p.childList[p.childList.length-1]===this},isLoading:function(){return !!this._isLoading},getPrevSibling:function(){if(!this.parent){return null}var ac=this.parent.childList;for(var i=1,l=ac.length;i<l;i++){if(ac[i]===this){return ac[i-1]}}return null},getNextSibling:function(){if(!this.parent){return null}var ac=this.parent.childList;for(var i=0,l=ac.length-1;i<l;i++){if(ac[i]===this){return ac[i+1]}}return null},isStatusNode:function(){return(this.data.isStatusNode===true)},isChildOf:function(otherNode){return(this.parent&&this.parent===otherNode)},isDescendantOf:function(otherNode){if(!otherNode){return false}var p=this.parent;while(p){if(p===otherNode){return true}p=p.parent}return false},countChildren:function(){var cl=this.childList;if(!cl){return 0}var n=cl.length;for(var i=0,l=n;i<l;i++){var child=cl[i];n+=child.countChildren()}return n},sortChildren:function(cmp,deep){var cl=this.childList;if(!cl){return}cmp=cmp||function(a,b){var x=a.data.title.toLowerCase(),y=b.data.title.toLowerCase();return x===y?0:x>y?1:-1};cl.sort(cmp);if(deep){for(var i=0,l=cl.length;i<l;i++){if(cl[i].childList){cl[i].sortChildren(cmp,"$norender$")}}}if(deep!=="$norender$"){this.render()}},_setStatusNode:function(data){var firstChild=(this.childList?this.childList[0]:null);if(!data){if(firstChild&&firstChild.isStatusNode()){try{if(this.ul){this.ul.removeChild(firstChild.li);firstChild.li=null}}catch(e){}if(this.childList.length===1){this.childList=[]}else{this.childList.shift()}}}else{if(firstChild){data.isStatusNode=true;data.key="_statusNode";firstChild.data=data;firstChild.render()}else{data.isStatusNode=true;data.key="_statusNode";firstChild=this.addChild(data)}}},setLazyNodeStatus:function(lts,opts){var tooltip=(opts&&opts.tooltip)?opts.tooltip:null,info=(opts&&opts.info)?" ("+opts.info+")":"";switch(lts){case DTNodeStatus_Ok:this._setStatusNode(null);$(this.span).removeClass(this.tree.options.classNames.nodeLoading);this._isLoading=false;if(this.tree.options.autoFocus){if(this===this.tree.tnRoot&&this.childList&&this.childList.length>0){this.childList[0].focus()}else{this.focus()}}break;case DTNodeStatus_Loading:this._isLoading=true;$(this.span).addClass(this.tree.options.classNames.nodeLoading);if(!this.parent){this._setStatusNode({title:this.tree.options.strings.loading+info,tooltip:tooltip,addClass:this.tree.options.classNames.nodeWait})}break;case DTNodeStatus_Error:this._isLoading=false;this._setStatusNode({title:this.tree.options.strings.loadError+info,tooltip:tooltip,addClass:this.tree.options.classNames.nodeError});break;default:throw"Bad LazyNodeStatus: '"+lts+"'."}},_parentList:function(includeRoot,includeSelf){var l=[];var dtn=includeSelf?this:this.parent;while(dtn){if(includeRoot||dtn.parent){l.unshift(dtn)}dtn=dtn.parent}return l},getLevel:function(){var level=0;var dtn=this.parent;while(dtn){level++;dtn=dtn.parent}return level},_getTypeForOuterNodeEvent:function(event){var cns=this.tree.options.classNames;var target=event.target;if(target.className.indexOf(cns.node)<0){return null}var eventX=event.pageX-target.offsetLeft;var eventY=event.pageY-target.offsetTop;for(var i=0,l=target.childNodes.length;i<l;i++){var cn=target.childNodes[i];var x=cn.offsetLeft-target.offsetLeft;var y=cn.offsetTop-target.offsetTop;var nx=cn.clientWidth,ny=cn.clientHeight;if(eventX>=x&&eventX<=(x+nx)&&eventY>=y&&eventY<=(y+ny)){if(cn.className==cns.title){return"title"}else{if(cn.className==cns.expander){return"expander"}else{if(cn.className==cns.checkbox){return"checkbox"}else{if(cn.className==cns.nodeIcon){return"icon"}}}}}}return"prefix"},getEventTargetType:function(event){var tcn=event&&event.target?event.target.className:"",cns=this.tree.options.classNames;if(tcn===cns.title){return"title"}else{if(tcn===cns.expander){return"expander"}else{if(tcn===cns.checkbox){return"checkbox"}else{if(tcn===cns.nodeIcon){return"icon"}else{if(tcn===cns.empty||tcn===cns.vline||tcn===cns.connector){return"prefix"}else{if(tcn.indexOf(cns.node)>=0){return this._getTypeForOuterNodeEvent(event)}}}}}}return null},isVisible:function(){var parents=this._parentList(true,false);for(var i=0,l=parents.length;i<l;i++){if(!parents[i].bExpanded){return false}}return true},makeVisible:function(){var parents=this._parentList(true,false);for(var i=0,l=parents.length;i<l;i++){parents[i]._expand(true)}},focus:function(){this.makeVisible();try{$(this.span).find(">a").focus()}catch(e){}},isFocused:function(){return(this.tree.tnFocused===this)},_activate:function(flag,fireEvents,reActive){this.tree.logDebug("dtnode._activate(%o, fireEvents=%o) - %o",flag,fireEvents,this);var opts=this.tree.options;if(this.data.isStatusNode){return}if(fireEvents&&opts.onQueryActivate&&opts.onQueryActivate.call(this.tree,flag,this)===false){return}if(flag){if(this.tree.activeNode){if(this.tree.activeNode===this&&!reActive){return}this.tree.activeNode.deactivate()}if(opts.activeVisible){this.makeVisible()}this.tree.activeNode=this;if(opts.persist){$.cookie(opts.cookieId+"-active",this.data.key,opts.cookie)}this.tree.persistence.activeKey=this.data.key;$(this.span).addClass(opts.classNames.active);if(fireEvents&&opts.onActivate){opts.onActivate.call(this.tree,this)}}else{if(this.tree.activeNode===this){if(opts.onQueryActivate&&opts.onQueryActivate.call(this.tree,false,this)===false){return}$(this.span).removeClass(opts.classNames.active);if(opts.persist){$.cookie(opts.cookieId+"-active","",opts.cookie)}this.tree.persistence.activeKey=null;this.tree.activeNode=null;if(fireEvents&&opts.onDeactivate){opts.onDeactivate.call(this.tree,this)}}}},activate:function(reActive){this._activate(true,true,reActive)},activateSilently:function(){this._activate(true,false)},deactivate:function(){this._activate(false,true)},isActive:function(){return(this.tree.activeNode===this)},_userActivate:function(){var activate=true;var expand=false;if(this.data.isFolder){switch(this.tree.options.clickFolderMode){case 2:activate=false;expand=true;break;case 3:activate=expand=true;break}}if(this.parent===null){expand=false}if(expand){this.toggleExpand()}if(activate){this.activate(this.tree.options.reactive)}},_setSubSel:function(hasSubSel){if(hasSubSel){this.hasSubSel=true;$(this.span).addClass(this.tree.options.classNames.partsel)}else{this.hasSubSel=false;$(this.span).removeClass(this.tree.options.classNames.partsel)}},_updatePartSelectionState:function(){var sel;var initBSelected=this.bSelected;if(!this.hasChildren()){sel=(this.bSelected&&!this.data.unselectable&&!this.data.isStatusNode);this._setSubSel(false);return sel}var i,l,cl=this.childList,allSelected=true,allDeselected=true;for(i=0,l=cl.length;i<l;i++){var n=cl[i],s=n._updatePartSelectionState();if(s!==false){allDeselected=false}if(s!==true){allSelected=false}}if(allSelected){sel=true}else{if(allDeselected){sel=false}else{sel=undefined}}this._setSubSel(sel===undefined);this.bSelected=(sel===true);if(this.tree.options.selectMode==4){this.bSelected=initBSelected}return sel},_fixSelectionState:function(flag){var p,i,l;if(this.bSelected){this.visit(function(node){node.parent._setSubSel(true);if(!node.data.unselectable){node._select(true,false,false)}});p=this.parent;while(p){p._setSubSel(true);var allChildsSelected=true;for(i=0,l=p.childList.length;i<l;i++){var n=p.childList[i];if(!n.bSelected&&!n.data.isStatusNode&&!n.data.unselectable){allChildsSelected=false;break}}if(allChildsSelected&&!flag){p._select(true,false,false)}p=p.parent}}else{this._setSubSel(false);this.visit(function(node){node._setSubSel(false);node._select(false,false,false)});p=this.parent;while(p){p._select(false,false,false);var isPartSel=false;for(i=0,l=p.childList.length;i<l;i++){if(p.childList[i].bSelected||p.childList[i].hasSubSel){isPartSel=true;break}}p._setSubSel(isPartSel);p=p.parent}}},_select:function(sel,fireEvents,deep){var opts=this.tree.options;if(this.data.isStatusNode){return}if(this.bSelected===sel){return}if(fireEvents&&opts.onQuerySelect&&opts.onQuerySelect.call(this.tree,sel,this)===false){return}if(opts.selectMode==1&&sel){this.tree.visit(function(node){if(node.bSelected){node._select(false,false,false);return false}})}this.bSelected=sel;if(deep&&opts.selectMode===3){this._fixSelectionState()}if(deep&&opts.selectMode===4){this._fixSelectionState(true)}if(sel){if(opts.persist){this.tree.persistence.addSelect(this.data.key)}$(this.span).addClass(opts.classNames.selected);if(fireEvents&&opts.onSelect){opts.onSelect.call(this.tree,true,this)}}else{if(opts.persist){this.tree.persistence.clearSelect(this.data.key)}$(this.span).removeClass(opts.classNames.selected);if(fireEvents&&opts.onSelect){opts.onSelect.call(this.tree,false,this)}}},select:function(sel){if(this.data.unselectable){return this.bSelected}return this._select(sel!==false,true,true)},toggleSelect:function(){return this.select(!this.bSelected)},isSelected:function(){return this.bSelected},isLazy:function(){return !!this.data.isLazy},_loadContent:function(){try{var opts=this.tree.options;this.tree.logDebug("_loadContent: start - %o",this);this.setLazyNodeStatus(DTNodeStatus_Loading);if(true===opts.onLazyRead.call(this.tree,this)){this.setLazyNodeStatus(DTNodeStatus_Ok);this.tree.logDebug("_loadContent: succeeded - %o",this)}}catch(e){this.tree.logWarning("_loadContent: failed - %o",e);this.setLazyNodeStatus(DTNodeStatus_Error,{tooltip:""+e})}},_expand:function(bExpand,forceSync){if(this.bExpanded===bExpand){this.tree.logDebug("dtnode._expand(%o) IGNORED - %o",bExpand,this);return}this.tree.logDebug("dtnode._expand(%o) - %o",bExpand,this);var opts=this.tree.options;if(!bExpand&&this.getLevel()<opts.minExpandLevel){this.tree.logDebug("dtnode._expand(%o) prevented collapse - %o",bExpand,this);return}if(opts.onQueryExpand&&opts.onQueryExpand.call(this.tree,bExpand,this)===false){return}this.bExpanded=bExpand;if(opts.persist){if(bExpand){this.tree.persistence.addExpand(this.data.key)}else{this.tree.persistence.clearExpand(this.data.key)}}var allowEffects=!(this.data.isLazy&&this.childList===null)&&!this._isLoading&&!forceSync;this.render(allowEffects);if(this.bExpanded&&this.parent&&opts.autoCollapse){var parents=this._parentList(false,true);for(var i=0,l=parents.length;i<l;i++){parents[i].collapseSiblings()}}if(opts.activeVisible&&this.tree.activeNode&&!this.tree.activeNode.isVisible()){this.tree.activeNode.deactivate()}if(bExpand&&this.data.isLazy&&this.childList===null&&!this._isLoading){this._loadContent();return}if(opts.onExpand){opts.onExpand.call(this.tree,bExpand,this)}},isExpanded:function(){return this.bExpanded},expand:function(flag){flag=(flag!==false);if(!this.childList&&!this.data.isLazy&&flag){return}else{if(this.parent===null&&!flag){return}}this._expand(flag)},scheduleAction:function(mode,ms){if(this.tree.timer){clearTimeout(this.tree.timer);this.tree.logDebug("clearTimeout(%o)",this.tree.timer)}var self=this;switch(mode){case"cancel":break;case"expand":this.tree.timer=setTimeout(function(){self.tree.logDebug("setTimeout: trigger expand");self.expand(true)},ms);break;case"activate":this.tree.timer=setTimeout(function(){self.tree.logDebug("setTimeout: trigger activate");self.activate()},ms);break;default:throw"Invalid mode "+mode}this.tree.logDebug("setTimeout(%s, %s): %s",mode,ms,this.tree.timer)},toggleExpand:function(){this.expand(!this.bExpanded)},collapseSiblings:function(){if(this.parent===null){return}var ac=this.parent.childList;for(var i=0,l=ac.length;i<l;i++){if(ac[i]!==this&&ac[i].bExpanded){ac[i]._expand(false)}}},_onClick:function(event){var targetType=this.getEventTargetType(event);if(targetType==="expander"){this.toggleExpand()}else{if(targetType==="checkbox"){this.toggleSelect()}else{this._userActivate();var aTag=this.span.getElementsByTagName("a");if(aTag[0]){}else{return true}}}},_onDblClick:function(event){},_onKeydown:function(event){var handled=true,sib;switch(event.which){case 107:case 187:if(!this.bExpanded){this.toggleExpand()}break;case 109:case 189:if(this.bExpanded){this.toggleExpand()}break;case 32:this._userActivate();break;case 8:if(this.parent){this.parent.focus()}break;case 37:if(this.bExpanded){this.toggleExpand();this.focus()}else{if(this.parent&&this.parent.parent){this.parent.focus()}}break;case 39:if(!this.bExpanded&&(this.childList||this.data.isLazy)){this.toggleExpand();this.focus()}else{if(this.childList){this.childList[0].focus()}}break;case 38:sib=this.getPrevSibling();while(sib&&sib.bExpanded&&sib.childList){sib=sib.childList[sib.childList.length-1]}if(!sib&&this.parent&&this.parent.parent){sib=this.parent}if(sib){sib.focus()}break;case 40:if(this.bExpanded&&this.childList){sib=this.childList[0]}else{var parents=this._parentList(false,true);for(var i=parents.length-1;i>=0;i--){sib=parents[i].getNextSibling();if(sib){break}}}if(sib){sib.focus()}break;default:handled=false}if(handled){event.preventDefault()}},_onKeypress:function(event){},_onFocus:function(event){var opts=this.tree.options;if(event.type=="blur"||event.type=="focusout"){if(opts.onBlur){opts.onBlur.call(this.tree,this)}if(this.tree.tnFocused){$(this.tree.tnFocused.span).removeClass(opts.classNames.focused)}this.tree.tnFocused=null;if(opts.persist){$.cookie(opts.cookieId+"-focus","",opts.cookie)}}else{if(event.type=="focus"||event.type=="focusin"){if(this.tree.tnFocused&&this.tree.tnFocused!==this){this.tree.logDebug("dtnode.onFocus: out of sync: curFocus: %o",this.tree.tnFocused);$(this.tree.tnFocused.span).removeClass(opts.classNames.focused)}this.tree.tnFocused=this;if(opts.onFocus){opts.onFocus.call(this.tree,this)}$(this.tree.tnFocused.span).addClass(opts.classNames.focused);if(opts.persist){$.cookie(opts.cookieId+"-focus",this.data.key,opts.cookie)}}}},visit:function(fn,includeSelf){var res=true;if(includeSelf===true){res=fn(this);if(res===false||res=="skip"){return res}}if(this.childList){for(var i=0,l=this.childList.length;i<l;i++){res=this.childList[i].visit(fn,true);if(res===false){break}}}return res},visitParents:function(fn,includeSelf){if(includeSelf&&fn(this)===false){return false}var p=this.parent;while(p){if(fn(p)===false){return false}p=p.parent}return true},remove:function(){if(this===this.tree.root){throw"Cannot remove system root"}this.parent.removeChild(this);this.parent.render()},removeChild:function(tn){var ac=this.childList;if(ac.length==1){if(tn!==ac[0]){throw"removeChild: invalid child"}this.removeChildren();$(this.ul).addClass("tree-hide-ul");return}if(tn===this.tree.activeNode){tn.deactivate()}if(this.tree.options.persist){if(tn.bSelected){this.tree.persistence.clearSelect(tn.data.key)}if(tn.bExpanded){this.tree.persistence.clearExpand(tn.data.key)}}tn.removeChildren(true);if(this.ul&&tn.li){this.ul.removeChild(tn.li)}for(var i=0,l=ac.length;i<l;i++){if(ac[i]===tn){this.childList.splice(i,1);break}}},removeChildren:function(isRecursiveCall,retainPersistence){this.tree.logDebug("%s.removeChildren(%o)",this,isRecursiveCall);var tree=this.tree;var ac=this.childList;if(ac){for(var i=0,l=ac.length;i<l;i++){var tn=ac[i];if(tn===tree.activeNode&&!retainPersistence){tn.deactivate()}if(this.tree.options.persist&&!retainPersistence){if(tn.bSelected){this.tree.persistence.clearSelect(tn.data.key)}if(tn.bExpanded){this.tree.persistence.clearExpand(tn.data.key)}}tn.removeChildren(true,retainPersistence);if(this.ul){$("li",$(this.ul)).remove()}}this.childList=null}if(!isRecursiveCall){this._isLoading=false;this.render()}},setTitle:function(title){this.fromDict({title:title})},reload:function(force){throw"Use reloadChildren() instead"},reloadChildren:function(callback){if(this.parent===null){throw"Use tree.reload() instead"}else{if(!this.data.isLazy){throw"node.reloadChildren() requires lazy nodes."}}if(callback){var self=this;var eventType="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key;this.tree.$tree.bind(eventType,function(e,node,isOk){self.tree.$tree.unbind(eventType);self.tree.logDebug("loaded %o, %o, %o",e,node,isOk);if(node!==self){throw"got invalid load event"}callback.call(self.tree,node,isOk)})}this.removeChildren();this._loadContent()},_loadKeyPath:function(keyPath,callback){var tree=this.tree;tree.logDebug("%s._loadKeyPath(%s)",this,keyPath);if(keyPath===""){throw"Key path must not be empty"}var segList=keyPath.split(tree.options.keyPathSeparator);if(segList[0]===""){throw"Key path must be relative (don't start with '/')"}var seg=segList.shift();if(this.childList){for(var i=0,l=this.childList.length;i<l;i++){var child=this.childList[i];if(child.data.key===seg){if(segList.length===0){callback.call(tree,child,"ok")}else{if(child.data.isLazy&&(child.childList===null||child.childList===undefined)){tree.logDebug("%s._loadKeyPath(%s) -> reloading %s...",this,keyPath,child);var self=this;child.reloadChildren(function(node,isOk){if(isOk){tree.logDebug("%s._loadKeyPath(%s) -> reloaded %s.",node,keyPath,node);callback.call(tree,child,"loaded");node._loadKeyPath(segList.join(tree.options.keyPathSeparator),callback)}else{tree.logWarning("%s._loadKeyPath(%s) -> reloadChildren() failed.",self,keyPath);callback.call(tree,child,"error")}})}else{callback.call(tree,child,"loaded");child._loadKeyPath(segList.join(tree.options.keyPathSeparator),callback)}}return}}}callback.call(tree,undefined,"notfound",seg,segList.length===0);tree.logWarning("Node not found: "+seg);return},resetLazy:function(){if(this.parent===null){throw"Use tree.reload() instead"}else{if(!this.data.isLazy){throw"node.resetLazy() requires lazy nodes."}}this.expand(false);this.removeChildren()},_addChildNode:function(dtnode,beforeNode){var tree=this.tree,opts=tree.options,pers=tree.persistence;dtnode.parent=this;if(this.childList===null){this.childList=[]}else{if(!beforeNode){if(this.childList.length>0){$(this.childList[this.childList.length-1].span).removeClass(opts.classNames.lastsib)}}}if(beforeNode){var iBefore=$.inArray(beforeNode,this.childList);if(iBefore<0){throw"<beforeNode> must be a child of <this>"}this.childList.splice(iBefore,0,dtnode)}else{this.childList.push(dtnode)}var isInitializing=tree.isInitializing();if(opts.persist&&pers.cookiesFound&&isInitializing){if(pers.activeKey===dtnode.data.key){tree.activeNode=dtnode}if(pers.focusedKey===dtnode.data.key){tree.focusNode=dtnode}dtnode.bExpanded=($.inArray(dtnode.data.key,pers.expandedKeyList)>=0);dtnode.bSelected=($.inArray(dtnode.data.key,pers.selectedKeyList)>=0)}else{if(dtnode.data.activate){tree.activeNode=dtnode;if(opts.persist){pers.activeKey=dtnode.data.key}}if(dtnode.data.focus){tree.focusNode=dtnode;if(opts.persist){pers.focusedKey=dtnode.data.key}}dtnode.bExpanded=(dtnode.data.expand===true);if(dtnode.bExpanded&&opts.persist){pers.addExpand(dtnode.data.key)}dtnode.bSelected=(dtnode.data.select===true);if(dtnode.bSelected&&opts.persist){pers.addSelect(dtnode.data.key)}}if(opts.minExpandLevel>=dtnode.getLevel()){this.bExpanded=true}if(dtnode.bSelected&&opts.selectMode==3){var p=this;while(p){if(!p.hasSubSel){p._setSubSel(true)}p=p.parent}}if(tree.bEnableUpdate){this.render()}return dtnode},addChild:function(obj,beforeNode){$(this.ul).removeClass("tree-hide-ul");if(typeof(obj)=="string"){throw"Invalid data type for "+obj}else{if(!obj||obj.length===0){return}else{if(obj instanceof DynaTreeNode){return this._addChildNode(obj,beforeNode)}}}if(!obj.length){obj=[obj]}var prevFlag=this.tree.enableUpdate(false);var tnFirst=null;for(var i=0,l=obj.length;i<l;i++){var data=obj[i];var dtnode=this._addChildNode(new DynaTreeNode(this,this.tree,data),beforeNode);if(!tnFirst){tnFirst=dtnode}if(data.children){dtnode.addChild(data.children,null)}}this.tree.enableUpdate(prevFlag);return tnFirst},append:function(obj){this.tree.logWarning("node.append() is deprecated (use node.addChild() instead).");return this.addChild(obj,null)},appendAjax:function(ajaxOptions){var self=this;this.removeChildren(false,true);this.setLazyNodeStatus(DTNodeStatus_Loading);if(ajaxOptions.debugLazyDelay){var ms=ajaxOptions.debugLazyDelay;ajaxOptions.debugLazyDelay=0;this.tree.logInfo("appendAjax: waiting for debugLazyDelay "+ms);setTimeout(function(){self.appendAjax(ajaxOptions)},ms);return}var orgSuccess=ajaxOptions.success,orgError=ajaxOptions.error,eventType="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key;var options=$.extend({},this.tree.options.ajaxDefaults,ajaxOptions,{success:function(data,textStatus,jqXHR){var prevPhase=self.tree.phase;self.tree.phase="init";if(options.postProcess){data=options.postProcess.call(this,data,this.dataType)}else{if(data&&data.hasOwnProperty("d")){data=(typeof data.d)=="string"?$.parseJSON(data.d):data.d}}if(!$.isArray(data)||data.length!==0){self.addChild(data,null)}self.tree.phase="postInit";if(orgSuccess){orgSuccess.call(options,self,data,textStatus)}self.tree.logDebug("trigger "+eventType);self.tree.$tree.trigger(eventType,[self,true]);self.tree.phase=prevPhase;self.setLazyNodeStatus(DTNodeStatus_Ok);if($.isArray(data)&&data.length===0){self.childList=[];self.render()}},error:function(jqXHR,textStatus,errorThrown){self.tree.logWarning("appendAjax failed:",textStatus,":\n",jqXHR,"\n",errorThrown);if(orgError){orgError.call(options,self,jqXHR,textStatus,errorThrown)}self.tree.$tree.trigger(eventType,[self,false]);self.setLazyNodeStatus(DTNodeStatus_Error,{info:textStatus,tooltip:""+errorThrown})}});$.ajax(options)},move:function(targetNode,mode){var pos;if(this===targetNode){return}if(!this.parent){throw"Cannot move system root"}if(mode===undefined||mode=="over"){mode="child"}var prevParent=this.parent;var targetParent=(mode==="child")?targetNode:targetNode.parent;if(targetParent.isDescendantOf(this)){throw"Cannot move a node to it's own descendant"}if(this.parent.childList.length==1){this.parent.childList=this.parent.data.isLazy?[]:null;this.parent.bExpanded=false}else{pos=$.inArray(this,this.parent.childList);if(pos<0){throw"Internal error"}this.parent.childList.splice(pos,1)}if(this.parent.ul){this.parent.ul.removeChild(this.li)}this.parent=targetParent;if(targetParent.hasChildren()){switch(mode){case"child":targetParent.childList.push(this);break;case"before":pos=$.inArray(targetNode,targetParent.childList);if(pos<0){throw"Internal error"}targetParent.childList.splice(pos,0,this);break;case"after":pos=$.inArray(targetNode,targetParent.childList);if(pos<0){throw"Internal error"}targetParent.childList.splice(pos+1,0,this);break;default:throw"Invalid mode "+mode}}else{targetParent.childList=[this]}if(!targetParent.ul){targetParent.ul=document.createElement("ul");targetParent.ul.style.display="none";targetParent.li.appendChild(targetParent.ul)}if(this.li){targetParent.ul.appendChild(this.li)}if(this.tree!==targetNode.tree){this.visit(function(node){node.tree=targetNode.tree},null,true);throw"Not yet implemented."}var setFirstNode=function(childList){for(var i=0,len=childList.length;i<len;i++){if(i==0){childList[i].data._firstNode=true}else{childList[i].data._firstNode=false}}};this.data._firstNode=false;if(!prevParent.isDescendantOf(targetParent)){if(prevParent.parent===null){setFirstNode(prevParent.childList)}prevParent.render()}if(!targetParent.isDescendantOf(prevParent)){if(prevParent.parent===null){setFirstNode(prevParent.childList)}targetParent.render()}},lastentry:undefined};var DynaTreeStatus=Class.create();DynaTreeStatus._getTreePersistData=function(cookieId,cookieOpts){var ts=new DynaTreeStatus(cookieId,cookieOpts);ts.read();return ts.toDict()};getDynaTreePersistData=DynaTreeStatus._getTreePersistData;DynaTreeStatus.prototype={initialize:function(cookieId,cookieOpts){if(cookieId===undefined){cookieId=$.ui.dynatree.prototype.options.cookieId}cookieOpts=$.extend({},$.ui.dynatree.prototype.options.cookie,cookieOpts);this.cookieId=cookieId;this.cookieOpts=cookieOpts;this.cookiesFound=undefined;this.activeKey=null;this.focusedKey=null;this.expandedKeyList=null;this.selectedKeyList=null},_log:function(msg){Array.prototype.unshift.apply(arguments,["debug"]);_log.apply(this,arguments)},read:function(){this.cookiesFound=false;var cookie=$.cookie(this.cookieId+"-active");this.activeKey=(cookie===null)?"":cookie;if(cookie!==null){this.cookiesFound=true}cookie=$.cookie(this.cookieId+"-focus");this.focusedKey=(cookie===null)?"":cookie;if(cookie!==null){this.cookiesFound=true}cookie=$.cookie(this.cookieId+"-expand");this.expandedKeyList=(cookie===null)?[]:cookie.split(",");if(cookie!==null){this.cookiesFound=true}cookie=$.cookie(this.cookieId+"-select");this.selectedKeyList=(cookie===null)?[]:cookie.split(",");if(cookie!==null){this.cookiesFound=true}},write:function(){$.cookie(this.cookieId+"-active",(this.activeKey===null)?"":this.activeKey,this.cookieOpts);$.cookie(this.cookieId+"-focus",(this.focusedKey===null)?"":this.focusedKey,this.cookieOpts);$.cookie(this.cookieId+"-expand",(this.expandedKeyList===null)?"":this.expandedKeyList.join(","),this.cookieOpts);$.cookie(this.cookieId+"-select",(this.selectedKeyList===null)?"":this.selectedKeyList.join(","),this.cookieOpts)},addExpand:function(key){if($.inArray(key,this.expandedKeyList)<0){this.expandedKeyList.push(key);$.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts)}},clearExpand:function(key){var idx=$.inArray(key,this.expandedKeyList);if(idx>=0){this.expandedKeyList.splice(idx,1);$.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts)}},addSelect:function(key){if($.inArray(key,this.selectedKeyList)<0){this.selectedKeyList.push(key);$.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts)}},clearSelect:function(key){var idx=$.inArray(key,this.selectedKeyList);if(idx>=0){this.selectedKeyList.splice(idx,1);$.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts)}},isReloading:function(){return this.cookiesFound===true},toDict:function(){return{cookiesFound:this.cookiesFound,activeKey:this.activeKey,focusedKey:this.activeKey,expandedKeyList:this.expandedKeyList,selectedKeyList:this.selectedKeyList}},lastentry:undefined};var DynaTree=Class.create();DynaTree.version="$Version:$";DynaTree.prototype={initialize:function($widget){this.phase="init";this.$widget=$widget;this.options=$widget.options;this.$tree=$widget.element;this.timer=null;this.divTree=this.$tree.get(0);_initDragAndDrop(this)},_load:function(callback){var $widget=this.$widget;var opts=this.options,self=this;this.bEnableUpdate=true;this._nodeCount=1;this.activeNode=null;this.focusNode=null;if(opts.rootVisible!==undefined){this.logWarning("Option 'rootVisible' is no longer supported.")}if(opts.minExpandLevel<1){this.logWarning("Option 'minExpandLevel' must be >= 1.");opts.minExpandLevel=1}if(opts.classNames!==$.ui.dynatree.prototype.options.classNames){opts.classNames=$.extend({},$.ui.dynatree.prototype.options.classNames,opts.classNames)}if(opts.ajaxDefaults!==$.ui.dynatree.prototype.options.ajaxDefaults){opts.ajaxDefaults=$.extend({},$.ui.dynatree.prototype.options.ajaxDefaults,opts.ajaxDefaults)}if(opts.dnd!==$.ui.dynatree.prototype.options.dnd){opts.dnd=$.extend({},$.ui.dynatree.prototype.options.dnd,opts.dnd)}this.persistence=new DynaTreeStatus(opts.cookieId,opts.cookie);if(opts.persist){if(!$.cookie){_log("warn","Please include jquery.cookie.js to use persistence.")}this.persistence.read()}this.logDebug("DynaTree.persistence: %o",this.persistence.toDict());this.cache={tagEmpty:"<span class='"+opts.classNames.empty+"'></span>",tagVline:"<span class='"+opts.classNames.vline+"'></span>",tagExpander:"<span class='"+opts.classNames.expander+"'></span>",tagConnector:"<span class='"+opts.classNames.connector+"'></span>",tagNodeIcon:"<span class='"+opts.classNames.nodeIcon+"'></span>",tagCheckbox:"<span class='"+opts.classNames.checkbox+"'></span>",lastentry:undefined};if(opts.children||(opts.initAjax&&opts.initAjax.url)||opts.initId){$(this.divTree).empty()}var $ulInitialize=this.$tree.find(">ul:first").hide();this.tnRoot=new DynaTreeNode(null,this,{});this.tnRoot.bExpanded=true;this.tnRoot.render();this.divTree.appendChild(this.tnRoot.ul);var root=this.tnRoot,isReloading=(opts.persist&&this.persistence.isReloading()),isLazy=false,prevFlag=this.enableUpdate(false);this.logDebug("Dynatree._load(): read tree structure...");if(opts.children){root.addChild(opts.children)}else{if(opts.initAjax&&opts.initAjax.url){isLazy=true;root.data.isLazy=true;this._reloadAjax(callback)}else{if(opts.initId){this._createFromTag(root,$("#"+opts.initId))}else{this._createFromTag(root,$ulInitialize);$ulInitialize.remove()}}}this._checkConsistency();if(!isLazy&&(opts.selectMode==3||opts.selectMode==4)){root._updatePartSelectionState()}this.logDebug("Dynatree._load(): render nodes...");this.enableUpdate(prevFlag);this.logDebug("Dynatree._load(): bind events...");this.$widget.bind();this.logDebug("Dynatree._load(): postInit...");this.phase="postInit";if(opts.persist){this.persistence.write()}if(this.focusNode&&this.focusNode.isVisible()){this.logDebug("Focus on init: %o",this.focusNode);this.focusNode.focus()}if(!isLazy){if(opts.onPostInit){opts.onPostInit.call(this,isReloading,false)}if(callback){callback.call(this,"ok")}}this.phase="idle"},_reloadAjax:function(callback){var opts=this.options;if(!opts.initAjax||!opts.initAjax.url){throw"tree.reload() requires 'initAjax' mode."}var pers=this.persistence;var ajaxOpts=$.extend({},opts.initAjax);if(ajaxOpts.addActiveKey){ajaxOpts.data.activeKey=pers.activeKey}if(ajaxOpts.addFocusedKey){ajaxOpts.data.focusedKey=pers.focusedKey}if(ajaxOpts.addExpandedKeyList){ajaxOpts.data.expandedKeyList=pers.expandedKeyList.join(",")}if(ajaxOpts.addSelectedKeyList){ajaxOpts.data.selectedKeyList=pers.selectedKeyList.join(",")}if(ajaxOpts.success){this.logWarning("initAjax: success callback is ignored; use onPostInit instead.")}if(ajaxOpts.error){this.logWarning("initAjax: error callback is ignored; use onPostInit instead.")}var isReloading=pers.isReloading();ajaxOpts.success=function(dtnode,data,textStatus){if(opts.selectMode==3){dtnode.tree.tnRoot._updatePartSelectionState()}if(opts.onPostInit){opts.onPostInit.call(dtnode.tree,isReloading,false)}if(callback){callback.call(dtnode.tree,"ok")}};ajaxOpts.error=function(dtnode,XMLHttpRequest,textStatus,errorThrown){if(opts.onPostInit){opts.onPostInit.call(dtnode.tree,isReloading,true,XMLHttpRequest,textStatus,errorThrown)}if(callback){callback.call(dtnode.tree,"error",XMLHttpRequest,textStatus,errorThrown)}};this.logDebug("Dynatree._init(): send Ajax request...");this.tnRoot.appendAjax(ajaxOpts)},toString:function(){return"Dynatree '"+this.$tree.attr("id")+"'"},toDict:function(){return this.tnRoot.toDict(true)},serializeArray:function(stopOnParents){var nodeList=this.getSelectedNodes(stopOnParents),name=this.$tree.attr("name")||this.$tree.attr("id"),arr=[];for(var i=0,l=nodeList.length;i<l;i++){arr.push({name:name,value:nodeList[i].data.key})}return arr},getPersistData:function(){return this.persistence.toDict()},logDebug:function(msg){if(this.options.debugLevel>=2){Array.prototype.unshift.apply(arguments,["debug"]);_log.apply(this,arguments)}},logInfo:function(msg){if(this.options.debugLevel>=1){Array.prototype.unshift.apply(arguments,["info"]);_log.apply(this,arguments)}},logWarning:function(msg){Array.prototype.unshift.apply(arguments,["warn"]);_log.apply(this,arguments)},isInitializing:function(){return(this.phase=="init"||this.phase=="postInit")},isReloading:function(){return(this.phase=="init"||this.phase=="postInit")&&this.options.persist&&this.persistence.cookiesFound},isUserEvent:function(){return(this.phase=="userEvent")},redraw:function(){this.tnRoot.render(false,false)},renderInvisibleNodes:function(){this.tnRoot.render(false,true)},reload:function(callback){this._load(callback)},getRoot:function(){return this.tnRoot},enable:function(){this.$widget.enable()},disable:function(){this.$widget.disable()},getNodeByKey:function(key){var el=document.getElementById(this.options.idPrefix+key);if(el){return el.dtnode?el.dtnode:null}var match=null;this.visit(function(node){if(node.data.key==key){match=node;return false}},true);return match},getActiveNode:function(){return this.activeNode},reactivate:function(setFocus){var node=this.activeNode;if(node){this.activeNode=null;node.activate();if(setFocus){node.focus()}}},getSelectedNodes:function(stopOnParents){var nodeList=[];this.tnRoot.visit(function(node){if(node.bSelected){nodeList.push(node);if(stopOnParents===true){return"skip"}}});return nodeList},activateKey:function(key){var dtnode=(key===null)?null:this.getNodeByKey(key);if(!dtnode){if(this.activeNode){this.activeNode.deactivate()}this.activeNode=null;return null}dtnode.focus();dtnode.activate();return dtnode},loadKeyPath:function(keyPath,callback){var segList=keyPath.split(this.options.keyPathSeparator);if(segList[0]===""){segList.shift()}if(segList[0]==this.tnRoot.data.key){this.logDebug("Removed leading root key.");segList.shift()}keyPath=segList.join(this.options.keyPathSeparator);return this.tnRoot._loadKeyPath(keyPath,callback)},selectKey:function(key,select){var dtnode=this.getNodeByKey(key);if(!dtnode){return null}dtnode.select(select);return dtnode},enableUpdate:function(bEnable){if(this.bEnableUpdate==bEnable){return bEnable}this.bEnableUpdate=bEnable;if(bEnable){this.redraw()}return !bEnable},count:function(){return this.tnRoot.countChildren()},visit:function(fn,includeRoot){return this.tnRoot.visit(fn,includeRoot)},_createFromTag:function(parentTreeNode,$ulParent){var self=this;$ulParent.find(">li").each(function(){var $li=$(this),$liSpan=$li.find(">span:first"),$liA=$li.find(">a:first"),title,href=null,target=null,tooltip;if($liSpan.length){title=$liSpan.html()}else{if($liA.length){title=$liA.html();href=$liA.attr("href");target=$liA.attr("target");tooltip=$liA.attr("title")}else{title=$li.html();var iPos=title.search(/<ul/i);if(iPos>=0){title=$.trim(title.substring(0,iPos))}else{title=$.trim(title)}}}var data={title:title,tooltip:tooltip,isFolder:$li.hasClass("folder"),isLazy:$li.hasClass("lazy"),expand:$li.hasClass("expanded"),select:$li.hasClass("selected"),activate:$li.hasClass("active"),focus:$li.hasClass("focused"),noLink:$li.hasClass("noLink")};if(href){data.href=href;data.target=target}if($li.attr("title")){data.tooltip=$li.attr("title")}if($li.attr("id")){data.key=$li.attr("id")}if($li.attr("data")){var dataAttr=$.trim($li.attr("data"));if(dataAttr){if(dataAttr.charAt(0)!="{"){dataAttr="{"+dataAttr+"}"}try{$.extend(data,eval("("+dataAttr+")"))}catch(e){throw ("Error parsing node data: "+e+"\ndata:\n'"+dataAttr+"'")}}}var childNode=parentTreeNode.addChild(data);var $ul=$li.find(">ul:first");if($ul.length){self._createFromTag(childNode,$ul)}})},_checkConsistency:function(){},_setDndStatus:function(sourceNode,targetNode,helper,hitMode,accept){var $source=sourceNode?$(sourceNode.span):null,$target=$(targetNode.span);if(!this.$dndMarker){this.$dndMarker=$("<div id='dynatree-drop-marker'></div>").hide().css({"z-index":1000}).prependTo($(this.divTree).parent())}if(hitMode==="after"||hitMode==="before"||hitMode==="over"){var markerOffset="0 0";switch(hitMode){case"before":this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-over");this.$dndMarker.addClass("dynatree-drop-before");markerOffset="0 -8";break;case"after":this.$dndMarker.removeClass("dynatree-drop-before dynatree-drop-over");this.$dndMarker.addClass("dynatree-drop-after");markerOffset="0 8";break;default:this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-before");this.$dndMarker.addClass("dynatree-drop-over");$target.addClass("dynatree-drop-target");markerOffset="8 0"}this.$dndMarker.show().position({my:"left top",at:"left top",of:$target,offset:markerOffset})}else{$target.removeClass("dynatree-drop-target");this.$dndMarker.hide()}if(hitMode==="after"){$target.addClass("dynatree-drop-after")}else{$target.removeClass("dynatree-drop-after")}if(hitMode==="before"){$target.addClass("dynatree-drop-before")}else{$target.removeClass("dynatree-drop-before")}if(accept===true){if($source){$source.addClass("dynatree-drop-accept")}$target.addClass("dynatree-drop-accept");helper.addClass("dynatree-drop-accept")}else{if($source){$source.removeClass("dynatree-drop-accept")}$target.removeClass("dynatree-drop-accept");helper.removeClass("dynatree-drop-accept")}if(accept===false){if($source){$source.addClass("dynatree-drop-reject")}$target.addClass("dynatree-drop-reject");helper.addClass("dynatree-drop-reject")}else{if($source){$source.removeClass("dynatree-drop-reject")}$target.removeClass("dynatree-drop-reject");helper.removeClass("dynatree-drop-reject")}},_onDragEvent:function(eventName,node,otherNode,event,ui,draggable){var opts=this.options,dnd=this.options.dnd,res=null,nodeTag=$(node.span),hitMode,enterResponse;switch(eventName){case"helper":var $helper=$("<div class='dynatree-drag-helper'><span class='dynatree-drag-helper-img' /></div>").append($(event.target).closest("a").clone());$("ul.dynatree-container",node.tree.divTree).append($helper);$helper.data("dtSourceNode",node);res=$helper;break;case"start":if(node.isStatusNode()){res=false}else{if(dnd.onDragStart){res=dnd.onDragStart(node)}}if(res===false){this.logDebug("tree.onDragStart() cancelled");ui.helper.trigger("mouseup");ui.helper.hide()}else{nodeTag.addClass("dynatree-drag-source")}break;case"enter":res=dnd.onDragEnter?dnd.onDragEnter(node,otherNode):null;if(!res){res=false}else{res={over:((res===true)||(res==="over")||$.inArray("over",res)>=0),before:((res===true)||(res==="before")||$.inArray("before",res)>=0),after:((res===true)||(res==="after")||$.inArray("after",res)>=0)}}ui.helper.data("enterResponse",res);break;case"over":enterResponse=ui.helper.data("enterResponse");hitMode=null;if(enterResponse===false){}else{if(typeof enterResponse==="string"){hitMode=enterResponse}else{var nodeOfs=nodeTag.offset();var relPos={x:event.pageX-nodeOfs.left,y:event.pageY-nodeOfs.top};var relPos2={x:relPos.x/nodeTag.width(),y:relPos.y/nodeTag.height()};if(enterResponse.after&&relPos2.y>0.75){hitMode="after"}else{if(!enterResponse.over&&enterResponse.after&&relPos2.y>0.5){hitMode="after"}else{if(enterResponse.before&&relPos2.y<=0.25){hitMode="before"}else{if(!enterResponse.over&&enterResponse.before&&relPos2.y<=0.5){hitMode="before"}else{if(enterResponse.over){hitMode="over"}}}}}if(dnd.preventVoidMoves){if(node===otherNode){hitMode=null}else{if(hitMode==="before"&&otherNode&&node===otherNode.getNextSibling()){hitMode=null}else{if(hitMode==="after"&&otherNode&&node===otherNode.getPrevSibling()){hitMode=null}else{if(hitMode==="over"&&otherNode&&otherNode.parent===node&&otherNode.isLastSibling()){hitMode=null}}}}}ui.helper.data("hitMode",hitMode)}}if(hitMode==="over"&&dnd.autoExpandMS&&node.hasChildren()!==false&&!node.bExpanded){node.scheduleAction("expand",dnd.autoExpandMS)}if(hitMode&&dnd.onDragOver){res=dnd.onDragOver(node,otherNode,hitMode);if(res==="over"||res==="before"||res==="after"){hitMode=res}}this._setDndStatus(otherNode,node,ui.helper,hitMode,res!==false&&hitMode!==null);break;case"drop":var isForbidden=ui.helper.hasClass("dynatree-drop-reject");hitMode=ui.helper.data("hitMode");if(hitMode&&dnd.onDrop&&!isForbidden){dnd.onDrop(node,otherNode,hitMode,ui,draggable)}break;case"leave":node.scheduleAction("cancel");ui.helper.data("enterResponse",null);ui.helper.data("hitMode",null);this._setDndStatus(otherNode,node,ui.helper,"out",undefined);if(dnd.onDragLeave){dnd.onDragLeave(node,otherNode)}break;case"stop":nodeTag.removeClass("dynatree-drag-source");if(dnd.onDragStop){dnd.onDragStop(node)}break;default:throw"Unsupported drag event: "+eventName}return res},cancelDrag:function(){var dd=$.ui.ddmanager.current;if(dd){dd.cancel()}},lastentry:undefined};$.widget("ui.dynatree",{_init:function(){if(parseFloat($.ui.version)<1.8){if(this.options.debugLevel>=0){_log("warn","ui.dynatree._init() was called; you should upgrade to jquery.ui.core.js v1.8 or higher.")}return this._create()}if(this.options.debugLevel>=2){_log("debug","ui.dynatree._init() was called; no current default functionality.")}},_create:function(){var opts=this.options;if(opts.debugLevel>=1){logMsg("Dynatree._create(): version='%s', debugLevel=%o.",$.ui.dynatree.version,this.options.debugLevel)}this.options.event+=".dynatree";var divTree=this.element.get(0);this.tree=new DynaTree(this);this.tree._load();this.tree.logDebug("Dynatree._init(): done.")},bind:function(){this.unbind();var eventNames="click.dynatree dblclick.dynatree";var timer=null;if(this.options.keyboard){eventNames+=" keypress.dynatree keydown.dynatree"}this.element.bind(eventNames,function(event){var dtnode=$.ui.dynatree.getNode(event.target);if(!dtnode){return true}if(dtnode.data.disable){return}var tree=dtnode.tree;var o=tree.options;tree.logDebug("event(%s): dtnode: %s",event.type,dtnode);var prevPhase=tree.phase;tree.phase="userEvent";try{switch(event.type){case"click":if(typeof o.onDblClick==="function"&&(dtnode.data.isFolder===true||dtnode.data.isFolder==="true")){if(dtnode._timer_){clearTimeout(dtnode._timer_);dtnode._timer_=null}else{dtnode._timer_=setTimeout(function(){dtnode._onClick(event);dtnode._timer_=null},200)}}else{dtnode._onClick(event)}if(typeof o.onClick==="function"){o.onClick.call(tree,dtnode,event)}break;case"dblclick":if(typeof o.onDblClick==="function"){o.onDblClick.call(tree,dtnode,event)}dtnode._onDblClick(event);break;case"keydown":return(o.onKeydown&&o.onKeydown.call(tree,dtnode,event)===false)?false:dtnode._onKeydown(event);case"keypress":return(o.onKeypress&&o.onKeypress.call(tree,dtnode,event)===false)?false:dtnode._onKeypress(event)}}catch(e){var _=null;tree.logWarning("bind(%o): dtnode: %o, error: %o",event,dtnode,e)}finally{tree.phase=prevPhase}});function __focusHandler(event){event=$.event.fix(event||window.event);var dtnode=$.ui.dynatree.getNode(event.target);return dtnode?dtnode._onFocus(event):false}var div=this.tree.divTree;if(div.addEventListener){div.addEventListener("focus",__focusHandler,true);div.addEventListener("blur",__focusHandler,true)}else{div.onfocusin=div.onfocusout=__focusHandler}},unbind:function(){this.element.unbind(".dynatree")},enable:function(){this.bind();$.Widget.prototype.enable.apply(this,arguments)},disable:function(){this.unbind();$.Widget.prototype.disable.apply(this,arguments)},getTree:function(){return this.tree},getRoot:function(){return this.tree.getRoot()},getActiveNode:function(){return this.tree.getActiveNode()},getSelectedNodes:function(){return this.tree.getSelectedNodes()},lastentry:undefined});if(parseFloat($.ui.version)<1.8){$.ui.dynatree.getter="getTree getRoot getActiveNode getSelectedNodes"}$.ui.dynatree.version="$Version:$";$.ui.dynatree.getNode=function(el){if(el instanceof DynaTreeNode){return el}if(el.selector!==undefined){el=el[0]}while(el){if(el.dtnode){return el.dtnode}el=el.parentNode}return null};$.ui.dynatree.getPersistData=DynaTreeStatus._getTreePersistData;$.ui.dynatree.prototype.options={title:"Dynatree",minExpandLevel:1,imagePath:"",children:null,initId:null,initAjax:null,autoFocus:true,keyboard:true,persist:false,autoCollapse:false,clickFolderMode:3,activeVisible:true,checkbox:false,selectMode:2,fx:null,reactive:true,noLink:false,onClick:null,onDblClick:null,onKeydown:null,onKeypress:null,onFocus:null,onBlur:null,onQueryActivate:null,onQuerySelect:null,onQueryExpand:null,onPostInit:null,onActivate:null,onDeactivate:null,onSelect:null,onExpand:null,onLazyRead:null,onCustomRender:null,onCreate:null,onRender:null,postProcess:null,dnd:{onDragStart:null,onDragStop:null,autoExpandMS:1000,preventVoidMoves:true,onDragEnter:null,onDragOver:null,onDrop:null,onDragLeave:null},ajaxDefaults:{cache:false,timeout:0,dataType:"json"},strings:{loading:"Loading&#8230;",loadError:"Load error!"},generateIds:false,idPrefix:"dynatree-id-",keyPathSeparator:"/",cookieId:"dynatree",cookie:{expires:null},classNames:{container:"dynatree-container",node:"dynatree-node",folder:"dynatree-folder",empty:"dynatree-empty",vline:"dynatree-vline",expander:"dynatree-expander",connector:"dynatree-connector",checkbox:"dynatree-checkbox",nodeIcon:"dynatree-icon",title:"dynatree-title",noConnector:"dynatree-no-connector",nodeError:"dynatree-statusnode-error",nodeWait:"dynatree-statusnode-wait",hidden:"dynatree-hidden",combinedExpanderPrefix:"dynatree-exp-",combinedIconPrefix:"dynatree-ico-",nodeLoading:"dynatree-loading",hasChildren:"dynatree-has-children",active:"dynatree-active",selected:"dynatree-selected",expanded:"dynatree-expanded",lazy:"dynatree-lazy",focused:"dynatree-focused",partsel:"dynatree-partsel",lastsib:"dynatree-lastsib"},debugLevel:0,lastentry:undefined};if(parseFloat($.ui.version)<1.8){$.ui.dynatree.defaults=$.ui.dynatree.prototype.options}$.ui.dynatree.nodedatadefaults={title:null,key:null,isFolder:false,isLazy:false,tooltip:null,href:null,icon:false,addClass:null,noLink:false,activate:false,focus:false,expand:false,select:false,hideCheckbox:false,unselectable:false,children:null,lastentry:undefined};function _initDragAndDrop(tree){var dnd=tree.options.dnd||null;if(dnd&&(dnd.onDragStart||dnd.onDrop)){_registerDnd()}if(dnd&&dnd.onDragStart){tree.$tree.draggable({addClasses:false,appendTo:"body",containment:false,delay:0,distance:4,revert:false,scroll:true,scrollSpeed:7,scrollSensitivity:10,connectToDynatree:true,helper:function(event){var sourceNode=$.ui.dynatree.getNode(event.target);if(!sourceNode){return"<div></div>"}return sourceNode.tree._onDragEvent("helper",sourceNode,null,event,null,null)},start:function(event,ui){var sourceNode=ui.helper.data("dtSourceNode");return !!sourceNode},_last:null})}if(dnd&&dnd.onDrop){tree.$tree.droppable({addClasses:false,tolerance:"intersect",greedy:false,_last:null})}}var didRegisterDnd=false;var _registerDnd=function(){if(didRegisterDnd){return}$.ui.plugin.add("draggable","connectToDynatree",{start:function(event,ui){var draggable=$(this).data("draggable"),sourceNode=ui.helper.data("dtSourceNode")||null;if(sourceNode){draggable.offset.click.top=-2;draggable.offset.click.left=+16;return sourceNode.tree._onDragEvent("start",sourceNode,null,event,ui,draggable)}},drag:function(event,ui){var draggable=$(this).data("draggable"),sourceNode=ui.helper.data("dtSourceNode")||null,prevTargetNode=ui.helper.data("dtTargetNode")||null,targetNode=$.ui.dynatree.getNode(event.target);if(event.target&&!targetNode){var isHelper=$(event.target).closest("div.dynatree-drag-helper,#dynatree-drop-marker").length>0;if(isHelper){return}}ui.helper.data("dtTargetNode",targetNode);if(prevTargetNode&&prevTargetNode!==targetNode){prevTargetNode.tree._onDragEvent("leave",prevTargetNode,sourceNode,event,ui,draggable)}if(targetNode){if(!targetNode.tree.options.dnd.onDrop){}else{if(targetNode===prevTargetNode){targetNode.tree._onDragEvent("over",targetNode,sourceNode,event,ui,draggable)}else{targetNode.tree._onDragEvent("enter",targetNode,sourceNode,event,ui,draggable)}}}},stop:function(event,ui){var draggable=$(this).data("draggable"),sourceNode=ui.helper.data("dtSourceNode")||null,targetNode=ui.helper.data("dtTargetNode")||null,mouseDownEvent=draggable._mouseDownEvent,eventType=event.type,dropped=(eventType=="mouseup"&&event.which==1);if(!dropped){logMsg("Drag was cancelled")}if(targetNode){if(dropped){targetNode.tree._onDragEvent("drop",targetNode,sourceNode,event,ui,draggable)}targetNode.tree._onDragEvent("leave",targetNode,sourceNode,event,ui,draggable)}if(sourceNode){sourceNode.tree._onDragEvent("stop",sourceNode,null,event,ui,draggable)}}});didRegisterDnd=true}}(window.comtop.cQuery));(function(e,f){var d=e.browser.msie,g=d&&e.browser.version==="6.0",c=d&&!e.support.boxModel;function a(){b.init();return b}var b={init:function(){var h;if(!this.overlayBuild){h=e(document.createElement("div"));h.addClass("cui_overlay");e("body").append(h);this.overlayBuild=true;this._dom=h}},show:function(i){var h=this._dom.data("opa")||0;i=h+parseInt(i*100);if(g||c){e("html,body").addClass("cui_overlay_ie6")}this._dom.data("opa",i).css("opacity",i/100).show()},hide:function(i){var h=this._dom.data("opa");i=h-parseInt(i*100);this._dom.data("opa",i);this._dom.css("opacity",i/100);if(i<=0){this._dom.hide();if(g||c){e("html,body").removeClass("cui_overlay_ie6")}}}};if(f.comtop&&f.comtop.UI){comtop.UI.Overlay=a}f._overlay=a})(window.comtop?window.comtop.cQuery:window.jQuery,window);(function(a,b){b.UI.Button=b.UI.Base.extend({options:{uitype:"Button",label:" ",hide:false,disable:false,icon:"",on_click:null,menu:null,mark:""},_init:function(){this.options.menuId="button_"+b.guid()},_create:function(){var c=this.options;if(c.hide){this.hide()}if(c.disable){this.disable(true)}if(c.icon){this._setIcon(c.icon)}if(c.menu){if(a.isFunction(c.menu)){c.menu=c.menu()}c.menu=cui("#"+c.menuId).menu(c.menu);c.el.children("div").unbind("click")}},_mouseoverHandler:function(f,c,d){if(this.options.disable){return}a(c).addClass("button_box_visited")},_mouseoutHandler:function(f,c,d){if(this.options.disable){return}a(c).removeClass("button_box_visited").removeClass("button_box_hover")},_mouseupHandler:function(f,c,d){if(this.options.disable){return}a(c).removeClass("button_box_hover");a(c).addClass("button_box_visited")},_mousedownHandler:function(f,c,d){if(this.options.disable){return}a(c).addClass("button_box_hover")},_clickHandler:function(h,c,g){var f=this.options;if(f.disable){return}h.stopPropagation();var d=f.menu;d&&d.show();this.options.on_click&&this.options.on_click(h,this,f.mark)},_setIcon:function(c){var d;if(c.indexOf("/")!=-1){d="url("+c+")"}else{d="url("+this._getIconPath("comtop.ui")+"themes/default/images/button/"+c+")"}this.options.el.find(".button_icon_container").css("backgroundImage",d)},_getIconPath:function(g){var e=a("script");var f;var d=new RegExp(g);for(var c=0;c<e.length;c++){f=e.eq(c).attr("src");if(d.test(f)){break}}f=f.substr(0,f.lastIndexOf("/"));f=f.substr(0,f.lastIndexOf("/")+1);return f},disable:function(c){if(c==true){this.options.disable=true;this.options.el.children("div").addClass("button_box_disable").removeClass("button_box_visited").removeClass("button_box_hover");if(this.options.menu){this.options.menu.hide&&this.options.menu.hide()}}else{this.options.disable=false;this.options.el.children("div").removeClass("button_box_disable")}},hide:function(){this.options.el.hide();this.options.menu&&this.options.menu.hide&&this.options.menu.hide()},setLabel:function(c){var d=typeof c;if(d==="number"||d==="string"){this.options.label=c;a(".button_text_container",this.options.el).html(c)}}})})(window.comtop.cQuery,window.comtop);(function(b){var a=b.cQuery;b.UI.Borderlayout=b.UI.Base.extend({options:{uitype:"Borderlayout",id:"",is_root:true,gap:"0px 0px 0px 0px",fixed:{top:true,middle:false,left:true,center:false,right:true,bottom:true},items:[],on_sizechange:null},_init:function(){},_create:function(){var c=this.options;this.id=b.guid();this.el=c.el;if(this.el.parent().prop("tagName")==="BODY"){this.body=true;this.el.parent().css({margin:0,overflow:"hidden"})}this._setItems();this._createDom();this._bindHandler()},_setItems:function(){var c=this.options.items,e=this.el,d=this.items_default={position:"left",width:-1,height:-1,gap:"0px 0px 0px 0px",resizable:false,min_size:30,max_size:200,split_size:2,is_header:false,header_content:"",header_height:30,collapsable:false,url:".",show_expand_icon:false};if(c.length){return}var f={string:function(g){return g},number:b.Tools.fixedNumber,"boolean":function(g){return g==="true"}};this.setattr=true;e.children("[position]").each(function(){var i={},h;c.push(i);for(var g in d){if(d.hasOwnProperty(g)){h=a(this).attr(g);i[g]=h===undefined?d[g]:f[typeof(d[g])](h)}}})},_isCols:function(c){return c==="left"||c==="center"||c==="right"},_createDom:function(){var m=this.options.items,d=this.el,u=this.setattr,k={},j={},y={},x=[],f=this.options.fixed,g={top:"bottom",bottom:"top",left:"right",right:"left"},h={},z=this.min_size={},e=this.max_size={},o=this.collapsable={},n=this.items_default,t={},B=this._isCols;for(var w=m.length;w--;){var A=m[w],D=A.position;A=u?m[w]:a.extend(n,m[w]);if(B(D)){j[D]=A.width!==-1?A.width:"auto";x.push(A.height)}else{y[D]=A.height!==-1?A.height:"auto"}var p=A.gap.split(" "),l=p.length;switch(l){case 1:p[1]=p[2]=p[3]=p[0];break;case 2:p[2]=p[0];p[3]=p[1];break;case 3:p[3]=p[1];break}h[D]={"margin-top":parseInt(p[0],10),"margin-right":parseInt(p[1],10),"margin-bottom":parseInt(p[2],10),"margin-left":parseInt(p[3],10)};if(f[D]){z[D]=A.min_size;e[D]=A.max_size}var c='<div class="bl_'+D+" bl_"+D+this.id+'">',s="",v="";if(D!=="center"){var r=this._isCols(D)?"width":"height";s='<div class="'+(A.resizable?"bl_move":"bl_border")+'" style="'+r+":"+A.split_size+'px;">'+((f[D]&&A.collapsable&&A.show_expand_icon)?'<div class="bl_fold bl_unfold"></div>':"")+"</div>";h[D]["margin-"+g[D]]+=A.split_size}if(f[D]&&A.collapsable){o[D]=A.collapsable}if(A.id){t[D]=A.id}if(A.is_header){v='<div class="bl_header" style="height:'+A.header_height+"px;line-height:"+A.header_height+'px;">'+A.header_content+"</div>"}c+='<div class="bl_inner" header="'+(A.is_header?A.header_height:0)+'">'+v+'<div class="bl_box_'+D+" bl_box"+this.id+'">'+(A.url!=="."?'<iframe url="'+A.url+'" frameborder="0" class="bl_iframe_page"></iframe>':"")+"</div></div>";k[D]=(c+=s+"</div>")}var C=a("<div class='bl_middle bl_middle"+this.id+"'></div>").append(k.left).append(k.center).append(k.right);d.append(k.top).append(C.html()?C:"").append(k.bottom).append("<div class='bl_overlay'></div>");d.find(".bl_box"+this.id).each(function(){var i=this.className.match(/top|left|center|bottom|right/)[0];if(t[i]){a(this).append(a("#"+t[i],d).css({height:"100%"}).append(a(this).html()))}else{a(this).html(d.children("[position="+i+"]").css({height:"100%"}).append(a(this).html()))}});d.find(".bl_iframe_page").each(function(){a(this).attr("src",a(this).attr("url")).removeAttr("url")});if(f.middle){var q=Math.max.apply(null,x);y.middle=q===-1?"auto":q}else{y.middle="auto"}this._setLayout(j,y);this._setBoxLayout(h)},_setLayout:function(e,i){var j=this,l=this.options.gap,d=this.el;j.auto_lays={width:[],height:[]};var g=l.split(" ");this.margin_v=parseInt(g[0],10)+(g[2]===undefined?parseInt(g[0],10):parseInt(g[2],10));var f=g[1]===undefined?parseInt(g[0],10):parseInt(g[1],10);this.margin_r=f+(g[3]===undefined?f:parseInt(g[3],10));this.scope={};var n=this.scope=this._getParentLayout();e=this._separateAutoLayout(e,n.width,"width");i=this._separateAutoLayout(i,n.height,"height");var h=this.layout=a.extend(e,i);for(var m in h){if(h.hasOwnProperty(m)){d.find(".bl_"+m+this.id).eq(0).css((this._isCols(m)?"width":"height"),h[m])}}var k=a.client.height(),c=a.client.width();a(window).on("resize",function(){if(k!==a.client.height()||c!==a.client.width()){k=a.client.height();c=a.client.width();j._resizeHandle(true)}});d.addClass("bl_main").css("padding",l)},_resizeHandle:function(d){var c=this._getParentLayout();this._resetLayout(c,this.scope,d);this.scope.width=c.width;this.scope.height=c.height},_separateAutoLayout:function(k,g,d){var f=[],j={},h=this.options.fixed;for(var c in k){if(k.hasOwnProperty(c)){if(!h[c]){this.auto_lays[d].push(c);f.push(c);continue}k[c]=typeof k[c]!=="number"?(d==="width"?500:300):k[c];g-=k[c];j[c]=k[c]}}for(var e=f.length;e--;){j[f[e]]=g/f.length}return j},_getParentLayout:function(){var f=this.el.parent().css({positon:"relative",overflow:"hidden"}),h=b.Browser,e=this.scope;var g=document.createElement("div");g.style.width="100%";g.style.height="100%";g.style.positon="absolute";g.style.left=0;g.style.top=0;f.append(g);var d=a(g).width();var c=a(g).height();if(this.body){c=h.isQM?(window.innerHeight||document.documentElement.offsetHeight-4):a(window).height()}else{f.css("overflow","")}a(g).remove();f.css("positon","");return{width:e.fix_width||(d-this.margin_r-1),height:e.fix_height||(c-this.margin_v)}},_setBoxLayout:function(e){var f=this.el,h=this.box_height={};for(var d in e){if(e.hasOwnProperty(d)){var g=f.find(".bl_box_"+d).eq(0),c=g.parent();h[d]=c.parent().css("overflow","hidden").height()-c.attr("header")-0-e[d]["margin-top"]-e[d]["margin-bottom"];c.parent().css("overflow","");c.css(e[d]);g.css("height",h[d])}}},_resetLayout:function(e,d,f){var g=e.width-d.width;var c=e.height-d.height;if(g){this._setWidthAndHeight(g,"width",f)}if(c){this._setWidthAndHeight(c,"height",f)}},setWidth:function(d){var c=b.Browser.isQM?(d+this.margin_r):d;this.el.css("width",c);this.scope.fix_width=d;this._resizeHandle(false)},setHeight:function(d){var c=b.Browser.isQM?(d+this.margin_v):d;this.el.css("height",c);this.scope.fix_height=d;this._resizeHandle(false)},_setWidthAndHeight:function(p,f,e){var d=this.el,h=this.auto_lays[f],o=h.length,l=this.layout,c=p,n=0;var g=o;for(;g--;){n+=l[h[g]]}for(g=o;g--;){var m=Math.round(p*l[h[g]]/n),j=d.find(".bl_"+h[g]+this.id);var k=(g===0?c:m);c-=m;j.css(f,l[h[g]]+=k);if(f==="height"){this._setBoxHeight(j,k)}}if(!e){this._childrenHanlder()}},_setBoxHeight:function(c,e){var d=this.box_height;c.find(".bl_box"+this.id).each(function(h,i){var g=a(i).attr("class").match(/top|left|center|bottom|right/)[0];var f=d[g]=Math.max(d[g]+=e,0);a(i).css("height",d[g]);if(!f){a(i).hide()}else{a(i).show()}})},_bindHandler:function(){var c=this,d=this.el;d.find(".bl_top>.bl_move, .bl_bottom>.bl_move").on("mousedown",function(e){c._drag(e,this,"height")});d.find(".bl_left>.bl_move, .bl_center>.bl_move, .bl_right>.bl_move").on("mousedown",function(e){c._drag(e,this,"width")});d.find(".bl_top .bl_fold, .bl_bottom .bl_fold").on("mousedown",function(e){c._fold(e,this,"height")});d.find(".bl_middle .bl_fold").on("mousedown",function(e){c._fold(e,this,"width")})},_drag:function(z,j,p){var v=a(j);if(!v.find(".bl_unfold").length){return}z.stopPropagation();z.preventDefault();var i=z.pageX,h=z.pageY,q,e=this,w=this.layout,u=this.min_size,c=this.max_size,d=v.parent(),m=d.prev(),o=d.next(),A=d.parent().not(".bl_main:eq(0)");if(m.length){o=d}else{m=d}var n=m.attr("class").match(/top|left|center|bottom|middle|right/)[0],r=o.attr("class").match(/top|left|center|bottom|middle|right/)[0],k=w[n],l=w[r],s=u[n],t=u[r],f=c[n],g=c[r];this.el.children(".bl_overlay").show().css("height",this.scope.height).css("cursor",p==="width"?"col-resize":"row-resize").on("mousemove",function(B){B.stopPropagation();B.preventDefault();var x=B.pageX,y=B.pageY,C=A.length?x-i:y-h;if(C===0||C*q>0){return}q=0;if(f!==undefined&&(k+C>f||k+C<s)){C=C>0?f-k:s-k;q=C}if(g!==undefined&&(l-C>g||l-C<t)){C=C<0?l-g:l-t;q=C}m.css(p,k+=C);o.css(p,l-=C);if(p==="height"){e._setBoxHeight(m,C);e._setBoxHeight(o,-C)}h=y;i=x;e._childrenHanlder()}).on("mouseup mouseout",function(x){x.stopPropagation();a(this).hide().off("mousemove");(w[n]=w[n]===k?w[n]:k);(w[r]=w[r]===l?w[r]:l)})},_fold:function(d,e,c){d.stopPropagation();if(d.button>1){return}this._foldAction(a(e).parent().parent(),c)},_foldAction:function(i,e,d){var h=this.layout,c=i.attr("class").match(/top|left|center|bottom|right/)[0],g=i.data("fold"),f=i.children(".bl_move,.bl_border").eq(0).children().eq(0);if(this.collapsable[c]){if(d===true&&g!==undefined||d===false&&g===undefined){return}if(g===undefined){this._setWidthAndHeight(h[c],e);i.children(".bl_inner").hide();i.data("fold",h[c]).css(e,h[c]=0);f.removeClass("bl_unfold");return}this._setWidthAndHeight(-g,e);f.addClass("bl_unfold");i.children(".bl_inner").show();i.removeData("fold").css(e,h[c]=g).children(".bl_inner")}},_childrenHanlder:function(){var d=null;if(!this.child_bl){d=this.el.find("[uitype=Borderlayout]");this.child_bl=d.length===0?null:d}d=this.child_bl;if(d){d.each(function(){window.cui(this)._resizeHandle()})}var c=this.options.on_sizechange;if(c&&typeof c==="function"){c()}},setContentURL:function(c,d){var f=this.el.find(".bl_"+c+this.id).eq(0).find(".bl_box"+this.id).eq(0).children().eq(0);var e=f.find(".bl_iframe_page");if(e.length){e.eq(0).attr("src",d)}else{f.append('<iframe class="bl_iframe_page" src="'+d+'" frameborder="0"></iframe>')}},setCollapse:function(c,d){if(this.options.fixed[c]){this._foldAction(a(".bl_"+c+this.id),(this._isCols(c)?"width":"height"),d)}},getCollapseState:function(c){return{collapsed:!!this.el.find(".bl_"+c+this.id).eq(0).data("fold"),contentHeight:this.box_height[c],contentWidth:this.el.find(".bl_"+c+this.id).eq(0).width()}},setGap:function(c){var e=this.options.gap=c,d=e.split(" ");this.el.css("padding",e);this.margin_v=parseInt(d[0],10)+(d[2]===undefined?parseInt(d[0],10):parseInt(d[2],10));this._resizeHandle()},setTittle:function(c,d){a(".bl_"+c+this.id).find(".bl_header").eq(0).html(d)},setCollapsable:function(c,d){if(this.options.fixed[c]){this.collapsable[c]=d;var e=a(".bl_"+c).children(".bl_move,.bl_border").eq(0).children(".bl_fold").eq(0);if(d){e.show();return}e.hide()}}})})(window.comtop);(function(e,n){var g=null;n.UI.Calender=n.UI.Base.extend({options:{uitype:"Calender",name:"",model:"date",isrange:false,trigger:"click",value:[],format:"",entering:false,emptytext:"",readonly:false,disable:false,icon:true,textmode:false,panel:1,zindex:11000,width:"200px",okbtn:false,clearbtn:true,mindate:null,maxdate:null,nocurrent:false,iso8601:false,on_change:null,sunday_first:false},tipPosition:".C_CR_calInput_bd",_init:function(u){var v=this,y=v.options;if(u.value){var x=e.type(u.value);switch(x){case"string":y.value=/^(?:\{.*\}|\[.*\])$/.test(u.value)?e.parseJSON(u.value.replace(/\\'/g,"#@@#").replace(/'/g,'"').replace(/#@@#/g,"'")):[u.value];break;case"array":y.value=u.value;break;default:y.value=[u.value]}}if(u.width){if(typeof u.width==="string"&&/^(\d)+(px|pt|em|PX|PT|EM|%)$/.test(u.width)){y.width=u.width}else{y.width=u.width+"px"}}y.value=y.value===null?[]:y.value;y.mindate=[u.mindate,null];y.maxdate=[u.maxdate,null];y.uuid=n.guid();y.template="calender.html";y.curModel=[];y.formatList={date:"yyyy-MM-dd",year:"yyyy",quarter:"yyyy-q",month:"yyyy-MM",week:"yyyy-w"};y.inputFocusClass="C_CR_calInput_focus";y.inputDisClass="C_CR_calInput_rd";y.inputErrClass="C_CR_calInput_err";y.selDate=[];y.cache={yearPop:{},selDate:[]};y.isBuild=false;y.inputEl=null;y.tipTxt=null;y.pEl=null;y.datePanel=[];y.yearPanel=[];y.monthPanel=[];y.quarterPanel=[];y.timePanel=[];y.weekPanel=[];y.yearPop={forDate:[],forYear:[],forQuarter:[],forMonth:[],forWeek:[]};y.selIndex=0;y.activePop=null;var w=y.model==="all"?"date":y.model;y.curModel=[w,"for"+w.charAt(0).toUpperCase()+w.substring(1),w+"Frame",w+"Panel"];if(y.model==="all"&&u.format){y.format=e.parseJSON(u.format.replace(/\\'/g,"#@@#").replace(/'/g,'"').replace(/#@@#/g,"'"));y.formatList=e.extend(y.formatList,y.format);y.format=y.formatList[y.curModel[0]]}else{if(!u.format){y.format=y.formatList[y.curModel[0]]}else{y.formatList[y.curModel[0]]=y.format}}y.okbtn=/[y|M|q|w|d]/.test(y.format)?y.okbtn:true},_create:function(){var u=this,w=u.options;w.inputEl=w.el.find(":text");u._getDefault();u.setValue(e.extend(true,[],w.selDate),true);for(var v=0;v<w.cache.selDate.length;v++){if(w.cache.selDate[v]===null){w.selIndex=v;break}else{w.selIndex++}}if(w.disable||w.readonly){w.el.children(".C_CR_calInput_bd").addClass(w.inputDisClass)}if(!w.entering||w.disable||w.readonly){w.disable&&w.inputEl.attr("disabled",true);(w.readonly||!w.entering)&&w.inputEl.attr("readonly",true)}if(w.entering){}},_enterCtrl:function(L){var J=this,u=J.options,B=u.format,G=[],C=[],z="",F="",H,E,D,A,x,K,I,v;H=/y/.test(B)?["9999","yyyy"]:"";E=/M/.test(B)?["1m","MM"]:"";D=/d/.test(B)?["td","dd"]:"";A=/h/.test(B)?["2h","hh"]:"";x=/m/.test(B)?["59","mm"]:"";K=/s/.test(B)?["59","ss"]:"";I=/w/.test(B)?["5w","ww"]:"";v=/q/.test(B)?["4","q"]:"";H!==""&&(G.push(H[0]),C.push(H[1]));E!==""&&(G.push(E[0]),C.push(E[1]));D!==""&&(G.push(D[0]),C.push(D[1]));I!==""&&(G.push(I[0]),C.push(I[1]));v!==""&&(G.push(v[0]),C.push(v[1]));z=G.join("-");F=C.join("-");G=[];C=[];A!==""&&(G.push(A[0]),C.push(A[1]));x!==""&&(G.push(x[0]),C.push(x[1]));K!==""&&(G.push(K[0]),C.push(K[1]));z+=G.join(":")!==""?" "+G.join(":"):"";F+=C.join(":")!==""?" "+C.join(":"):"";if(u.isrange){z=z+"~"+z;F=F+"~outFt"}n.UI.InputMask.doMask(u.inputEl,"Custom",{model:z,placeholder:"_",callback:function(){var y=e.trim(u.inputEl.val());y=y.split("~");for(var w=0;w<y.length;w++){y[w]=n.Date.parse(y[w],F)}J.setValue(y)}})},_getDefault:function(){var u=this,v=u.options,w=[];if(v.value.length!=0){w=v.value}else{if(v.isrange){w=e.trim(v.inputEl.eq(0).val()).split("~");w=!w.join("")?[null,null]:w}else{e.each(v.inputEl,function(x,y){w.push(e.trim(e(this).val()))})}}v.selDate=r(j(w,v.format))},_buildData:function(u,C){var F=this,v=F.options,y,z,x,A,D,w;if(v.isBuild){if(C===undefined){v[v.curModel[3]]=[];v.yearPop[v.curModel[1]]=[]}else{w=!F._isReady("yearPop",C);v[v.curModel[3]][C]=[];w&&(v.yearPop[v.curModel[1]][C]=[])}}if((!v.isBuild&&v.model==="all")||v.curModel[0]==="date"){if(C===undefined){for(A=0;A<v.panel;A++){y=u[A]?new Date(u[A][0],u[A][1],1):new Date(y.getFullYear(),y.getMonth()+1,1);v.yearPop.forDate.push(t(y.getFullYear()-4,12));v.datePanel.push(i.call(F,y))}}else{y=new Date(u[0][0],u[0][1],1);w&&(v.yearPop.forDate[C]=t(y.getFullYear()-4,12));v.datePanel[C]=i.call(F,y)}}if((!v.isBuild&&v.model==="all")||v.curModel[0]==="year"){if(C===undefined){for(A=0;A<v.panel;A++){D=u[A]?u[A][0]:v.yearPanel[A-1].data[11]+14;v.yearPop.forYear.push(t(D-4,12));v.yearPanel.push({year:D,month:null,data:t(D-7,18)})}}else{D=u[0][0];w&&(v.yearPop.forYear[C]=t(D-4,12));v.yearPanel[C]={year:D,month:null,data:t(D-7,18)}}}if((!v.isBuild&&v.model==="all")||v.curModel[0]==="month"){if(C===undefined){for(A=0;A<v.panel;A++){D=u[A]?u[A][0]:v.monthPanel[A-1].year+1;v.yearPop.forMonth.push(t(D-4,12));v.monthPanel.push({year:D,month:null,data:c()})}}else{D=u[0][0];w&&(v.yearPop.forMonth[C]=t(D-4,12));v.monthPanel[C]={year:D,month:null,data:c()}}}if((!v.isBuild&&v.model==="all")||v.curModel[0]==="quarter"){if(C===undefined){for(A=0;A<v.panel;A++){D=u[A]?u[A][0]:v.quarterPanel[A-1].year+1;v.yearPop.forQuarter.push(t(D-4,12));v.quarterPanel.push({year:D,month:null,quarter:[1,2,3,4]})}}else{D=u[0][0];w&&(v.yearPop.forQuarter[C]=t(D-4,12));v.quarterPanel[C]={year:D,month:null,quarter:[1,2,3,4]}}}if((!v.isBuild&&v.model==="all")||v.curModel[0]==="date"){var B;v.timePanel=[];B=v.isrange?2:1;for(z=0;z<B;z++){x=v.cache.selDate[z]?v.cache.selDate[z]:b(new Date(),v.format);v.timePanel.push([x[5],x[6],x[7]])}}if((!v.isBuild&&v.model==="all")||v.curModel[0]==="week"){var E;if(C===undefined){for(A=0;A<v.panel;A++){if(u[A]){E=n.Date.getOnWeek(new Date(u[A][0],u[A][1]>0?u[A][1]:1,u[A][2]||1),v.iso8601,v.sunday_first)}D=u[A]?E.year:v.weekPanel[A-1].year+1;v.yearPop.forWeek.push(t(D-4,12));v.weekPanel.push({year:D,month:null,data:d(D,v.iso8601,v.sunday_first)})}}else{D=u[0][0];w&&(v.yearPop.forWeek[C]=t(D-4,12));v.weekPanel[C]={year:D,month:null,data:d(D,v.iso8601,v.sunday_first)}}}v.cache.yearPop=e.extend(true,{},v.yearPop)},_buildUpdateDate:function(){var v=this,y=v.options,u,x=[],w,z=[];u=b(new Date(),y.format);for(w=0;w<y.cache.selDate.length;w++){if(w===0){z.push(y.cache.selDate[w]?y.cache.selDate[w]:u);x.push([z[w][2],z[w][3],z[w][4]])}else{if(y.cache.selDate[w]){z.push(y.cache.selDate[w]);x.push([z[w][2],z[w][3],z[w][4]])}}}return x},_draw:function(){var u=this,v=u.options;u._buildData(u._buildUpdateDate());u._buildTemplate("body","calFrame",e.extend(true,{},v),true);v.pEl=e("#C_CR_"+v.uuid)},_drawYearPop:function(w,v){var u=this,y=u.options,A,z=y.pEl.children(".C_CR_YM_wrap").find("div.C_CR_YMer_pop_y");A=y.yearPop[w]||[];if(v!=undefined){u._buildTemplate(z.eq(v),"yearPopFrame",A[v])}else{for(var x=0;x<A.length;x++){u._buildTemplate(z.eq(x),"yearPopFrame",A[x])}}},_tagEventHandle:function(A,u,z){A.stopPropagation();var v=this,y=v.options,B=z.nodeName;k.call(v);if(B==="A"){var x=e(z),w=x.attr("val");x.parents("ul").find("a").removeClass("C_CR_Tag_cur");x.addClass("C_CR_Tag_cur");y.curModel=[w,"for"+w.charAt(0).toUpperCase()+w.substring(1),w+"Frame",w+"Panel"];y.cache.selDate=[];v._selectTag(y.curModel)}},_binderHandler:function(y,u,x){y.stopPropagation();var v=this,w=v.options,z=x.nodeName;if(w.readonly||w.disable){return}if(w.el.attr("isShow")==="true"){return}w.el.attr("isShow","true");if(z==="INPUT"){w.entering||e(x).blur()}w.inputEl.parents(".C_CR_calInput_bd").addClass(w.inputFocusClass);v.show();if(e.trim(w.inputEl.val())===w.emptytext){w.inputEl.val("").removeClass("C_CR_calInput_empty")}},_mainEventHandle:function(z,u,y){z.stopPropagation();var v=this,x=e(y),B=x[0].nodeName;k.call(v);if(B!=="A"){return}var A=x.attr("val").split("|");for(var w=0;w<A.length;w++){A[w]=+A[w]}v._cachingDate(A,x)},_ymEventHandle:function(x,v,y){x.stopPropagation();var B=this,u=B.options,C=e(y),z=C[0].nodeName,w,A;if(z==="A"){w=C.attr("val");A=+C.parents(".C_CR_YMer_item:eq(0)").attr("popIndex");switch(w){case"prevMonth":k.call(B);u.curModel[0]==="date"?B._selectMonthYear("month",null,null,-1):u.curModel[0]==="year"?B._selectMonthYear("year",null,null,-18):B._selectMonthYear("year",null,null,-1);break;case"nextMonth":k.call(B);u.curModel[0]==="date"?B._selectMonthYear("month",null,null,1):u.curModel[0]==="year"?B._selectMonthYear("year",null,null,18):B._selectMonthYear("year",null,null,1);break;case"prevPop":B._changeYear(-12,A);break;case"nextPop":B._changeYear(12,A);break;case"closePop":k.call(B);break;default:B._closeYMerPop(true);w=Number(w);if(C.attr("panel")==="y"){B._selectMonthYear("year",w,A)}else{B._selectMonthYear("month",w,A)}}}else{if(z==="INPUT"||z==="SPAN"){C=C.children("input").size()?C.children("input"):C;B._closeYMerPop(false,C);C.blur()}else{k.call(B)}}},_timerEventHandle:function(y,u,x){y.stopPropagation();var v=this,w=e(x),B=w[0].nodeName,z;if(B==="SPAN"){z=w.attr("val");switch(z){case"up":v._selectTime(w,1);break;case"down":v._selectTime(w,-1);break}k.call(v)}else{if(B==="INPUT"){w.blur();k.call(v,w.next())}else{if(B==="A"){var A=w.parents("div.C_CR_Timer_pop").prev();z=+w.attr("val");A.val(z<10?"0"+z:z);k.call(v)}}}},_btnEventHandle:function(A,w,B){A.stopPropagation();var C=this,v=C.options,D=e(B),y=D.attr("val"),z;k.call(C);switch(y){case"close":C.hide();break;case"cur":var x=new Date(),u=b(x,v.format);if(v.curModel[0]==="quarter"){C._cachingDate([u[2],Math.floor(u[3]/3)+1,1])}else{if(v.curModel[0]==="week"){C._cachingDate([u[2],n.Date.getOnWeek(new Date(u[0]),v.iso8601,v.sunday_first).week])}else{C._cachingDate([u[2],u[3],u[4]])}}break;case"clear":q.call(C,null,"clear",null);v.selIndex=0;C.setValue(v.isrange?["",""]:[""]);break;case"ok":if(v.curModel[0]==="date"){z=b(new Date,v.format);v.cache.selDate=/[y|M|q|w|d]/.test(v.format)?v.cache.selDate:v.isrange?[z,z]:[z]}C._export()}},_selectTag:function(y){var v=this,A=v.options,B=A.pEl.children(".C_CR_main_wrap"),x=B.children(".C_CR_main_loading"),w=B.children(".C_CR_main_panel[val="+y[0]+"]"),z=w.siblings(),u=w.attr("isBuild")==="true";A.cache.selDate=e.extend(true,[],A.selDate);A.format=A.formatList[y[0]];z.hide();x.show();if(y[0]!="all"&&y[0]!="date"){f(A.pEl,"disMonth")}else{f(A.pEl,"undo")}if((!u)){v._buildTemplate(w,y[2],A);w.attr("isBuild","true")}else{if(u&&!v._isReady("mainPanel")){v._update(v._buildUpdateDate())}else{q.call(v,null,"clear",null)}}x.hide();w.show();h.call(v);if(!A.isBuild){if(A.model==="all"||(y[0]==="date"&&/[h|m|s]/.test(A.format))){v._buildTemplate(A.pEl.children(".C_CR_Timer_box"),"timeFrame",A)}}l.call(v);if(A.model==="all"){o(A);p(A)}v._setYM(y[0]);v._scanFocus();A.isBuild&&k.call(v)},_selectMonthYear:function(E,u,C,w){var F=this,v=F.options,B,y,D=[],z=E==="month"?1:0;y=e("table.C_CR_YMer",v.pEl);if(C!=undefined&&C!=null){x(C)}else{for(var A=0;A<y.length;A++){x(A)}}F._update(D,C);function x(G){B=y.eq(G).attr("val").split("|");B[z]=w!=undefined?Number(B[z])+w:u;D.push([Number(B[0]),Number(B[1])])}},_selectTime:function(v,u){var x,w,z,y;w=v.parents(".C_CR_Timer_op").eq(0);z=w.prev().children("input");x=+e.trim(z.val());y=x+u;if(z.attr("name")==="timer_h"){w.children("a").removeClass("C_CR_Timer_disable");if(y>23||y<0){v.parent().addClass("C_CR_Timer_disable");return}}else{w.children("a").removeClass("C_CR_Timer_disable");if(y>59||y<0){v.parent().addClass("C_CR_Timer_disable");return}}y=String(y);z.val(y.length===1?(0+y):y)},_cachingDate:function(B,z){var u=this,y=u.options,A=null,v=null,x=null;if(!y.isrange){u._clear(y.okbtn)}else{y.selIndex===2&&u._clear(y.okbtn)}switch(y.curModel[0]){case"date":A=u._getTime(y.selIndex);v=new Date(B[0],B[1],B[2],A[0],A[1],A[2]);break;case"year":v=new Date(B[0],0,1);break;case"month":v=new Date(B[0],B[1],1);break;case"quarter":v=new Date(B[0],(B[1]-1)*3,1);break;case"week":v=n.Date.getWeekRange(B[0],B[1],y.iso8601,y.sunday_first)[0]}x=b(v,y.format);y.cache.selDate[y.selIndex]=x;if(y.isrange){y.selIndex=0;for(var w=0;w<y.cache.selDate.length;w++){if(y.cache.selDate[w]===null){y.selIndex=w;break}else{y.selIndex++}}}else{y.selIndex++}u._focus([v],"SEL",z);y.okbtn||u._export()},_changeYear:function(v,w){var u=this,y=u.options,z=y.yearPop[y.curModel[1]],x;if(v>0){x=t(z[w][z[w].length-1]+1,v)}else{if(v<0){x=t(z[w][0]-1,v)}}y.yearPop[y.curModel[1]][w]=x;u._drawYearPop(y.curModel[1],w)},_getTime:function(v){var u=this,y=u.options,z=[],x=null,w=e("table.C_CR_Timer",y.pEl).eq(v);x=w.find(":text");z.push(+x.eq(0).val()||0,+x.eq(1).val()||0,+x.eq(2).val()||0);return z},_update:function(y,v){var u=this,x=u.options,w;w=x.pEl.children(".C_CR_main_wrap").children(".C_CR_main_panel[val="+x.curModel[0]+"]");if(v!=undefined){u._buildData(y,v)}else{u._buildData(y)}u._buildTemplate(w,x.curModel[2],x);u._setYM(x.curModel[0]);u._scanFocus()},_setYM:function(w){var v=this,y=v.options,z;z=y[w+"Panel"];for(var x=0,u=z.length;x<u;x++){a(y.pEl,{year:z[x].year,month:z[x].month!=null?z[x].month+1:""},x)}},_setTime:function(v){var A=this,u=A.options,B,x,z,w,C;B=e("table.C_CR_Timer",u.pEl);for(var y=0;y<B.length;y++){x=B.eq(y).find(":text");if(!v[y]){continue}z=v[y][5];w=v[y][6];C=v[y][7];x.eq(0).val(z<10?"0"+z:z);x.eq(1).val(w<10?"0"+w:w);x.eq(2).val(C<10?"0"+C:C)}},_closeYMerPop:function(z,y){var v=this,x=v.options,u=null,w=null,A=y?y.parents(".C_CR_YMer_item"):null;k.call(v,z?null:A.children(".C_CR_YMer_pop"),"ym");if(A){u=A.attr("pop");w=A.attr("popIndex")}if(u==="year"){if(w!=""&&!v._isReady("yearPop",w)){x.yearPop=e.extend(true,{},x.cache.yearPop);setTimeout(function(){v._drawYearPop(x.curModel[1],w)},50)}}},_scanFocus:function(){var u=this,x=u.options,v=x.inputEl.index(u.eventEl),y=[];for(var w=0;w<x.cache.selDate.length;w++){x.cache.selDate[w]&&y.push(x.cache.selDate[w][0])}u._focus(y,"SEL");u._focus([new Date()],"CUR")},_focus:function(A,x,z){var u=this,y=u.options,w=[];for(var v=0;v<A.length;v++){switch(y.curModel[0]){case"date":A[v]=[A[v].getFullYear(),A[v].getMonth(),A[v].getDate()];break;case"year":A[v]=[A[v].getFullYear()];break;case"month":A[v]=[A[v].getFullYear(),A[v].getMonth()];break;case"quarter":A[v]=[A[v].getFullYear(),Math.floor(A[v].getMonth()/3)+1];break;case"week":A[v]=[A[v].getFullYear(),n.Date.getOnWeek(A[v]).week]}w.push(A[v])}q.call(u,z,x,w)},_clear:function(w){var u=this,v=u.options;if(!w){v.inputEl.val("");v.value=v.isrange?["",""]:[""];v.selDate=v.isrange?[null,null]:[null]}v.cache.selDate=v.isrange?[null,null]:[null];v.selIndex=0;q.call(u,null,"clear",null)},_export:function(){var v=this,z=v.options,B,A=null,w,u=true;if(z.isrange){z.cache.selDate=r(z.cache.selDate);y();B=[z.cache.selDate[0]?z.cache.selDate[0][1]:"",z.cache.selDate[1]?z.cache.selDate[1][1]:""];for(var x=0;x<B.length;x++){if(!B[x]){u=false}}u=z.okbtn?true:u}else{y();B=z.cache.selDate[0]?z.cache.selDate[0][1]:""}v.setValue(B);if(u){v.hide()}function y(){var C=z.cache.selDate.length;for(var D=0;D<C;D++){if(!z.cache.selDate[D]){continue}A=v._getTime(D);w=z.cache.selDate[D];w=new Date(w[2],w[3],w[4],A[0],A[1],A[2]);w=b(w,z.format);z.cache.selDate[D]=w}}},_isReady:function(D,B){var G=this,v=G.options,H=v.curModel[0],C,A,x,u;if(D==="mainPanel"){x=v.cache.selDate;u=v[v.curModel[3]];C=F(v.mindate[1],m.call(G,"mindate"))||F(v.maxdate[1],m.call(G,"maxdate"));for(var w=0;w<x.length;w++){if(x[w]===null){A=true;continue}for(var z=0;z<u.length;z++){switch(H){case"date":A=x[w][2]===u[z].year&&x[w][3]===u[z].month;break;case"year":for(var y=0;y<u[z].data.length;y++){if(x[w][2]===u[z].data[y]){A=true;break}else{A=false}}break;case"week":var E=n.Date.getOnWeek(x[w][0],v.iso8601,v.sunday_first);A=E.year===u[z].year;break;default:A=x[w][2]===u[z].year}if(A){break}}if(!A){break}}A=A&&!C}else{if(D==="yearPop"){x=v[v.curModel[3]][B].year;u=v.pEl.children(".C_CR_YM_wrap").find("div.C_CR_YMer_pop_y:eq("+B+")>table").attr("val")||"none";A=e.trim(u).indexOf(x+"")>=0}}return A;function F(J,I){J=J?J.getTime():J;I=I?I.getTime():I;return J!=I}},show:function(){var u=this,v=u.options;if(v.disable){return false}g&&g.hide();if(v.isBuild){v.selDate=j(e.extend([],v.selDate),v.format);v.cache.selDate=e.extend([],v.selDate);if(!u._isReady("mainPanel")){u._update(u._buildUpdateDate())}else{u._scanFocus()}v.pEl.show()}else{u._draw();v.pEl.show();u._selectTag(v.curModel)}if(!v.isBuild||v.model==="all"){o(v)}p(v);g=u;e(document).unbind("mouseup.calender").one("mouseup.calender",function(w){w.stopPropagation();g&&g.hide();g=null});return u},hide:function(){var u=this,v=u.options;if(v.disable||!v.pEl){return u}v.el.attr("isShow","false");k.call(u);v.pEl.hide();v.inputEl.parents(".C_CR_calInput_bd").removeClass(v.inputFocusClass);if(v.inputEl.val()===""){v.inputEl.val(v.emptytext).addClass("C_CR_calInput_empty")}q.call(u,null,"clear",null);g=null;return u},setValue:function(C,z){var D=this,u=D.options,v=[],w=[],B=e.extend({},u.formatList);if(u.disable){return D}C=e.type(C)==="number"?C+"":C;C=C||null;C=e.type(C)!=="array"?[C]:C;u.value=[];if(C.length!=0){v=j(e.extend(true,[],C),u.format);if(!z){var A=m.call(D,"maxdate",true);var x=m.call(D,"mindate",true);e.each(v,function(E,F){if(F!=null){if(A&&F[0]-A>0){v[E]=null;return true}if(x&&x-F[0]>0){v[E]=null;return true}}})}u.selDate=e.extend(true,[],v);u.cache.selDate=e.extend(true,[],v)}B.quarter="yyyyq";B.week="yyyyw";for(var y=0;y<v.length;y++){u.value.push(v[y]?v[y][1]:"");w.push(v[y]?n.Date.format(v[y][0],B[u.curModel[0]]):"")}w=w.join("~");u.inputEl.eq(0).val(/^.*~$/.test(w)?(w=w.replace("~","")):w);if(w===""){u.inputEl.val(u.emptytext).addClass("C_CR_calInput_empty")}else{u.inputEl.removeClass("C_CR_calInput_empty")}if(z){D.onValid()}else{D._triggerHandler("change")}if(typeof u.on_change==="function"&&!z){u.on_change.apply(D,e.extend(true,[],v))}return D},getValue:function(v){var w=this,y=w.options,z=[];if(y.disable){return""}v=v?v:"string";var u=y.isrange?2:1;for(var x=0;x<u;x++){if(!y.value[x]){z[x]=v==="string"?"":null;y.value[x]=v==="string"?"":null;continue}if(v==="date"){z[x]=n.Date.parse(y.value[x],y.format)}else{z[x]=y.value[x]}}return y.isrange?z:z[0]},setMaxDate:function(u){var v=this.options;if(v.model!=="date"||typeof u!=="string"||!/\d{4}(\-\d{2}){2}/.test(u)){return}v.maxdate[0]=u},setMinDate:function(u){var v=this.options;if(v.model!=="date"||typeof u!=="string"||!/\d{4}(\-\d{2}){2}/.test(u)){return}v.mindate[0]=u},getDateRange:function(v){var C=this,u=C.options,z=e.extend(true,[],u.selDate),A=[],x,B;v=v?v:"date";B=v==="date"?null:"";for(var y=0;y<z.length;y++){if(!(x=z[y])){A.push([B,B]);continue}switch(u.curModel[0]){case"month":A.push([w(new Date(x[2],x[3],1,0,0,0,0)),w(new Date(x[2],x[3],new Date(x[2],x[3]+1,0).getDate(),23,59,59,0))]);break;case"year":A.push([w(new Date(x[2],0,1,0,0,0,0)),w(new Date(x[2],11,31,23,59,59,0))]);break;case"quarter":A.push([w(new Date(x[2],x[3],1,0,0,0,0)),w(new Date(x[2],x[3]+2,new Date(x[2],x[3]+3,0).getDate(),23,59,59,0))]);break;case"week":A.push([w(new Date(x[2],x[3],x[4],0,0,0,0)),w(new Date(x[2],x[3],x[4]+6,23,59,59,0))]);break;default:A.push([w(new Date(x[0].getTime())),w(new Date(x[2],x[3],x[4],23,59,59,0))])}}if(A.length===1){return u.curModel[0]==="date"?A[0][0]:A[0]}else{return[A[0][0],A[1][1]]}function w(D){if(v==="date"){return D}else{return n.Date.format(D,"yyyy-MM-dd hh:mm:ss")}}},setWidth:function(w){var u=this.options.el.children("div"),v=this.options.width;if(w==null||w===undefined||w===""||typeof w==="object"){return}if(typeof w==="string"&&/^(\d)+(px|pt|em|PX|PT|EM|%)$/.test(w)){v=w}else{v=w+"px"}u.css({width:w})},setReadonly:function(u){u=typeof u==="undefined"?true:u;var v=this,w=v.options,x=u?"addClass":"removeClass";if(u===w.readonly){return}w.el.children(".C_CR_calInput_bd")[x](w.inputDisClass);w.readonly=u},destroy:function(){var u=this,v=u.options;u._super();v.el.unbind().empty();v.pEl&&v.pEl.remove()},setTextMode:function(){var v=this,w=v.options,u=v.getLabelValue();if(w.isrange){w.el.eq(0).html(u[0]+"~"+u[1])}else{w.el.eq(0).html(u[0])}},getLabelValue:function(){var w=this,y=w.options,v=[],u,z=/^(?:\{.*\}|\[.*\])$/;u=e.type(y.value);if(u==="string"){y.value=z.test(y.value)?e.parseJSON(y.value.replace(/\\'/g,"#@@#").replace(/'/g,'"').replace(/#@@#/g,"'")):[y.value]}for(var x=0;x<y.value.length;x++){u=e.type(y.value[x]);if(u==="string"){v.push(y.value[x])}else{if(u==="date"){v.push(b(y.value[x],y.format)[1])}}}return v},onInValid:function(x,y){var u=this,w=u.options;w.tipTxt=w.tipTxt===null?w.el.attr("tip"):w.tipTxt;w.el.attr("tip",y);for(var v=0;v<w.value.length;v++){if(!w.value[v]){w.el.children(".C_CR_calInput_bd").addClass(w.inputErrClass)}}},onValid:function(w){var u=this,v=u.options;v.tipTxt=v.tipTxt===null?v.el.attr("tip"):v.tipTxt;v.el.attr("tip",v.tipTxt||"");v.el.children(".C_CR_calInput_bd").removeClass(v.inputErrClass)}});function j(y,w){var x=null;for(var v=0,u=y.length;v<u;v++){x=e.type(y[v]);if(x==="string"){y[v]=b(n.Date.parse(y[v],w),w)||null}else{if(x==="date"){y[v]=b(y[v],w)||null}}}return y}function s(v,y,A){var x=[],z,B=new Date(v.getTime()),u=A?B.getDay()-1:(B.getDay()||7)-1;for(var w=0;w<6;w++){x.push([n.Date.getOnWeek(new Date(B.getTime()),y,A).week,0]);B.setDate(B.getDate()+(7-u));u=0}return x}function i(M){var F=this,D=F.options,y=[],J=0,w=0,C=[],L,H,v,B,z,I,A,E=M.getFullYear(),u=M.getMonth();D.mindate[1]=m.call(F,"mindate");D.maxdate[1]=m.call(F,"maxdate");B=new Date(E,u,1).getDay();z=new Date(E,u,0).getDate();I=new Date(E,u+1,0).getDate();D.sunday_first||B--;if(B<0){B=6}var x=u-1<0?true:false,K=u+1>11?true:false;for(L=0;L<B;L++){v=new Date(x?E-1:E,x?11:u-1,z,0,0,0,0);if(G(v,D.mindate[1],"mindate")||G(v,D.maxdate[1],"maxdate")){H=0}else{H=1}y.push([z,H,v.getFullYear(),v.getMonth()]);z--}y.reverse();for(L=1;L<=I;L++){v=new Date(E,u,L,0,0,0,0);if(G(v,D.mindate[1],"mindate")||G(v,D.maxdate[1],"maxdate")){H=0}else{H=1}y.push([L,H,E,u])}for(L=1;L<=42-I-B;L++){v=new Date(K?E+1:E,K?0:u+1,L,0,0,0,0);if(G(v,D.mindate[1],"mindate")||G(v,D.maxdate[1],"maxdate")){H=0}else{H=1}y.push([L,H,v.getFullYear(),v.getMonth()])}A=s(M,D.iso8601,D.sunday_first);for(L=0;L<48;L++){if(L!=0&&L%8!=0){C.push(y[J]);J++}else{C.push(A[w]);w++}}return{year:E,month:u,date:C};function G(P,N,O){if(!N){return false}if(O==="mindate"){return P.getTime()<N.getTime()}else{return P.getTime()>N.getTime()}}}function t(x,v){var u=[];if(v>0){for(var w=0;w<v;w++){u.push(x);x++}}else{for(var w=0;w<-v;w++){u.push(x);x--}u.reverse()}return u}function c(u){var w=["1","2","3","4","5","6","7","8","9","10","11","12"],v=[];u=u||[0,11];for(var x=u[0];x<=u[1];x++){v.push([x,w[x]])}return v}function d(y,x,z){var v=[],w;for(var u=31;u>0;u--){w=n.Date.getOnWeek(new Date(y,11,u),x,z).week;if(w!=1){break}}for(u=1;u<=w;u++){v.push([u,1])}return v}function b(u,v){if(!u){return null}var w=[];w.push(u);w.push(n.Date.format(u,v));w.push(u.getFullYear(),u.getMonth(),u.getDate());w.push(u.getHours(),u.getMinutes(),u.getSeconds());return w}function r(v){if(!v||v.length<2||!v[0]||!v[1]){return v}var u;if(v[0][0]>v[1][0]){u=v[1];v[1]=v[0];v[0]=u}return v}function m(A,D){var I=this,u=I.options,G,x=u[A][0],F=u.nocurrent;if(!x){return null}var w=/^([\+\-]{1})([0-9]{1,})([yMd]{1})$/,y=[null,null,null];if(typeof x==="string"){if(/[\+\-]{1}[0-9]{1,}[yMd]{1}/.test(x)){var H=x.split(","),C,B,E=[0,0,0],v=[new Date().getFullYear(),new Date().getMonth(),new Date().getDate()];for(var z=0;z<H.length;z++){C=H[z].match(w);B="yMd".indexOf(C[3]);y[B]+=(C[1]==="+"?1:-1)*(+C[2])+v[B]}for(z=0;z<y.length;z++){E[z]=y[z]===null?0:1}switch(E.join("-")){case"1-0-0":x=A==="mindate"?new Date(y[0],0,1):new Date(y[0],11,31);break;case"1-1-0":x=A==="mindate"?new Date(y[0],y[1],1):new Date(y[0],y[1],new Date(y[0],y[1]+1,0).getDate());break;case"1-1-1":F&&(y[2]=A==="mindate"?y[2]+1:y[2]-1);x=new Date(y[0],y[1],y[2]);break;case"0-1-1":F&&(y[2]=A==="mindate"?y[2]+1:y[2]-1);x=new Date(v[0],y[1],y[2]);break;case"0-0-1":F&&(y[2]=A==="mindate"?y[2]+1:y[2]-1);x=new Date(v[0],v[1],y[2]);break;case"0-1-0":x=A==="mindate"?new Date(v[0],y[1],1):new Date(v[0],y[1],new Date(y[0],y[1]+1,0).getDate());break;case"1-0-1":F&&(y[2]=A==="mindate"?y[2]+1:y[2]-1);x=new Date(y[0],v[1],y[2]);break}x=new Date(x.getFullYear(),x.getMonth(),x.getDate(),23,59,59)}else{if(G=e(x).data("uitype")){if(!(x=G.getValue("date"))){return null}F&&x.setDate(A==="mindate"?x.getDate()+1:x.getDate()-1)}else{if(!/^[0-9]{4}\-[0-9]{2}\-[0-9]{2}|[0-9]{4}\-[0-9]{2}|[0-9]{4}$/.test(x)){return null}x=n.Date.parse(x,"yyyy-MM-dd");F&&x.setDate(A==="mindate"?x.getDate()+1:x.getDate()-1);x=new Date(x.getFullYear(),x.getMonth(),x.getDate(),23,59,59)}}}else{x=e.type(x)==="date"?x:null;F&&x&&x.setDate(A==="mindate"?x.getDate()+1:x.getDate()-1)}return D?new Date(x.getFullYear(),x.getMonth(),x.getDate(),x.getHours(),x.getMinutes(),x.getSeconds(),0,0):new Date(x.getFullYear(),x.getMonth(),x.getDate(),0,0,0,0,0)}function f(u,y){var w=u.children(".C_CR_YM_wrap");var x="C_CR_tx_wrap_disable";if(y==="hide"){w.hide()}else{switch(y){case"disYear":w.find("span.C_CR_YMer_tx_y").addClass(x).parent().children(".C_CR_DisMark").show();break;case"disMonth":var v=w.find("span.C_CR_YMer_tx_m").addClass(x).parent().children(".C_CR_DisMark").show();break;case"dis":w.find("span.C_CR_YMer_tx_wrap").addClass(x).parent().children(".C_CR_DisMark").show();break;case"unDis":w.find("span.C_CR_YMer_tx_wrap").removeClass(x).parent().children(".C_CR_DisMark").hide();break;default:w.find("span.C_CR_YMer_tx_wrap").removeClass(x).parent().children(".C_CR_DisMark").hide()}w.show()}}function a(u,v,x){var w=e("table.C_CR_YMer:eq("+x+")",u).attr("val",v.year+"|"+(v.month-1)).find("input.C_CR_tx");w.eq(0).val(v.year);w.eq(1).val(v.month)}function k(y,w){var u=this,x=u.options,v;if(!x.activePop&&!y){return}if(x.activePop){x.activePop.hide();x.activePop.parents("div.C_CR_YMer_item").eq(0).children("span:eq(0)").removeClass("C_CR_tx_wrap_focus");x.activePop.parent(".C_CR_Timer_tx_wrap").removeClass("C_CR_tx_wrap_focus")}if(y){y.show();if(w==="ym"){v=y.parents("div.C_CR_YMer_item").eq(0).children("span:eq(0)")}else{v=y.parent(".C_CR_Timer_tx_wrap")}v.addClass("C_CR_tx_wrap_focus");x.activePop=y}}function h(){var u=this,A=u.options,z=A.pEl.children(".C_CR_OPBar_wrap").children("a").show(),x=z.filter('[val^="ok"]'),w=z.filter('[val^="clear"]'),y=z.filter('[val^="cur"]'),v={date:"&nbsp;",month:"&nbsp;",year:"&nbsp;",quarter:"",week:"&nbsp;"};y.html(v[A.curModel[0]]);A.okbtn||x.hide();A.clearbtn||w.hide()}function l(){var u=this,w=u.options;var v=w.pEl.children(".C_CR_Timer_box");if(w.curModel[0]==="date"&&/[h|s|m]/.test(w.format)){v.show()}else{v.hide()}}function q(A,y,B){var u=this,z=u.options,w=z.curModel[0],v;switch(y){case"CUR":v="C_CR_main_cur";break;case"SEL":v="C_CR_main_cur_d";break;case"clear":e("td.C_CR_main_cur_d",z.pEl).removeClass("C_CR_main_cur_d");return}if(A){A.parent("td").addClass(v)}else{for(var x=0;x<B.length;x++){e("#C_CR_"+w+"_"+B[x].join("_")+"_"+z.uuid).parent("td").addClass(v)}}}function o(x){var u=x.panel;var w=209*u;x.pEl.css("width",w+3*(x.panel-1));var v=x.pEl.outerWidth();var y=x.pEl.outerHeight();if(n.Browser.isIE6||n.Browser.isQM){x.pEl.find("iframe").css({width:v,height:y})}}function p(u){var x=e(window),w=u.el.children(".C_CR_calInput_bd"),v=w.offset(),D=w.outerHeight(),y=w.outerWidth(),z=x.width(),A=x.height(),G=x.scrollLeft(),F=x.scrollTop(),E=u.pEl.outerWidth(),B=u.pEl.outerHeight(),C={};if(v.left+E>z+G){if(v.left+y>E){C.left=y+v.left-E}else{if(z>E||z<E){C.left=0}}}else{C.left=v.left}if(v.top+D+B>A+F){if(v.top-B>0&&v.top-F){C.top=v.top-B}else{if(v.top<A+F-v.top-D){C.top=v.top+D}}}else{C.top=v.top+D}u.pEl.css(C);if(!u.isBuild){u.isBuild=true}}})(window.comtop.cQuery,window.comtop);(function(a,b){b.UI.ClickInput=b.UI.Base.extend({options:{uitype:"ClickInput",name:"",value:"",emptytext:"",width:"",maxlength:-1,readonly:false,icon:"",iconwidth:"",enterable:false,editable:false,textmode:false,on_iconclick:null,on_change:null,on_focus:null,on_blur:null,on_keyup:null,on_keydown:null},relation:"data-relation-value",tipPosition:".click_input_base",_init:function(){var c=this.options;c.id=b.guid();if(c.name==""){c.name=b.guid()+"_"+c.uitype}},_create:function(){var c=this.options;this.$inputWrap=a("#"+c.id+"_wrap");this.$inputBox=a("#"+c.id+"_box");this.$input=a("#"+c.id);this.$iconspan=a("#"+c.id+"_icon");if(c.icon!=""){if(c.icon.indexOf("/")!=-1||c.icon.indexOf(".")!=-1){this.$iconspan.css({backgroundImage:"url("+c.icon+")"})}else{this.$iconspan.addClass(c.icon)}}this.setWidth(c.width);if(c.readonly){this.setReadOnly(true)}if(c.value==""&&c.emptytext!=""){this.$input.val(c.emptytext);this.$input.addClass("input_tipcolor")}this.setEditAble(c.editable)},setWidth:function(c){this.$inputWrap.css({width:b.Tools.fixedNumber(c)})},setValue:function(d,f){var e=this.$input,c=this.options;d=(d==null||d==undefined)?"":d;if(a.type(d)=="string"){e.removeAttr(this.relation);e.val(d)}else{if(a.type(d)=="array"){if(d.length>0){e.val(d[0]);d.splice(0,1);e.attr(this.relation,d.join("|"))}}}if((d!=""&&d!=null)||(a.type(d)=="array"&&d.length>0)){e.removeClass("input_tipcolor")}else{if(c.emptytext!=""){e.val(c.emptytext);e.addClass("input_tipcolor")}}if(f){this.onValid()}else{this._triggerHandler("change")}},getValue:function(){var g=this.$input;var e=this.options;var f=a.trim(g.val());var d=g.attr(this.relation);var c=e.emptytext;if(f===c){return""}else{if(d){f=f+"|"+d;return f.split("|")}else{return f}}},getLabelValue:function(){var c=this.options.value;if(a.type(c)=="string"){return c}else{if(a.type(c)=="array"){if(c.length>0){return c[0]}else{return""}}}},setMaxLength:function(c){this.options.maxlength=c},setReadOnly:function(c){this.setReadonly(c)},setReadonly:function(c){var e=this.options;var g=this.$input;var f=this.$inputBox;e.readonly=c;if(c){g.attr("readonly",true);g.addClass("input_garybg");f.addClass("input_garybg");this._removeEmptyText(true)}else{if(e.editable){g.attr("readonly",false)}g.removeClass("input_garybg");f.removeClass("input_garybg");this._removeEmptyText(false)}this.$iconspan.css({display:c?"none":"inline-block"});var d="22px";if(e.iconwidth!=""){d=(parseFloat(e.iconwidth)+5)+"px"}this.$inputBox.css({marginRight:c?0:d})},setEditAble:function(c){var d=this.options;var e=this.$input;if(d.readonly){return false}d.editable=c;if(c){e.attr("readonly",false)}else{e.attr("readonly",true)}},_changeHander:function(d){var c=this.options;var f=this.$input;if(c.readonly){return false}if(this.getValue()!=""){f.removeClass("input_tipcolor")}this._triggerHandler("change");this._customHandler("on_change",d)},_focusHandler:function(d){var c=this.options;if(!c.editable||c.readonly){this.$input.blur();return false}this._removeEmptyText(true);this.$inputBox.addClass("input_focus");this.onValid();this._customHandler("on_focus",d)},_blurHandler:function(g){var c=this.options;var f=this.$inputBox;if(c.readonly){return false}this._removeEmptyText(false);f.removeClass("input_focus");this._textCounter();var d=this.getValue();switch(a.type(d)){case"string":if(d!==""&&d!=null){this._triggerHandler("change")}break;case"array":if(d.length!==0){this._triggerHandler("change")}break}this._customHandler("on_blur",g)},_keyupHandler:function(d){var c=this.options;if(c.readonly){return false}this._textCounter();this._customHandler("on_keyup",d)},_keydownHandler:function(d){var c=this.options;if(c.readonly){return false}if(c.enterable&&d.keyCode==13){this._iconclickHandler(d);return false}this._customHandler("on_keydown",d)},_iconclickHandler:function(d){var c=this.options;if(c.readonly){return false}this._customHandler("on_iconclick",d)},_customHandler:function(d,g){var f=this.options;var c=f[d];if(a.type(c)=="string"){typeof window[c]==="function"&&window[c].call(this,g,this)}else{typeof c==="function"&&c.call(this,g,this)}},_removeEmptyText:function(e){var f=this.$input;var d=this.options.emptytext;var c=this.getValue();if(d==""||c.length!=0){return}if(e){f.val("");f.removeClass("input_tipcolor")}else{f.val(d);f.addClass("input_tipcolor")}},_textCounter:function(){var d=this.options;var e=this.getValue();if(typeof e==="object"){e=this.$input.val()}if(d.maxlength>0){var c=b.String.getBytesLength(e);if(c>d.maxlength){this.setValue(b.String.intercept(e,d.maxlength))}else{return false}}return false},onInValid:function(f,e){var c=this,d=c.options;c.$inputBox.addClass("click_input_invalid");if(d.tipTxt==null){d.tipTxt=d.el.attr("tip")||""}d.el.attr("tip",e)},onValid:function(e){var c=this,d=c.options,g=a(c.tipPosition,d.el).attr("tipID");c.$inputBox.removeClass("click_input_invalid");if(d.tipTxt==null){d.tipTxt=d.el.attr("tip")||""}if(g!==undefined){var f=cui.tipList[g];typeof f!=="undefined"&&f.hide()}d.el.attr("tip",d.tipTxt)}})})(window.comtop.cQuery,window.comtop);(function(a,b){b.UI.Customform=b.UI.Base.extend({options:{uitype:"Customform",columnCount:2,datasource:[],classname:"customform"},_create:function(){var d=this.options.datasource,h,g,e,j,f,c;window.validater=window.validater||cui().validate();for(f=0;f<d.length;f++){h=d[f];e=h.uitype||h.uiType;g=e.charAt(0).toLowerCase()+e.substring(1);cui(h.el)[g](h)}for(f=0;f<d.length;f++){h=d[f];this._bindData(a(h.el),h.databind)}if(!b.UI.scan.textmode&&!comtop.UI.scan.disable){for(f=0,c=d.length;f<c;f++){h=d[f];j=a(h.el).data("uitype");if(j&&!j.options.textmode&&!j.options.disable){this._bindValidate(j.options.el,h.validate);this._bindTip(j.options.el,h,j.tipPosition||j.options.el)}}}},_bindData:function(f,c){if(c){var e=c.split(".");var h=e[0];var g=e[1];var i=window[h];if(!i){i=window[h]={}}if(i.nodeName){alert(""+h+"ID;");return false}var d=cui(i).databind();d.addBind(f,g)}},_bindValidate:function(e,c){if(c){switch(a.type(c)){case"array":for(var d=0;d<c.length;d++){if(c[d].rule){window.validater.add(cui(e),c[d].type,c[d].rule)}else{window.validater.add(cui(e),c[d].type)}}break;case"string":window.validater.add(cui(e),c)}}},_bindTip:function(d,e,c){c=a(c,d);if(cui(d).options.textmode!=undefined&&e.tip==undefined){d.attr("tip","");e.tip=""}if(e.tip!=undefined){d.attr("tip",e.tip);cui.tip(c,{trigger:e.trigger,tipEl:d})}}})})(window.comtop.cQuery,window.comtop);(function(h){if(!h.cui){h.cui={}}var b=h.comtop,g=b&&b.cQuery?b.cQuery:h.jQuery,e=h.cui,j=h.document;var c=g.browser.msie,f=c&&g.browser.version==="6.0",d=c&&!g.support.boxModel;var a=function(){var k=g("body"),l=k.data("cui_dialog_eventproxylay");if(!l){l=g(j.createElement("div")).addClass("cui_dialog_eventproxylay").appendTo(k);k.data("cui_dialog_eventproxylay",l)}return l};var i=function(k){k=k||{};this.opt=g.extend(true,{},this.options,k);this._init()};i.prototype={options:{uitype:"Dialog",id:"",title:"",modal:true,opacity:0.7,canClose:true,width:350,height:100,left:"50%",top:"50%",draggable:true,hideContent:false,onClose:null,beforeClose:null,src:"",html:"",buttons:[],page_scroll:true,dragClass:".dialog-titlebar"},_init:function(){this._preProcessSettings();this._buildHTML();this._markUp();this._setContent();this._setUpSize();this._bindEvent()},_preProcessSettings:function(){var l=this.opt,k=function(){return(900*Math.random()+100).toString().replace(".","")};l.id=l.id===""?"dialog_"+k():l.id;l.left=l.left.toString();l.top=l.top.toString();l.left=l.left.indexOf("%")!==-1?l.left:parseInt(l.left,10)+"px";l.top=l.top.indexOf("%")!==-1?l.top:parseInt(l.top,10)+"px"},_buildHTML:function(){var l=this.opt,k=[];if(l.modal){if(f){k.push('<iframe id="cui_overlay_iframe_',l.id,'" class="cui_overlay_iframe"></iframe>')}k.push('<div class="cui_overlay" id="cui_overlay_',l.id,'"></div>')}k.push('<div class="cui-dialog-container" id="',l.id,'" style="');k.push("left:",l.left,"; top:",l.top,';">');if(l.canClose){k.push('<a href="#" onclick="return false;" title="" class="dialog-close-btn"><span class="dialog-close-btn-span"></span></a>')}k.push('<div class="dialog-titlebar"><span class="dialog-title" title="'+l.title.replace(/<.*?>/g,"").replace('"',"")+'">');k.push(l.title,"</span></div>");k.push('<div class="dialog-content" >');if(typeof l.html==="string"&&l.html!==""){k.push('<div class="dialog-content-inner">');k.push(l.html);k.push("</div>")}else{if(typeof l.src==="string"&&l.src!==""){k.push('<iframe class="dialog-content-iframe" frameborder="no" border="0" src="about:blank;" ></iframe><div class="dialog-iframe-loading"></div>')}else{k.push('<div class="dialog-content-inner"></div>')}}if(g.isArray(l.buttons)&&l.buttons.length>0){k.push('<div class="dialog-ft">');k.push(this._buildButtons());k.push("</div>")}k.push("</div>");k.push("</div>");g("body").append(k.join(""))},_markUp:function(){var k=this.opt;this._$dialogContainer=g("#"+k.id);this._$dialogContent=this._$dialogContainer.find(".dialog-content-inner");this._$iframe=this._$dialogContainer.find(".dialog-content-iframe");this._$loadingLay=this._$dialogContainer.find(".dialog-iframe-loading");this._$buttonContainer=this._$dialogContainer.find(".dialog-ft");this._$overlay=g("#cui_overlay_"+k.id);this._$iframecover=g("#cui_overlay_iframe_"+k.id);this._$mousemoveProxyLay=a()},_setContent:function(){var k=this.opt;if(typeof k.el==="object"){this._$dialogContent.prepend(g(k.el).show())}else{if(typeof k.html==="object"){this._$dialogContent.prepend(g(k.html).show())}}},_setUpSize:function(){var k=this.opt;if(k.height){if(this._$iframe.length){this._$iframe.height(k.height)}else{this._$dialogContent.height(k.height)}}if(k.width){this._$dialogContainer.width(k.width)}},_bindEvent:function(){var l=this.opt,k=this;this._$dialogContainer.delegate("a.btn-normal,span.dialog-close-btn-span,a.dialog-close-btn","click",function(o){var n=g(o.target),m=n.attr("proxyIndex");if(m&&m!==""){m=parseInt(m,10);l.buttons[m].handler.call(k);return}if(typeof l.beforeClose==="function"){if(l.beforeClose.call(k)!==false){k.hide()}}else{k.hide()}return false});if(l.draggable){this._doDrag()}else{this._$dialogContainer.find(".dialog-titlebar").css("cursor","default")}},_doDrag:function(){var q=this.opt,l=false,m=this,o={top:0,left:0},p=function(v){var u=g(h).height(),t=g(h).width(),r=m._dialogContainerOuterWidth,s=m._dialogContainerOuterHeight;if(v.left+r>=t){v.left=t-r}if(v.top+s>=u){v.top=u-s}},n=function(){l=false;m._$mousemoveProxyLay.off();m._showContent(true)},k=function(r){if(l){var s={left:r.clientX-o.left,top:r.clientY-o.top,"margin-left":"","margin-top":"",bottom:"",right:""};s.left=s.left<0?0:s.left;s.top=s.top<0?0:s.top;p(s);m._$dialogContainer.css(s);q.left=s.left;q.top=s.top}};g(q.dragClass,this._$dialogContainer).on("mousedown.dialogDrag",function(r){var s=this.getBoundingClientRect();o.top=r.clientY-s.top;o.left=r.clientX-s.left;l=true;m._showContent(false);m._$mousemoveProxyLay.off().on("mousemove.dialogDrag",function(t){k(t)}).on("mouseup.dialogDrag",function(){n()});return false}).on("mouseup.dialogDrag",n)},_showContent:function(k){if(k){this._$mousemoveProxyLay.hide();if(this.opt.hideContent){this._$dialogContent.css("visibility","visible");this._$iframe.css("visibility","visible")}}else{this._$mousemoveProxyLay.show();if(this.opt.hideContent){this._$dialogContent.css("visibility","hidden");this._$iframe.css("visibility","hidden")}}},_buildButtons:function(){var q=this.opt,o={hide:false,disable:false,handler:function(){},name:""},n=[];for(var m=0,k=q.buttons.length;m<k;m++){q.buttons[m]=g.extend({},o,q.buttons[m]);var l=q.buttons[m],p="btn-normal ";p+=l.disable?" btn-normal-dis ":"";p+=l.hide?" btn-normal-hide ":"";n.push('<a href="#" hidefocus="true" onclick="return false;" class="',p,'" proxyIndex="',m,'">',l.name,"</a>")}return n.join("")},_calPosition:function(){var k=this.opt;return{"margin-left":-k.width/2,"margin-top":-this._$dialogContainer.height()/2}},_setPosition:function(){var l=this.opt,k=this._$dialogContainer;if(l.left==="50%"&&l.top==="50%"){k.css(this._calPosition())}else{if(l.left==="100%"&&l.top==="100%"){k.css({left:"",top:"",right:0,bottom:0})}}},_showOverLay:function(){if(this._$overlay.length===0){return}if(f||d){this._ieQScrollTop=g(j).scrollTop();g(j).scrollTop(0);g("html,body").addClass("cui_overlay_dialog_ie6");if(this._$iframecover.length){this._$iframecover.show()}}this._$overlay.css("opacity",this.opt.opacity).show()},_hideOverLay:function(){if(this._$overlay.length===0){return}if(f||d){g("html,body").removeClass("cui_overlay_dialog_ie6");if(this._$iframecover.length){this._$iframecover.hide()}g(j).scrollTop(this._ieQScrollTop)}this._$overlay.hide()},_initIframeSrc:function(){if(this._$iframe.length&&!this._srcSetted){this._loadIframe(this.opt.src);this._srcSetted=true}},_cacheDialogSize:function(){this._dialogContainerOuterWidth=this._$dialogContainer.outerWidth();this._dialogContainerOuterHeight=this._$dialogContainer.outerHeight()},_loadIframe:function(l){var k=this;this._$loadingLay.height(this._$iframe.height()).show();this._$iframe.css("visibility","hidden").attr("src",l);setTimeout(function(){k._$iframe.css("visibility","visible");k._$loadingLay.hide()},500)},show:function(k){if(!k){this._initIframeSrc()}else{this.reload(k)}if(!this.opt.page_scroll){g("html").addClass("cui-dialog-noscroll")}this._setPosition();this._showOverLay();this._$dialogContainer.show();this._cacheDialogSize();return this},reload:function(k){if(!this._$iframe.length||!k){return this}this._loadIframe(k);this.opt.src=k;return this},hide:function(){this._hideOverLay();this._$dialogContainer.hide();if(!this.opt.page_scroll){g("html").removeClass("cui-dialog-noscroll")}if(typeof this.opt.onClose==="function"){this.opt.onClose.call(this)}return this},setTitle:function(l){var k=typeof l;if(k==="number"||k==="string"){this.opt.title=l;g("span.dialog-title",this._$dialogContainer).html(l)}return this},setButton:function(m,n){var k=arguments.length,p=this.opt,l=this,o=function(){if(l._$buttonContainer.length){l._$buttonContainer.html(l._buildButtons())}};if(k===1&&g.type(m)==="array"){g.extend(p.buttons,m);o()}else{if(k===2&&typeof m==="number"){if(m>p.buttons.length){return}g.extend(p.buttons[m],n);o()}}return this},setSize:function(k){if(g.type(k)!=="object"){return this}if(k.width){this.opt.width=k.width}if(k.height){this.opt.height=k.height}this._setUpSize();this._setPosition();this._cacheDialogSize();return this},getIframeMember:function(k){if(this._$iframe.length){return this._$iframe.get(0).contentWindow[k]}else{return null}},getIframe:function(){if(this._$iframe.length){return this._$iframe.get(0)}else{return null}},move:function(m,l){var k={};if(typeof m==="number"){k.top=m;k["margin-top"]="";this.opt.top=m}if(typeof l==="number"){k.left=l;k["margin-left"]="";this.opt.left=l}if(g.isEmptyObject(k)){return this}k=g.extend({bottom:"",right:""},k);this._$dialogContainer.css(k);return this},destroy:function(){this._$dialogContainer.remove();this._hideOverLay();if(this._$overlay.length){this._$overlay.remove()}if(this._$iframecover.length){this._$iframecover.remove()}}};i.prototype.constructor=i;if(b&&b.UI&&b.cQuery){b.UI.dialog=i;b.cQuery.fn.dialog=function(k){var l=this.data("uitype");k=k||{};k.html=this.get(0);if(typeof l!=="object"){l=new b.UI.dialog(k);this.data("uitype",l)}return l}}e.dialog=function(k){var m=k.id,l=new i(k);if(typeof b==="object"&&m){b.cQuery("#"+m).data("uitype",l)}return l}})(window);(function(a,b){b.UI.Input=b.UI.Base.extend({options:{uitype:"Input",width:"200px",readonly:false,maxlength:-1,value:"",emptytext:"",name:"",type:"text",mask:"",maskoptions:{},textmode:false,align:"left",on_change:null,on_focus:null,on_blur:null,on_keyup:null,on_keydown:null,on_keypress:null},tipPosition:".cui_inputCMP_wrap",_init:function(){var c=this.options;c.id="cui_inputCMP_"+b.guid();if(c.type!=="password"&&c.type!=="hidden"){c.type="text"}if(c.name===""){c.name=b.guid()+"_"+c.uitype}c.value=c.value.replace(/\"/g,"&quot;").replace(/\'/g,"&#39;")},_create:function(){var c=this,e=c.options;this.$input=a("#"+e.id).css("textAlign",e.align);if(e.mask!==""){var d=a.extend({},e.maskoptions,{callback:function(){c._removeEmptyText(false)}});b.UI.InputMask.doMask(this.$input,e.mask,d)}if(e.value===""&&e.emptytext!==""){this.$input.val(e.emptytext);e.el.addClass("cui_inputCMP_empty")}if(e.maxlength>-1){this.$input.on("input propertychange",function(f){c._textCounter()})}},setWidth:function(c){if(typeof c==="string"&&/\d+(\%|px|pt|em)/.test(c)){this.options.el.children("div").css({width:c})}else{if(typeof c==="number"){this.options.el.children("div").css({width:c+"px"})}}},setValue:function(e,g){var f=this.$input,d=this.options;e=(e==null||e==undefined)?"":e;f.val(e);if(d.maxlength>0){this._textCounter()}if(e!==""){d.el.removeClass("cui_inputCMP_empty");if(d.mask!==""){var c=a.extend({},d.maskoptions,{callback:function(){this._removeEmptyText(false)}});b.UI.InputMask.doMask(this.$input,d.mask,c)}}else{if(d.emptytext!==""){f.val(d.emptytext);d.el.addClass("cui_inputCMP_empty")}}if(g){this.onValid()}else{this._triggerHandler("change");f.change()}},getValue:function(){var f=this.$input;var d=this.options;var e=f.val();var c=d.emptytext;if(a.trim(e)===c){return""}else{if(d.mask!==""){return b.UI.InputMask.unMaskValue(f,d.mask,d.maskoptions)}return e}},setMaxLength:function(c){this.options.maxlength=c},setReadOnly:function(c){var d=this.options;var e=this.$input;d.readonly=c;e.attr("readonly",c);if(c){d.el.children("div").addClass("cui_inputCMP_readonly");this._removeEmptyText(true)}else{d.el.children("div").removeClass("cui_inputCMP_readonly");this._removeEmptyText(false)}},setReadonly:function(c){this.setReadOnly(c)},focus:function(){var c=this.options;if(!c.readonly){c.el.find(":text, :password").focus()}return this},_changeHander:function(d){var c=this.options;var f=this.$input;if(c.readonly){return false}if(this.getValue()!==""){c.el.removeClass("cui_inputCMP_empty")}else{if(c.emptytext!==""){f.val(c.emptytext);c.el.addClass("cui_inputCMP_empty")}}this._triggerHandler("change");this._customHandler("on_change",d)},_focusHandler:function(d){var c=this.options;if(c.readonly){return false}this._removeEmptyText(true);c.el.addClass("cui_inputCMP_focus");this.onValid();this._customHandler("on_focus",d)},_blurHandler:function(f){var c=this.options;if(c.readonly){return false}this._removeEmptyText(false);c.el.removeClass("cui_inputCMP_focus");this._textCounter();var d=this.getValue();if(d!==""&&d!=null){this._triggerHandler("change")}this._customHandler("on_blur",f)},_keyupHandler:function(d){var c=this.options;if(c.readonly){return false}this._textCounter();this._customHandler("on_keyup",d)},_keydownHandler:function(d){var c=this.options;if(c.readonly){return false}this._customHandler("on_keydown",d)},_keypressHandler:function(d){var c=this.options;if(c.readonly){return false}this._customHandler("on_keypress",d)},_customHandler:function(d,g){var f=this.options;var c=f[d];if(a.type(c)==="string"){typeof window[c]==="function"&&window[c].call(this,g,this)}else{typeof c==="function"&&c.call(this,g,this)}},_removeEmptyText:function(e){var g=this.$input;var d=this.options.emptytext;var c=this.getValue();var f=this.options;if(d===""||c.length!==0){return}if(e){g.val("");f.el.removeClass("cui_inputCMP_empty")}else{g.val(d);f.el.addClass("cui_inputCMP_empty")}},_textCounter:function(){var d=this.options;var e=this.getValue().toString();if(d.maxlength>-1){var c=b.String.getBytesLength(e);if(c>d.maxlength){this.$input.val(b.String.intercept(e,d.maxlength))}else{return false}}return false},onInValid:function(f,e){var c=this,d=c.options;d.el.addClass("cui_inputCMP_error");if(d.tipTxt==null){d.tipTxt=d.el.attr("tip")||""}d.el.attr("tip",e)},onValid:function(e){var c=this,d=c.options,g=a(c.tipPosition,d.el).attr("tipID");d.el.removeClass("cui_inputCMP_error");if(d.tipTxt==null){d.tipTxt=d.el.attr("tip")||""}if(g!==undefined){var f=cui.tipList[g];typeof f!=="undefined"&&f.hide()}d.el.attr("tip",d.tipTxt)}})})(window.comtop.cQuery,window.comtop);(function(d,g){var a=null;var b={};function c(){var i=cui.handleMask;var h=d("#"+b.id);a=new g.UI.Overlay();if(h.length===0){var j="z-index:"+(b.zIndex+1)+";";d("body").append('<div id="'+b.id+'" class="handlemask_wrap" style="'+j+'"></div>');h=d("#"+b.id)}h.html(b.html);h.css({visibility:"hidden",display:"block"});f();h.css({visibility:"visible",display:"none"})}function f(){var h=d("#"+b.id);h.css({margin:"-"+h.height()/2+"px 0 0 -"+h.width()/2+"px"})}function e(){d("#"+b.id).remove();if(b.mask){a.hide(0.5)}a._dom.remove();a=undefined}cui.handleMask=function(h){h=d.type(h)==="object"?h:{};if(d("#"+b.id).length!==0){e()}b=d.extend(true,{html:'<div class="handlemask_image_1"></div>',mask:true,zIndex:9999999,id:"handleMask_"+g.guid()},h);c();return cui.handleMask};cui.handleMask.show=function(){if(d("div.handlemask_wrap").length===0){cui.handleMask()}var h=d("#"+b.id);if(h.attr("isOpen")!=="true"){if(b.mask){a._dom.css("zIndex",b.zIndex).attr("id","ol_"+b.id);a.show(0.5)}h.show().attr("isOpen","true")}return cui.handleMask};cui.handleMask.hide=function(){if(d("div.handlemask_wrap").length===0){return}var h=d("#"+b.id);h.hide().attr("isOpen","false");if(b.mask){a.hide(0.5)}return cui.handleMask}})(window.comtop.cQuery,window.comtop);(function(a,b){b.UI.ListBox=b.UI.Base.extend({options:{uitype:"ListBox",width:"200",height:"200",name:"listboxName",value:"",value_field:"id",label_field:"text",multi:false,textmode:false,datasource:null,on_dbclick:null,on_click:null,on_select_change:null,on_add:null,on_remove:null,icon_path:null},$el:null,listbox:null,hiddenEl:null,listTemplateName:"cListBox",valueField:null,labelField:null,priorElement:null,rowTemplateName:"cListBoxRow",_init:function(c){this.$el=a(this.options.el);this._initParams();this.$el.addClass("cui")},_create:function(){if(typeof this.options.datasource=="function"){this.options.datasource(this,{})}this.listbox=a(".listbox",this.$el);this.hiddenEl=a("[type=hidden]",this.$el);this.valueField=this.options.value_field;this.labelField=this.options.label_field;this._setConfiguration();this._setDefaultText()},_initParams:function(){this._analysisHtmlTemplate()},_analysisHtmlTemplate:function(){var d=a("a",this.$el);if(d==null||typeof d=="undefine"||d.length<1){return}var f=this.options.value_field;var e=this.options.label_field;var c=[];a.each(d,function(h,i){var g={};g[e]=a.trim(a(this).text());g[f]=a.trim(a(this).attr("value"));c.push(g)});this.$el.html("");this.options.datasource=c},_setConfiguration:function(){this.listbox.width(this.options.width);this.listbox.height(this.options.height)},_selectChangeCallback:function(){var c=this.options.on_select_change;if(a.type(c)==="string"){window[c](this.getSelectedRows())}else{if(a.isFunction(c)){c(this.getSelectedRows())}}},setDatasource:function(c){this.options.datasource=c;this._renderElement()},setMulti:function(c){var d=this.options;if(d.multi===c||typeof c!=="boolean"){return}else{d.multi=c;this.cancelSelected()}},_renderElement:function(){var c=a(".tr",this.$el);this._buildTemplate(c,this.rowTemplateName,this.options)},_setDefaultText:function(){if(this.options.value){var g=a(".tr",this.$el);var h=this.options.multi?this.options.value.split(";"):this.options.value;var e=this.options.value_field;var f=[];var c=this.options.datasource;var d=this;a.each(c,function(i,j){if(d.options.multi){a.each(h,function(k,l){if(l==j[e]){a("li[name="+l+"]",g).addClass("selected");f.push(j[e])}})}else{if(h==j[e]){a("li[name="+h+"]",g).addClass("selected");f.push(j[e])}}});this.hiddenEl.val(f.join(";"))}},setWidth:function(c){this.listbox.width(c)},getRecordData:function(c){var f=this;var e=null;var d=this.options.datasource;a.each(d,function(g,h){if(h[f.valueField]==c){e=h;return false}});return e},getLabelValue:function(){if(this.options.value==""||!this.options.textmode){return""}var f=this.options.value.split(";");var d=this.options.value_field;var c=this.options.label_field;var e=[];a.each(this.options.datasource,function(g,h){a.each(f,function(j,k){if(k==h[d]){e.push(h[c])}})});return e.join(";")},deleteRecordData:function(c){var e=this;var d=null;var g=this.options.datasource;var f=[];if(this.hiddenEl.val()!=""){f=this.hiddenEl.val().split(";")}a.each(g,function(h,i){if(i[e.valueField]==c){d=i;g.splice(h,1);f.pop(c);return false}});this.hiddenEl.val(f.join(";"));return d},getValue:function(){var c=this.options.value_field;var d=[];var e=this.getSelectedRows();e=e===null?[]:(this.options.multi?e:[e]);a.each(e,function(f,g){d.push(g[c])});return d.join(";")},getText:function(){var c=this;var d=[];var e=this.getSelectedRows();e=e===null?[]:(this.options.multi?e:[e]);a.each(e,function(f,g){d.push(g[c.labelField])});return d.join(";")},setValue:function(e){var f=e+"";var d=f.split(";");if(!this.options.multi&&d.length>1){return}var c=[];this.cancelSelected();a(".td",this.$el).each(function(g,h){if(a.inArray(a(this).attr("name"),d)>=0){c.push(a(this).attr("name"));a(this).addClass("selected")}});this.hiddenEl.val(c.join(";"))},addRows:function(h){var e=[];var c=this;var d=true;if(h==null||h.length<1){return}var g=h;if(a.isPlainObject(h)){g=[];g.push(h)}if(this.options.datasource!=null){a.each(g,function(j,k){d=true;a.each(c.options.datasource,function(l,m){if(m[c.valueField]===k[c.valueField]){d=false;return false}});if(d){e.push(k)}});if(e.length<1){return}}else{e=g;c.options.datasource=[]}var f=a.extend({},this.options);f.datasource=e;this.options.datasource=this.options.datasource.concat(e);this._buildTemplate(a(".tr",this.$el),this.rowTemplateName,f,true);var i=this.options.on_add;if(a.type(i)==="string"){window[i](e)}else{if(a.isFunction(i)){i(e)}}},removeRow:function(d){var e=this;var g=null;var f=a("li[name="+d+"]",this.$el);if(f){g=this.deleteRecordData(d);f.remove()}var c=this.options.on_remove;if(a.type(c)==="string"){window[c]([g])}else{if(a.isFunction(c)){c([g])}}return g},removeSelectedRows:function(){var e=[];var d=this;a(".selected",this.$el).each(function(f,g){e.push(d.deleteRecordData(a(this).attr("name")));a(this).remove()});var c=this.options.on_remove;if(a.type(c)==="string"){window[c](e)}else{if(a.isFunction(c)){c(e)}}return e},removeAllRows:function(){var f=[];var d=this;var e;var g=this.options.datasource;a(".td",this.$el).remove();if(g!=null&&g.length>0){f=g.splice(0,g.length)}this.hiddenEl.val("");var c=this.options.on_remove;if(a.type(c)==="string"){window[c](f)}else{if(a.isFunction(c)){c(f)}}return f},getRow:function(d){var f=this.getRowSize();var c=null;if(d<f){var e=a(".td",this.$el).eq(d).attr("name");c=this.getRecordData(e)}return c},getSelectedRows:function(){var d=this.options.multi?[]:null;var c=this;a(".selected",this.$el).each(function(e,f){if(c.options.multi){d.push(c.getRecordData(a(this).attr("name")))}else{d=c.getRecordData(a(this).attr("name"))}});return d},selectRow:function(c){var d=[];if(this.hiddenEl.val()!=""){d=this.hiddenEl.val().split(";")}if(c>=0&&c<this.getRowSize()){a(".td",this.$el).eq(c).addClass("selected");d.push(a(".td",this.$el).eq(c).attr("name"));this.hiddenEl.val(d.join(";"))}this._selectChangeCallback()},selectAllRows:function(){if(!this.options.multi){return}var c=[];a(".td",this.$el).each(function(d,e){a(this).addClass("selected");c.push(a(this).attr("name"))});this.hiddenEl.val(c.join(";"));this._selectChangeCallback()},cancelSelected:function(){a(".selected",this.$el).each(function(c,d){a(this).removeClass("selected")});this.hiddenEl.val("");this._selectChangeCallback()},getAllRows:function(){return this.options.datasource},moveRow:function(e,c){var f=this.getRowSize();if(e>=0&&e<f&&c>=0&&c<f&&e!=c){var d=a(".td",this.$el);if(e<c){d.eq(c).after(d.eq(e))}else{d.eq(c).before(d.eq(e))}this.options.datasource.splice(c,0,this.options.datasource.splice(e,1)[0])}},moveUp:function(){var g=this.getSelectedRows();var f=this.getRowSize();var d;for(var e=0,c=g.length;e<c;e++){d=this._getRowIndexByName(g[e][this.valueField]);if(d==0){break}this.moveRow(d,d-1)}},moveDown:function(){var f=this.getSelectedRows();var e=this.getRowSize();var c;for(var d=f.length-1;d>=0;d--){c=this._getRowIndexByName(f[d][this.valueField]);if(c==(e-1)){break}this.moveRow(c,c+1)}},getRowSize:function(){return a(".td",this.$el).length},_getRowDataByKey:function(c){var d=this,f=this.options.datasource;var e=null;a.each(f,function(g,h){if(h&&h[d.valueField]==c){e=h;return false}});return e},_getRowIndexByName:function(d){var c=a("li",this.$el).index(a("li[name="+d+"]",this.$el));return c},_rowClick:function(d,k,m){var n="selected";var o=a(k);var h=[];if(this.hiddenEl.val()!=""){h=this.hiddenEl.val().split(";")}if(o.hasClass(n)){this.priorElement=null;o.removeClass(n);var e=o.attr("name");for(var l=0,g=h;l<g;l++){if(h[l]==o.attr("name")){h.splice(l,1);break}}}else{if(!this.options.multi){a(".selected",this.$el).each(function(i,j){a(this).removeClass("selected")});this.hiddenEl.val("");o.addClass(n);h=[];h.push(o.attr("name"))}else{if(this.options.multi&&d.shiftKey){if(this.priorElement==null){this.priorElement=o.attr("name");h.push(this.priorElement)}else{var q=this._getRowIndexByName(o.attr("name"));var c=this._getRowIndexByName(this.priorElement);var f=a(".td",this.$el);a(".selected",this.$el).each(function(i,j){a(this).removeClass("selected")});this.hiddenEl.val("");for(var l=Math.min(q,c),g=Math.max(q,c);l<=g;l++){f.eq(l).addClass(n);h.push(f.eq(l).attr("name"))}}o.addClass(n)}else{this.priorElement=o.attr("name");h.push(this.priorElement);o.addClass(n)}}}this.hiddenEl.val(h.join(";"));var p=this.options.on_click;if(a.type(p)==="string"){var e=a(k).attr("name");window[p](this._getRowDataByKey(e))}else{if(a.isFunction(p)){var e=a(k).attr("name");p(this._getRowDataByKey(e))}}this._selectChangeCallback()},_rowDblClick:function(f,d,g){var e=this.options.on_dbclick;if(a.type(e)==="string"){var c=a(d).attr("name");window[e](this._getRowDataByKey(c))}else{if(a.isFunction(e)){var c=a(d).attr("name");e(this._getRowDataByKey(c))}}},_trhoverin:function(d,c,e){var f="hover";a(c).addClass(f)},_trhoverout:function(d,c,e){var f="hover";a(c).removeClass(f)},_setCacheData:function(c,d){this.$el.data(c,d)},_getCacheData:function(c){return this.$el.data(c)},_removeCacheData:function(c){this.$el.removeData(c)}})})(window.comtop.cQuery,window.comtop);(function(c,d){d.UI.InputMask={Datetimes:"9999-1m-td 2h:59:59",Times:"2h:59:59",Time:"2h:59",Datetime:"9999-1m-td 2h:59",Date:"9999-1m-td",Int:{precision:0,prefix:"",separator:","},Dec:{precision:null,prefix:"",separator:","},Num:{precision:0,prefix:"",separator:""},Money:{precision:2,prefix:"",separator:",",negative:false},Integer:{precision:0,prefix:""},definitions:{"9":"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]",d:"d",m:"m",h:"h",t:"t","1":"[0-1]","2":"[0-2]","3":"[0-3]","4":"[0-4]","5":"[0-5]","6":"[0-6]","7":"[0-7]","8":"[0-8]"},dataName:"rawMaskFn",doMask:function(g,e,i){var j=e.toLocaleLowerCase();var f=c(g);switch(j){case"int":case"num":case"dec":case"money":var h;h=c.extend(true,{},this[e],i);if(j==="int"||j==="num"){h.precision=0}f.data("inputMaskModel",h);f.numberFormat(e,h);break;case"integer":f.scrapNumFormat(this[e].precision,this[e].prefix);break;case"custom":if(i&&i.model){f.mask(i.model,i)}break;default:if(this[e]){f.mask(this[e],i)}}},unMaskValue:function(i,n,h){function f(q,p){var o=false;c.each(p,function(r,s){if(q==r){o=true}});return o}var k=n.toLocaleLowerCase();var m=c(i);switch(k){case"int":case"num":case"dec":case"money":var l=m.data("inputMaskModel");var j=c.trim(l.prefix+l.separator);var e=c.trim(m.val());if(e!==""){if(j===""){return e.replace(/(?:\.(?:0+)?|(\.[1-9]+)0+)$/,"$1")}else{var g=new RegExp("["+j+"]","g");return m.val().replace(g,"").replace(/(?:\.(?:0+)?|(\.[1-9]+)0+)$/,"$1")}}else{return""}break;case"integer":return c(i).val().replace(/,/g,"");case"custom":return c(i).mask();default:return c(i).val()}}};var a=(d.Browser.isIE?"paste":"input")+".mask";var b=(window.orientation!=undefined);c.fn.extend({caret:function(g,e){if(this.length==0){return}if(typeof g=="number"){e=(typeof e=="number")?e:g;c("#test").val(g+":"+e);return this.each(function(){if(this.setSelectionRange){this.setSelectionRange(g,e)}else{if(this.createTextRange){var h=this.createTextRange();h.collapse(true);h.moveEnd("character",e);h.moveStart("character",g);h.select()}}})}else{if(this[0].setSelectionRange){g=this[0].selectionStart;e=this[0].selectionEnd}else{if(document.selection&&document.selection.createRange){var f=document.selection.createRange();g=0-f.duplicate().moveStart("character",-100000);e=g+f.text.length}}return{begin:g,end:e}}},unmask:function(){return this.trigger("unmask")},mask:function(g,k){if(!g&&this.length>0){var h=c(this[0]);return h.data(d.UI.InputMask.dataName)()}k=c.extend({placeholder:"_",completed:null},k);var f=d.UI.InputMask.definitions;var j=[];var l=g.length;var i=null;var e=g.length;c.each(g.split(""),function(m,n){if(n=="?"){e--;l=m}else{if(f[n]){j.push(f[n]);if(i==null){i=j.length-1}}else{j.push(null)}}});return this.trigger("unmask").each(function(){var w=c(this);var r=c.map(g.split(""),function(A,z){if(A!="?"){return f[A]?k.placeholder:A}});var y=w.val();function v(z){while(++z<=e&&!j[z]){}return z}function s(z){while(--z>=0&&!j[z]){}return z}function n(C,B,E){switch(C){case"m":var J=w.val().substring(E-1,E);var D=parseFloat(B);if(J==="0"){return(D>0&&D<=9)}else{if(J==="1"){return(D>=0&&D<3)}}break;case"d":var A=w.val();var J=A.substring(E-1,E);var H=A.substring(0,4);var G=A.substring(5,7);var I=new Date(H,G,0).getDate();var z=(I+"").split("")[0];var F=(I+"").split("")[1];var D=parseFloat(B);if(J<z){if(J===0){return(D>0&&D<=9)}else{return(D>=0&&D<=9)}}else{return(D>=0&&D<=F)}break;case"h":var J=w.val().substring(E-1,E);var D=parseFloat(B);if(J==="0"||J==="1"){return(D>=0&&D<=9)}else{if(J==="2"){return(D>=0&&D<=3)}}break;case"t":var A=w.val();var H=A.substring(0,4);var G=A.substring(5,7);var I=new Date(H,G,0).getDate();var z=(I+"").split("")[0];var D=parseFloat(B);return D>=0&&D<=z;break;default:return new RegExp(C).test(B)}}function q(D,z){if(D<0){return}for(var C=D,B=v(z);C<e;C++){if(j[C]){if(B<e&&n(j[C],r[B],C)){r[C]=r[B];r[B]=k.placeholder}else{break}B=v(B)}}u();var A=i>D?i:D;w.caret(A)}function m(D){for(var B=D,C=k.placeholder;B<e;B++){if(j[B]){var z=v(B);var A=r[B];r[B]=C;if(z<e&&n(j[z],A,z)){C=A}else{break}}}}function t(C){var A=C.which;if(A==8||A==46||(b&&A==127)){var D=w.caret(),B=D.begin,z=D.end;if(z-B==0){B=A!=46?s(B):(z=v(B-1));z=A==46?v(z):z}o(B,z);q(B,z-1);return false}else{if(A==27){w.val(y);w.caret(0,p());return false}}}function x(C){var z=C.which,E=w.caret();if(C.ctrlKey||C.altKey||C.metaKey||z<32){return true}else{if(z){if(E.end-E.begin!=0){o(E.begin,E.end);q(E.begin,E.end-1)}var B=v(E.begin-1);if(B<e){var D=String.fromCharCode(z);if(n(j[B],D,B)){m(B);r[B]=D;u();var A=v(B);w.caret(A);if(k.completed&&A>=e){k.completed.call(w)}}}return false}}}function o(B,z){for(var A=B;A<z&&A<e;A++){if(j[A]){r[A]=k.placeholder}}}function u(){return w.val(r.join("")).val()}function p(A){var E=w.val();var D=-1;for(var z=0,C=0;z<e;z++){if(j[z]){r[z]=k.placeholder;while(C++<E.length){var B=E.charAt(C-1);if(n(j[z],B,z)!==false){r[z]=B;D=z;break}}if(C>E.length){break}}else{if(r[z]==E.charAt(C)&&z!=l){C++;D=z}}}if(!A&&D+1<l){w.val("");o(0,e)}else{if(A||D+1>=l){u();if(!A){w.val(w.val().substring(0,D+1))}}}return(l?z:i)}w.data(d.UI.InputMask.dataName,function(){return c.map(r,function(A,z){return j[z]&&A!=k.placeholder?A:null}).join("")});if(!w.attr("readonly")){w.one("unmask",function(){w.unbind(".mask").removeData(d.UI.InputMask.dataName)}).bind("focus.mask",function(){y=w.val();var A=p();u();var z=function(){if(A==g.length){w.caret(0,A)}else{w.caret(A)}};(c.browser.msie?z:function(){setTimeout(z,0)})()}).bind("blur.mask",function(){p();if(w.val()!=y){w.change()}if(k.callback){k.callback()}}).bind("keydown.mask",t).bind("keypress.mask",x).bind(a,function(){setTimeout(function(){w.caret(p(true))},0)})}p()})},scrapNumFormat:function(l,k){var i=this,g=i.val();var j=function(o,u,r){var s=o.toString(),q=s.indexOf("."),t,m;if(q<0){t=s;m=""}else{t=s.substring(0,q);if(typeof u=="undefined"){m=s.substring(q)}else{m=s.substring(q,q+u+1)}}var p=/(-?\d+)(\d{3})/;while(p.test(t)){t=t.replace(p,"$1,$2")}return r?r+t+m:t+m};var e=function(){var m=i.val();if(!m.match(/^[\+\-]?\d*?\.?\d*?$/)){i.val(g)}else{g=m}};var f=function(){i.val(j(i.val(),l,k))};var h=function(){var m=i.val();if(k){m=m.replace(k,"")}m=m.replace(/,/g,"");i.val(m);e()};if(!i.attr("readonly")){i.one("unmask",function(){i.unbind(".mask")}).bind("keyup.mask",e).bind(a,e).bind("blur.mask",f).bind("focus.mask",h)}},numberFormat:function(m,f){var l=this,e=l.val();if(!/^[\d\.]*$/.test(e)){l.val("");e="";return}var g=function(q,s,t,p){var v=q.toString(),u,o,r;if(m==="Money"&&s!==null&&s!=="null"){v=d.Number.round(v,s-0)||v}u=v.indexOf(".");if(u<0){o=v;r=""}else{o=v.substring(0,u);switch(s){case"null":case null:r=v.substring(u);break;case"0":r="";break;default:r=v.substring(u,u+s+1)}}var w=/(-?\d+)(\d{3})/;if(!!p||p!==""){while(w.test(o)){o=o.replace(w,"$1"+p+"$2")}}if(s>0){if(/\./.test(r)){s=s-(r.length-1)}for(var n=0;n<s;n++){r+="0"}if(!/\./.test(r)){r="."+r}}return t?t+o+r:o+r};var j={intReg:/^[\+\-]?([1-9]\d*|0)?$/,numReg:/^\d*$/,decReg:/^[\+\-]?([1-9]\d*\.?\d*?|0\.\d*?|0)?$/,moneyReg:/^[\+\-]?([1-9]\d*\.?\d*?|0\.\d*?|0)?$/};if(f.negative===false&&m==="Money"){j.moneyReg=/^([1-9]\d*\.?\d*?|0\.\d*?|0)?$/}var h=function(){var n=l.val();if(!j[m.toLocaleLowerCase()+"Reg"].test(n)){l.val(e)}else{e=n}};var i=function(){var o=l.val();l.data("orgValue",o);if(c.trim(o)===""){return}var n=g(o,f.precision,f.prefix,f.separator);if(/^[\-\+]$/.test(o)){n=""}l.val(n)};var k=function(){var o=c.trim(l.val())===""?"":l.data("orgValue");if(f.prefix){o=o.replace(f.prefix,"")}o=o.replace(/,/g,"");if(c.trim(o)===""){l.val("")}else{l.val(o)}if(d.Browser.isIE){var n=l.get(0).createTextRange();n.move("textedit");n.select()}h()};if(e!==""){i()}if(!l.attr("readonly")){l.one("unmask",function(){l.unbind(".mask")}).unbind(".mask").bind("keyup.mask",h).bind(a,h).bind("blur.mask",i).bind("focus.mask",k)}}});c.mask={};c.mask.definitions=d.UI.InputMask.definitions})(window.comtop.cQuery,window.comtop);(function(a,b){b.UI.Menu=b.UI.Base.extend({options:{uitype:"Menu",trigger:"click",width:"",on_click:null,datasource:null},_init:function(){var c=this;c.objMenu=null;c.objItemMap={};c.hideTimeout=null},_create:function(){var c=this;var e=this.options.el;var d=c.options.trigger;e.bind(d,function(f){f.stopPropagation();c.show()});e.bind("mouseout",function(f){c.hideTimeout=setTimeout(function(){c.hide()},100)});e.bind("mouseover",function(f){clearTimeout(c.hideTimeout)})},_loadTemplate:function(k,c){var h=this._buildTemplateStr("menuDom",c);h=this._bindTplEvent(h);var e=a(h);k.append(e);var d=e.find("li");for(var f=0;f<c.length;f++){var g=c[f];this.objItemMap[g.id]=g;if(g.disabled){this._disable(a("#"+g.id))}if(g.items){var j=d.eq(f);j.find("a").addClass("menu_item_a_background");this._loadTemplate(j,g.items)}}return e},_loadMenu:function(){if(this.objMenu==null){var c=this.options;if(a.isFunction(c.datasource)){c.datasource=c.datasource()}this.setDatasource(c.datasource)}},setDatasource:function(c){if(c){var e=this.options;this.objMenu=this._loadTemplate(a("body"),c);var d=this;this.objMenu.bind("mouseover",function(f){d.hideTimeout&&clearTimeout(d.hideTimeout)});this.objMenu.bind("mouseout",function(f){d.hideTimeout=setTimeout(function(){d.objMenu.hide()},100)})}},_mouseoverHandler:function(f,c,d){if(a("#"+c.id).attr("disabled")){return}if(c.mouseTimeout){clearTimeout(c.mouseTimeout)}var g=a(c).children(".menu_box");a(c).parent().children().css("zIndex",1);a(c).css("zIndex",2);if(g){g.show();this._setItemPosition(g,c);this._setItemsWidth(g.children(".menu"),this.options.width);this._setIframe(g)}},_mouseoutHandler:function(f,c,d){if(a("#"+c.id).attr("disabled")){return}var g=a(c).children(".menu_box");c.mouseTimeout=setTimeout(function(){g.hide()},100)},_clickHandler:function(g,c,f){if(a("#"+c.id).attr("disabled")){return}g.stopPropagation();if(b.Browser.isIE6||(b.Browser.isIE&&b.Browser.isQM)){var d=a("#"+c.id);while(d[0].tagName!="BODY"){if(d[0].tagName=="DIV"){d.hide()}d=d.parent()}}this.hide();this.options.on_click&&this.options.on_click(this.objItemMap[c.id])},_setItemPosition:function(l,e){var d=l;l=l.children(".menu");var m={};var c=a(e);var f=c.offset();var j=c.outerHeight();var n=c.outerWidth();var k=l.outerHeight();var g=l.outerWidth();var i=a(window).height();var h=a(window).width();if(h-(f.left+n+g)<10&&(f.left-n)>0){m.left=0-g+4;m.right="auto"}else{m.left="auto";m.right=4}if(i-(f.top+j+k)<10&&(f.top-k)>0){m.bottom=0+k-4;m.top="auto"}else{m.bottom="auto";m.top=-4}d.css(m)},_setPosition:function(c){var d=a(c).offset();var i=a(c).outerHeight();var l=a(c).outerWidth();var h=a(window).height();var f=a(window).width();var e=this.objMenu.children(".menu").outerHeight();var j=this.objMenu.children(".menu").outerWidth();var k;var g;if(h-(d.top+i+e)<0&&(d.top-e)>0){k=d.top-e}else{k=d.top+i}if(f-(d.left+j)<0&&(d.left+l-j)>0){g=d.left+l-j}else{g=d.left}this.objMenu.css({left:g,top:k})},_setItemsWidth:function(c,h){var g=c.children("li");var f=0;for(var d=0;d<g.length;d++){var e=g.eq(d).children("a").children("span").outerWidth();if(e>f){f=e}}if(h>f){f=h}else{f=f+10}c.width(f)},_setIframe:function(c){if(b.Browser.isIE6){c.children("iframe").css({width:c.find(".menu_item").width(),height:c.find(".menu").height()})}},_setWidth:function(c){var d;if(this.options.width){d=parseInt(this.options.width,10)}else{d=a(c).outerWidth()-2}this.options.width=d;this._setItemsWidth(this.objMenu.children(".menu"),d)},_disable:function(c){c.children("a").children("span").addClass("menu_item_disable");c.attr("disabled",true)},_enable:function(c){c.children("a").children("span").removeClass("menu_item_disable");c.attr("disabled",false)},show:function(d){this._loadMenu();this.objMenu.show();if(!d){d=this.options.el}this._setWidth(d);this._setPosition(d);this._setIframe(this.objMenu);var c=this},hide:function(){this.objMenu&&this.objMenu.hide()},disable:function(e,c){this._loadMenu();var d=a("#"+e);if(c==true){this._disable(d)}else{this._enable(d)}},setLabel:function(e,c){this._loadMenu();var d=a("#"+e);d.children("a").children("span").html(c)}})})(window.comtop.cQuery,window.comtop);(function(b){var a=b.cQuery;b.UI.MultiNav=b.UI.Base.extend({options:{uitype:"MultiNav",unfold:false,initchecked:[],datasource:[],target:"_self",foldercheckable:false},_init:function(){this._pos=-1},_create:function(){this.root=this.options.root=this.options.el.children(".multinav").eq(0);this._setDatasource(this.options.datasource)},_initcheck:function(f){var g=this.root;for(var e=0,d=f.length;e<d;e++){g=g.children("li").eq(f[e]);var c=g.find("a").eq(0);if(c.hasClass("multinav_fold")){if(e===d-1&&this.options.foldercheckable){c.addClass("checked");this._pos=c.attr("pos")}c.addClass("multinav_unfold").data("unfold",true);g=g.children("ul").eq(0);g.addClass("multinav_ul_unfold")}else{c.addClass("checked");this._pos=c.attr("pos");break}}},_bindEvents:function(){var c=this;var d=null;this.root.on("mouseover",function(f){f.stopPropagation();var g=a(f.target),j=g.attr("pos");if(!j){g=g.parent();j=g.attr("pos");if(!j){return}}d=c._getCheckedData(j);var i=d.bind,h=f.type;if(typeof i!=="object"){return}var e=i["on_"+h];if(typeof e==="function"){f.target=g[0];e(f,g[0],d)}});this.root.on("mouseout dblclick click",function(f){f.stopPropagation();var g=a(f.target),j=g.attr("pos");if(!j){g=g.parent();j=g.attr("pos");if(!j){return}}var i=f.type,h=d.bind;if(typeof h!=="object"){return}var e=h["on_"+i];if(typeof e==="function"){f.target=g[0];e(f,g[0],d)}return false})},_setDatasource:function(d){this.setDatasource(d,undefined);this._bindEvents();this._initcheck(this.options.initchecked);var c=this;this.root.on("mousedown",function(e){e.stopPropagation();c._mousedown(e.target)})},setDatasource:function(f,d){this._pos=-1;var c=d?a.extend(this.options,d):this.options;function g(h){return new Function(h)}function e(l,o){var r=a(document.createDocumentFragment());for(var m=0,k=l.length;m<k;m++){var h=l[m],q=a(document.createElement("li")),p=a(document.createElement("a"));p.attr("hidefocus","true");q.append(p);if(h.onclick){p.click(g(h.onclick))}if(h.ondblclick){p.dblclick(g(h.ondblclick))}if(h.onmouseover){p.mouseover(g(h.onmouseover))}if(h.onmouseout){p.mouseout(g(h.onmouseout))}if(h.title){p.attr("title",h.title)}p.attr("pos",o+m);if(h.bind){p.attr("ev","1")}if(typeof h.href==="string"){p.attr("href",h.href);p.attr("target",h.target||c.target)}else{p.attr("href","javascript:;")}if(typeof h.children==="object"){p.addClass("multinav_fold").append("<span>"+h.name+"</span>");var n=a("<ul></ul>");n.append(e(h.children,o+m+"-"));q.append(n)}else{p.html(h.name)}r.append(q)}return r}this.options.datasource=f;c.root.html(e(f,""));if(c.unfold){this.allUnfold()}if(d&&d.initchecked){this._initcheck(d.initchecked)}},allUnfold:function(){this.root.find("ul").addClass("multinav_ul_unfold").show().end().find(".multinav_fold").addClass("multinav_unfold").data("unfold",true)},allFold:function(){this.root.find("ul").removeClass("multinav_ul_unfold").hide().end().find(".multinav_fold").removeClass("multinav_unfold").data("unfold",false)},_mousedown:function(c){var e=a(c);e=e.prop("tagName")==="A"?e:e.parent();var f=e.attr("pos");if(e.hasClass("multinav_fold")){var d=e.data("unfold");d=d===undefined?this.options.unfold:d;if(d){e.data("unfold",false).removeClass("multinav_unfold").next("ul").hide()}else{e.data("unfold",true).addClass("multinav_unfold").next("ul").show()}if(this.options.foldercheckable){this.root.find(".checked").removeClass("checked");e.addClass("checked");this._pos=f}}else{this.root.find(".checked").removeClass("checked");e.addClass("checked");this._pos=f}},_getCheckedData:function(f){if(f===-1){return null}var e=this.options.datasource;f=f.split("-");var c=f.length;for(var d=0;d<c-1;d++){e=e[parseInt(f[d],10)].children}e=e[parseInt(f[d],10)];return e},getCheckedData:function(){var c=this._getCheckedData(this._pos);if(c===null||c.children!==undefined&&!this.options.foldercheckable){return null}return c}})})(window.comtop);(function(e,f){if(!f.cui){f.cui={}}var g=function(){},c=f.cui,a=e.browser.msie,d=a&&e.browser.version==="6.0",b=a&&!e.support.boxModel,h=f.document;g.prototype={_template:function(){var l=this.options;var k=['<div class="msg-box"'];k.push(' id="'+this.buildId+'" style="');if(l.width){k.push("width:"+l.width+"px;")}if(l.height){k.push("height:"+l.height+"px;")}k.push('">');if(l.canClose===true){k.push('<a href="#" hidefocus="true" title="" onclick="return false;" class="msgbox-close-btn"><span class="msgbox-close-btn-span"></span></a>')}k.push('<div class="msgbox-titlebar">');k.push('<span class="msgbox-title" title="'+l.title.replace(/<.*?>/g,"").replace('"',"")+'">'+l.title+"</span>");k.push("</div>");k.push('<div class="msgbox-content">');k.push('<div class="box-icon  '+l.iconCls+'"></div>');k.push('<div class="box-msg">');k.push(l.msg,"</div>");if(e.isArray(l.buttons)){k.push('<div class="msgbox-ft">');this._buildButtons(k);k.push("</div>")}k.push("</div>");k.push("</div>");return k.join("")},_buildButtons:function(n){var o=this.options;for(var m=0,k=o.buttons.length;m<k;m++){var l="";if(typeof o.buttons[m].handler==="function"){l+=m}if(o.buttons[m].focus===true){o._buttonFocusIndex=m}n.push('<a proxyIndex="'+l+'" class="btn-normal" href="#" onclick="return false;">'+o.buttons[m].name+"</a>")}},_addClass:function(){var l=this.options,k=this.$container;if(l.position==="rb"){k.addClass("msg-box-rb");if(!d&&b){k.css({bottom:"",top:e(h).scrollTop()+e(f).height()-k.outerHeight()})}}else{if(l.position==="center"){k.addClass("msg-box-center").css({"margin-left":-k.width()/2,"margin-top":-k.height()/2})}else{if(l.position==="custom"){k.addClass("msg-box-custom").css(l.customPos)}}}},_showOverlay:function(){if(d||b){this._ieQScrollTop=e(h).scrollTop();e(h).scrollTop(0);e("html,body").addClass("cui_overlay_ie6");if(this._$iframecover){this._$iframecover.show()}}this.$overlay.show()},_hideOverlay:function(){if(d||b){e("html,body").removeClass("cui_overlay_ie6");if(this._$iframecover){this._$iframecover.hide()}if(this.options.scrollBack===true){e(h).scrollTop(this._ieQScrollTop)}}this.$overlay.hide()},_doAnimate:function(){var l=this.$container,k=l.height();l.height(0).animate({height:k,opacity:"show"},350)},_bindEvent:function(){var l=this.options,k=this;this.$container.delegate("a.btn-normal,span.msgbox-close-btn-span","click",function(o){var n=e(o.target),m=n.attr("proxyIndex");k.hide();if(m&&m!==""){m=parseInt(m,10);l.buttons[m].handler.call(null)}});if(l.dragAble){this._doDrag()}if(typeof l._buttonFocusIndex==="number"){this.$container.find(".btn-normal").eq(l._buttonFocusIndex).focus()}return false},_doDrag:function(){var n=this.options,p=false,s=this,q={top:0,left:0},r=this.$container.outerWidth(),m=this.$container.outerHeight(),l=function(v){var u=e(f).height(),t=e(f).width();if(v.left+r>=t){v.left=t-r}if(v.top+m>=u){v.top=u-m}},o=function(){p=false;e(h).off("mousemove.msgBoxdrag").off("mouseup.msgBoxdrag");s._disableSelect(false)},k=function(t){if(p){var u={left:t.clientX-q.left,top:t.clientY-q.top};u.left=u.left<0?0:u.left;u.top=u.top<0?0:u.top;l(u);s._setPosition(u)}};e(n.dragClass,this.$container).on("mousedown.msgBoxdrag",function(t){var u=this.getBoundingClientRect();q.top=t.clientY-u.top;q.left=t.clientX-u.left;p=true;e(h).on("mousemove.msgBoxdrag",function(v){k(v)}).on("mouseup.msgBoxdrag",function(){o()});s._disableSelect(true)}).on("mouseup.msgBoxdrag",o)},_disableSelect:function(k){if(k){e(h.body).addClass("cui-userselectnone");e(h).on("selectstart",function(l){return false})}else{e(h.body).removeClass("cui-userselectnone");e(h).off("selectstart")}},_setPosition:function(l){var k=this.options;l=e.extend({top:"",left:"",right:"","margin-left":"","margin-top":"",bottom:""},l);this.$container.css(l)},_commonOptions:{msg:"",modal:true,canClose:true,autoClose:false,animate:false,position:"center",customPos:{},opacity:0.1,title:"",width:330,height:0,onClose:null,dragAble:true,scrollBack:false,dragClass:".msgbox-titlebar"},wrapOptions:function(m,k,l){var n=l||{};n.msg=m;n.onClose=k;return n},setOptions:function(l,m){var k=e.extend({},this._commonOptions,l,m||{});this.options=k;return k},show:function(){var l=this.options;this._addClass();if(l.modal){this._showOverlay()}if(l.animate&&!b){this._doAnimate()}else{this.$container.show()}if(typeof l.autoClose==="number"){var k=this;f.setTimeout(function(){k.hide()},l.autoClose)}this._bindEvent()},hide:function(){var k=this.options;if(k.modal){this._hideOverlay()}this.$container.hide();if(typeof k.onClose==="function"){k.onClose.call(null)}},buildHtml:function(){var m=(900*Math.random()+100).toString().replace(".",""),l=this.options;var k=h.createDocumentFragment();this.buildId=m;if(l.modal){this.$overlay=e(h.createElement("div")).addClass("cui_overlay").css("opacity",l.opacity);if(d){this._$iframecover=e(h.createElement("iframe")).addClass("cui_overlay_iframe");e(k).append(this._$iframecover)}e(k).append(this.$overlay)}e(k).append(this._template());if(this.options.boxType==="message"){e(h.body).prepend(k)}else{e(h.body).append(k)}this.$container=e("#"+this.buildId)},reBuildHtml:function(){var k=this.options;this.$container.unbind().replaceWith(this._template());this.$container=e("#"+this.buildId)}};var j=function(l,m){var k={alert:"box-icon-alert",success:"box-icon-success",confirm:"box-icon-confirm",error:"box-icon-error",warn:"box-icon-warn"};m.iconCls=k[l]||"box-icon-alert"},i=function(p,l,n,k,o){var m=null;if(!c[o].builded){m=new g();n=m.wrapOptions(p,l,n);n.boxType=o;m.setOptions(k,n);m.buildHtml();c[o].builded=m}else{m=c[o].builded;n=m.wrapOptions(p,l,n);m.setOptions(k,n);m.reBuildHtml()}m.show()};c.alert=function(n,l,m){var k={title:"",buttons:[{name:"",focus:true}],iconCls:"box-icon-alert"};i(n,l,m,k,"alert")};c.warn=function(n,l,m){var k={title:"",buttons:[{name:"",focus:true}],iconCls:"box-icon-warn"};i(n,l,m,k,"warn")};c.success=function(n,l,m){var k={title:"",buttons:[{name:"",focus:true}],iconCls:"box-icon-success"};i(n,l,m,k,"success")};c.error=function(n,l,m){var k={title:"",buttons:[{name:"",focus:true}],iconCls:"box-icon-error"};i(n,l,m,k,"error")};c.message=function(n,m,l){var k={modal:false,canClose:false,autoClose:1500,animate:true,width:180,position:"rb",title:"",dragAble:false,buttons:null};l=l||{};j(m,l);i(n,null,l,k,"message")};c.confirm=function(m,l){var k={title:"",iconCls:"box-icon-confirm"};l=l||{};l.buttons=l.buttons||[{name:"",handler:l.onYes,focus:true},{name:"",handler:l.onNo}];i(m,null,l,k,"confirm")}})(window.comtop?window.comtop.cQuery:window.jQuery,window);(function(c){var b=c.cQuery,d=c.Browser,a=d.isQM;c.UI.PullDown=c.UI.Base.extend(function(){return{options:{uitype:"PullDown",empty_text:"",value:"",readonly:false,textmode:false,width:"200",height:"200",editable:true,on_select_data:null,mode:"Single",datasource:null,name:"",select:-1,must_exist:true,auto_complete:false,value_field:"id",label_field:"text",filter_fields:[],on_filter_data:null,on_change:null,on_filter:null},_init:function(g,f){var e=this.options;if(e.uitype.toLocaleLowerCase()==="pulldown"){this._extendMode(f)}this._initWidthAndHeight((g.width||e.width).toString(),(g.height||e.height).toString());this.$el=e.el.addClass("pulldown-main").css("width",e.width);this.templateBox=b(document.createElement("div")).html(this.$el.html());this.guid=c.guid();this.text="";this.value="";this.valueCache="";this.isHide=true;this.ltIE8=d.isIE6||d.isIE7;this.top=window.location===window.parent.location;this.eqEmptyText=false;this.rendered=false;this.oldData=null},_extendMode:function(i){var g,f,e,h=this.options.mode;h=h.charAt(0).toUpperCase()+h.slice(1).toLocaleLowerCase()+"PullDown";g=c.UI[h];if(g){f=g.prototype;for(e in f){if(f.hasOwnProperty(e)&&!this[e]){this[e]=f[e]}}this.options=b.extend({},f.options,i)}else{throw new Error("mode")}},_initWidthAndHeight:function(f,e){var g=this.options;if(typeof f==="string"&&!/%/.test(f)){g.width=f.replace(/\D+/g,"")+"px"}if(e){this.height=parseInt(e,10)-2;g.height=this.height+"px"}},setTextMode:function(){this._initData()},_create:function(){this.tipPosition=".pulldown-inner";this.tipText=this.$el.attr("tip");this._createDom();this._bindFocusBlurEvent();this._bindMouseEvent();this._bindKeyEvent();this._resetLayoutEvent();this._initData();this.setReadonly(this.options.readonly)},_createDom:function(){var h=this.options,f=this.$el,e,i,g="";e=['<div class="pulldown-inner pulldown-readonly">','<input class="pulldown-text" readonly="readonly" type="text" autocomplete="off" value="',h.empty_text,'" />','<span class="pulldown-btn pulldown-loading"></span>',"</div>",'<input type="hidden" class="pulldown-hidden" name="',h.name,'" />'];f.html(e.join(""));i=b(document.createElement("div")).addClass("pulldown-box");if(d.isIE6){g='<iframe scrolling="no" frameborder="no"></iframe>'}i.html(g+'<div class="pulldown-box-inner"></div>');b("body").append(i);this.$inner=f.find(".pulldown-inner").eq(0);this.$text=f.find(".pulldown-text").eq(0);if(d.isQM){this.$text.addClass("pulldown-text-qm")}this.$btn=f.find(".pulldown-btn").eq(0);this.$hide=f.find(".pulldown-hidden").eq(0);this.$box=i;this.$boxInner=i.find(".pulldown-box-inner").eq(0)},_bindFocusBlurEvent:function(){var e=this;this.$text.on("focus",function(){e._showBox()}).on("blur",function(){e._hideBox()})},_showBox:function(){if(this.isHide===false){return}this.isHide=false;this._setBoxLayout(this._setBoxPosition());this._isEmpty();if(!this.rendered){this._callDataSource()}else{this.setOldData();this.$inner.addClass("pulldown-inner-focus");if(this.__showBoxCallBack){this.__showBoxCallBack()}}},_callDataSource:function(){if(this.dataCalling){return}this.$btn.addClass("pulldown-loading");this.options.datasource.call(this,this);this.dataCalling=true},_isEmpty:function(){var g=this.$text,h,f,e;if(this.rendered&&(this.eqEmptyText||this._isEqEmptyText())){g.addClass("pulldown-text-value");return}h=g.val();f=this.isHide;e=this.options.empty_text;switch(h){case"":if(f){g.val(e).removeClass("pulldown-text-value")}break;case e:if(!f){g.val("").addClass("pulldown-text-value")}break;default:g.addClass("pulldown-text-value")}},_isEqEmptyText:function(){var k=this.data,f=k.length,j=this.options,e=j.empty_text,g=j.label_field,h=0;for(;h<f;h++){if(e===k[h][g]){this.eqEmptyText=true;return true}}return false},_setBoxPosition:function(){var i=23,f=(a?0:2),l=10,h=this.$el[0].getBoundingClientRect(),k=h.left+b(window).scrollLeft(),e=this._getRealHeight(),g=e+i+f,j=h.top+b(window).scrollTop()+i;if(j>Math.max(b.page.height(),b.client.height())-e-l&&j>e+i){j-=g}this.$box.css(this.ltIE8&&this.top?{left:k-2,top:j-2}:{left:k,top:j});return e},_getRealHeight:function(){return Math.min(this.height,this.$boxInner.css("height","auto").outerHeight()||23)},_setBoxLayout:function(e){this.$box.css({height:e,width:this.$el.width()-(a?0:2)})},_hideBox:function(){if(this.isHide===true){return}if(this.hideAble===false){this.$text.focus();return}this.isHide=true;this.$box.css("top","-999999px");this.$inner.removeClass("pulldown-inner-focus");if(this.rendered){if(this.__hideBoxCallBack){this.__hideBoxCallBack()}this._triggerChange(false,false)}else{this._isEmpty()}},setOldData:function(){var e=this.selectData,f=b.type(e);this.valueCache=this.value;if(f==="array"){this.oldData=b.extend(true,[],e)}else{if(f==="object"){this.oldData=b.extend(true,{},e)}else{this.oldData=null}}},_triggerChange:function(h,i){var g,f,e;if(this.valueCache!==this.value&&!h){e=this.options;g=e.on_select_data;if(!i){this._triggerHandler("change");f=e.on_change;if(typeof f==="function"){f.call(this,this.selectData,this.oldData)}}if(typeof g==="function"){g.call(this,this.selectData)}}},_bindMouseEvent:function(){var f=this,g=this.$text,e,h=function(){f.hideAble=false};this.$btn.on("mouseup",function(i){f.hideAble=true;i.stopPropagation();if(!f.readonly){if(f.isHide){g.focus()}else{g.blur()}}}).on("mousedown",h);this.$box.on("mouseout",function(i){e=i.relatedTarget;if(f.hideAble===false&&!b(this).find(e).length&&this!==e){f.hideAble=true;g.blur()}}).on("mouseup",function(i){i.stopPropagation();f.hideAble=true;f.__mouseUpHandler(i)}).on("mousedown",h)},_bindKeyEvent:function(){var e=this,g,f=this.options;this.$text.on("keydown",function(h){g=h.keyCode;switch(g){case 8:if(!f.editable){h.preventDefault()}break;case 38:if(e.__keyDownUPHandler){e.__keyDownUPHandler()}break;case 40:if(e.__keyDownDownHandler){e.__keyDownDownHandler()}break;case 37:if(e.__keyDownLeftHandler){e.__keyDownLeftHandler()}break;case 39:if(e.__keyDownRightHandler){e.__keyDownRightHandler()}break;case 13:if(e.__keyDownEnterHandler){e.__keyDownEnterHandler()}break;default:if(e.__keyDownHandler){e.__keyDownHandler()}}}).on("keyup",function(h){if(f.editable&&e.__keyUpHandler){e.__keyUpHandler(h)}})},_resetLayoutEvent:function(){var e=this;b(window).on("resize scroll",function(){if(!e.isHide){e._setBoxPosition()}})},_initData:function(){var e=this.options,f,l,k=this.templateBox.find("a[value]"),j=k.length,h,m,n,g;if(j){n=e.value_field;g=e.label_field;f=[];for(h=0;h<j;h++){m=f[h]={};m[n]=k.eq(h).attr("value");m[g]=b.trim(k.eq(h).html())}}f=f||e.datasource;l=b.type(f);if(l==="function"){if(e.value!==""||e.select!==-1){this._callDataSource()}else{this.$btn.removeClass("pulldown-loading")}}else{if(l==="array"){this.setDatasource(f)}else{this.setDatasource([])}}},setDatasource:function(h){var f=this.options,i,e,g;this.data=b.extend(true,[],h);if(f.textmode){this.__renderTextMode()}else{this.$btn.removeClass("pulldown-loading");i=this.rendered;this.__initMode(i);if(i){this._emptyStat()}else{this.rendered=true;g=f.value;e=f.select;if(g){this.setValue(g,false,true)}else{if(e>-1&&e<h.length){this.setValue(h[e][f.value_field],false,true)}}if(f.editable){this.$text.removeAttr("readonly")}}if(!this.isHide){this._setBoxLayout(this._setBoxPosition())}}return this},setDataSource:function(e){return this.setDatasource(e)},_emptyStat:function(){this.text="";this.value="";this.valueCache="";this.selectData=null;this.$text.val("");this.$hide.val("");this.eqEmptyText=false;this._isEmpty()},resetDataSource:function(e){this.setDatasource(e);return this},_setProp:function(h){var g=h.text,f=h.value||g,e=h.data;this.text=g;this.value=f;this.selectData=e;this.$text.val(g);this.$hide.val(f);this._isEmpty()},open:function(){this.$text.focus();return this},setWidth:function(e){var f=this.options;if(typeof e==="string"&&/%/.test(e)){f.width=e}else{this._initWidthAndHeight(e+"")}this.$text.blur();this.$el.css("width",f.width);return this},setValue:function(e,f,g){if(!this.rendered){this.options.value=e;this.$hide.val(e);this._callDataSource()}else{this.setOldData();this.__setValue(typeof e==="undefined"?this.options.value:e);this._triggerChange(f,g)}return this},getValue:function(){return this.rendered?this.value:this.options.value},getData:function(){var e=this.selectData,f=b.type(e);switch(f){case"array":return b.extend(true,[],this.selectData);case"object":return b.extend(true,{},this.selectData);default:return null}},getText:function(){return this.__getText()},setReadonly:function(e){if(e===true){this.readonly=true;this.$inner.addClass("pulldown-readonly");this.$text.attr("disabled","disabled");this.$text.blur()}else{if(e===false){this.readonly=false;this.$inner.removeClass("pulldown-readonly");this.$text.removeAttr("disabled")}}return this},setEditAble:function(e){e=!!e;this.options.editable=e;if(e){this.$text.removeAttr("readonly")}else{this.$text.attr("readonly","readonly")}},onInValid:function(f,e){this.$inner.addClass("pulldown-error");this.$el.attr("tip",e)},onValid:function(){var e=this.$el,g=e.find(this.tipPosition).eq(0).attr("tipID"),f;this.$inner.removeClass("pulldown-error");if(g!==undefined){f=window.cui.tipList[g];if(typeof f!=="undefined"){f.hide()}}e.attr("tip",this.tipText||"")}}}())})(window.comtop);(function(b){var a=b.cQuery;b.UI.SinglePullDown=b.UI.PullDown.extend({options:{name:"pullDownName",uitype:"SinglePullDown"},__initMode:function(c){this.index=-1;if(!c){this.$hideListBox=a(document.createElement("div"))}else{this.$hideListBox.html("")}this.__createList()},__renderTextMode:function(){var d=this.options,e=this.data,c;this.size=e.length;c=this.__getIndex(d.value);if(c>-1){this.$el.html(e[c][d.label_field])}},__createList:function(){var m=this.$boxInner,f=this.data,o=this.size=f.length,h=[],c=this.options.label_field,g,e,k,l,d,n;for(g=0;g<o;g++){n=f[g][c];h.push('<a class="pulldown-list" href="javascript:;" index="',g,'" title="',n,'">',n,"</a>")}m.html(h.join(""));k=m.find(".pulldown-list");l=this.list=[];d=this.indexList=[];for(e=0;e<o;e++){l[e]=k.eq(e);d[e]=e}},__filterList:function(r){var c,g,o,p,s,q,m,l,h,n,f,e,k,d;if(r===""){this.__recoverBox();return}if(this.__filterCustom(r)||this.__filterCustomData(r)){return}c=this.options;g=this.data;p=this.$boxInner;s=this.size;q=c.label_field;m=c.filter_fields;h=m.length;n=this.$hideListBox;k=this.list;d=this.indexList=[];outer:for(f=0;f<s;f++){o=g[f];if(o[q].indexOf(r)!==-1){p.append(k[f]);d.push(f)}else{if(h){for(e=0;e<h;e++){l=o[m[e]];if(typeof l==="string"&&l.indexOf(r)!==-1){p.append(k[f]);d.push(f);continue outer}}}n.append(k[f])}}},__filterCustomData:function(o){var c=this.options,q,n,f,m,l,h,g,s,d,r,e,j,p=c.on_filter_data;if(typeof p==="function"){r=p.call(this,this,o);if(a.type(r)==="array"){g=this.data;s=this.size;n=this.$boxInner;f=this.indexList=[];m=this.$hideListBox;l=this.list;q=c.value_field;outer:for(h=0;h<s;h++){d=g[h];for(e=r.length;e--;){j=r[e];if(d[q]===j[q]){n.append(l[h]);f.push(h);continue outer}}m.append(l[h])}}return true}},__filterCustom:function(k){var c=this.options,d=c.on_filter,j,e,h,g,f,l;if(typeof d==="function"){l=d.call(this,this,k);if(a.type(l)==="array"){j=this.$boxInner;e=this.indexList=[];h=this.$hideListBox;g=this.list;for(f=this.size;f--;){if(l[f]===true){j.append(g[f]);e.push(f)}else{h.append(g[f])}}}return true}},__getIndex:function(j,c){var f=this.options,h=j||c,k=f.value_field,g=this.data,e=this.size,d;if(j===undefined){k=f.label_field}for(d=0;d<e;d++){if(g[d][k]===h+""){return d}}return -1},__showBoxCallBack:function(){var c=this.index;if(c!==-1){this.__scrollHoverPosition(c)}},__hideBoxCallBack:function(){if(this.options.editable&&!this.selectEvent){this.__checkSelect(this.__getIndex(undefined,this.$text.val()))}this.selectEvent=false;this.__recoverBox();this.__clearHover()},__clearHover:function(){var c=this.hoverIndex;if(typeof c!=="undefined"){this.list[this.indexList[c]].removeClass("pulldown-hover");delete this.hoverIndex}},__recoverBox:function(){var f=this.list,c=this.indexList=[],e=this.size,g=this.$boxInner,d;for(d=0;d<e;d++){if(!g.find(f[d]).length){g.append(f[d])}c.push(d)}},__setValue:function(c){this.__checkSelect(this.__getIndex(c))},__checkSelect:function(g){var h=this.options,e=h.label_field,d=h.value_field,f,i=this.list,c=this.index;if(c!==-1){i[c].removeClass("pulldown-checked")}if(g!==-1){i[g].addClass("pulldown-checked");f=this.data[g];this._setProp({text:f[e],value:f[d],data:f})}else{this._setProp({value:"",text:h.must_exist?"":this.$text.val(),data:null})}this.index=g},__mouseUpHandler:function(d){var e=a(d.target),c;this.selectEvent=true;if(e.hasClass("pulldown-list")){c=e.attr("index");if(c){this.__checkSelect(c-0)}this.$text.blur()}else{if(!this.size){this.$text.blur()}}},__keyDownUPHandler:function(){var d=this.indexList,c=d.length,f,e;if(c){f=this.list;e=this.hoverIndex;if(typeof e==="undefined"){e=c-1;f[d[e]].addClass("pulldown-hover")}else{f[d[e]||0].removeClass("pulldown-hover");if(--e===-1){e=c-1}f[d[e]].addClass("pulldown-hover")}this.hoverIndex=e;this.__scrollHoverPosition(e)}},__keyDownDownHandler:function(){var d=this.indexList,c=d.length,f,e;if(c){f=this.list;e=this.hoverIndex;if(typeof e==="undefined"){e=0;f[d[0]].addClass("pulldown-hover")}else{f[d[e]||0].removeClass("pulldown-hover");if(c===++e){e=0}f[d[e]].addClass("pulldown-hover")}this.hoverIndex=e;this.__scrollHoverPosition(e)}},__scrollHoverPosition:function(d){var e=23,g=this.$box,f=d*e,c=f+e-g.height();if(g.scrollTop()<c){g.scrollTop(c)}else{if(g.scrollTop()>f){g.scrollTop(f)}}},__keyDownEnterHandler:function(){var c=this.hoverIndex;this.selectEvent=true;if(typeof c!=="undefined"){this.__checkSelect(this.indexList[c])}this.$text.blur()},__keyUpHandler:function(c){var d=c.keyCode;if(!this.options.auto_complete||d===13||d===37||d===38||d===39||d===40){return}this.__clearHover();this.__filterList(this.$text.val())},__getText:function(){return this.text}})})(window.comtop);(function(c){var b=c.cQuery,a=c.UI.SinglePullDown.prototype;c.UI.MultiPullDown=c.UI.PullDown.extend({options:{uitype:"MultiPullDown",name:"MultiPullDownName"},__initMode:function(d){this.index=[];this.checkAll=false;this.__createList(d)},__renderTextMode:function(){var d=this.options,o=d.value.split(/;|/),n=o.length,g=d.label_field,p=d.value_field,k=this.data,f,l,h,m=[],e=k.length;if(!n){return}for(l=0;l<e;l++){f=k[l];for(h=0;h<n;h++){if(f[p]===o[h]){m.push(f[g])}}}this.$el.html(m.join(";"))},__createList:function(e){var h=this.data,d=this.$box,q=this.size=h.length,m=[],o=this.options.label_field,k,g,l,n,f,p;for(k=0;k<q;k++){p=h[k][o];m.push('<a class="pulldown-list" href="javascript:;" index="',k,'" title="',p,'">',p,"</a>")}if(!e){d.addClass("multi-pulldown-box").append('<div class="pulldown-list-all"><a href="javascript:;" class="pulldown-list"></a></div>');this.allCheckDom=d.find(".pulldown-list-all").eq(0).find(".pulldown-list").eq(0);this.__bindAllAcitveEvent()}else{this.__setAllCheck(false)}if(q){d.find(".pulldown-list-all").eq(0).show()}else{d.find(".pulldown-list-all").eq(0).hide()}l=this.$boxInner.html(m.join("")).find(".pulldown-list");n=this.list=[];f=this.indexList=[];for(g=0;g<q;g++){n[g]=l.eq(g);f[g]=g}},__bindAllAcitveEvent:function(){var d=this,e,f;this.allCheckDom.on("click",function(g){g.stopPropagation();if(d.checkAll){d.index=[]}else{e=[];for(f=d.size;f--;){e[f]=true}d.index=e}d.__setInputProp()})},__setAllCheck:function(d){var e="",f="";this.checkAll=d;if(d){this.allCheckDom.addClass("pulldown-checked").html(f)}else{this.allCheckDom.removeClass("pulldown-checked").html(e)}},__showBoxCallBack:function(){var e=this.index,d=e.length,f=0;if(d){for(;f<d;f++){if(e[f]===true){this.__scrollHoverPosition(f);break}}}else{this.__scrollHoverPosition(0)}},__hideBoxCallBack:function(){this.__clearHover();if(this.options.editable){this.__setIndex(undefined,this.$text.val())}},__setIndex:function(o,n){var d=this.options,m=d.value_field,h=o===undefined?n:o,l,g,p,f,e,k;if(typeof h!=="string"){return}l=this.index=[];g=this.data;p=this.size;if(o===undefined){m=d.label_field}h=h.split(/;|/);k=h.length;for(f=0;f<p;f++){for(e=0;e<k;e++){if(g[f][m]===h[e]){l[f]=true}}}this.__setInputProp()},__setInputProp:function(){var d=this.options,e=d.label_field,p=d.value_field,q=this.size,g=this.data,k=this.index,l=this.list,m,f,j=0,o=[],n=[],h=[];for(f=0;f<q;f++){m=g[f];if(k[f]){j++;l[f].addClass("pulldown-checked");o.push(m[e]);n.push(m[p]);h.push(m)}else{l[f].removeClass("pulldown-checked")}}this.__setAllCheck(j===q&&q!==0);this._setProp({text:o.join(";"),value:n.join(";"),data:h})},__clearHover:a.__clearHover,__setValue:function(d){this.__setIndex(d)},__checkSelect:function(e){var d=this.index;if(e<0||e>=this.size){return}d[e]=!d[e];this.__setInputProp()},__mouseUpHandler:function(e){var f=b(e.target),d;if(f.hasClass("pulldown-list")){d=f.attr("index");if(d){this.__checkSelect(d-0)}}this.$text.focus()},__keyDownUPHandler:a.__keyDownUPHandler,__keyDownDownHandler:a.__keyDownDownHandler,__scrollHoverPosition:function(e){var f=23,h=this.$box,g=e*f,d=g+f*2-h.height();if(h.scrollTop()<d){h.scrollTop(d)}else{if(h.scrollTop()>g){h.scrollTop(g)}}},__keyDownEnterHandler:function(){var d=this.hoverIndex;if(typeof d!=="undefined"){this.__checkSelect(this.indexList[d])}},__getText:function(){if(this.text===""){return[]}return this.text.split(";")}})})(window.comtop);(function(a,b){b.UI.BasePagination=b.UI.Base.extend({_init:function(c){this.options.pagesize_list=typeof c.pagesize_list==="string"?this._convertTo(c.pagesize_list,"object",[25,50,100]):this.options.pagesize_list;this.$container=a(this.options.el);this.setInitData(this.options)},_create:function(){if(this.totalItems<=0){this.$container.empty();return}this.setInitData(this.options);this._calTotalPage();this._draw();this._bindEvent(this.$container)},_draw:function(){},_bindEvent:function(){},_calTotalPage:function(){this.totalPage=Math.ceil(this.totalItems/this.itemsPerPage);if(this.currentPage>=this.totalPage){this.currentPage=this.totalPage}},reDraw:function(){this._create();return this},setCount:function(c){this.options.count=this.totalItems=c;return this},setPagesize:function(c){return this.setPageSize(c)},setPageSize:function(f){if(typeof f!=="number"||f<=0){return this}var e=false;for(var d=0;d<this.options.pagesize_list.length;d++){if(this.options.pagesize_list[d]===f){e=true;break}}this.itemsPerPage=this.options.pagesize=f;if(!e){var c=a.extend([],this.options.pagesize_list);c.push(f);c.sort(g);c.splice(3,1);this.options.pagesize_list=c}function g(i,h){return i-h}this.reDraw();return this},setInitData:function(f){this.options=a.extend(true,this.options,f);if(f.pagesize_list){this.options.pagesize_list=f.pagesize_list}f=this.options;this.totalItems=f.count!=null?f.count:null;this.itemsPerPage=f.pagesize!=null?f.pagesize:null;this.currentPage=f.pageno!=null?f.pageno:null;this.currentPage=f.pageno=f.pageno<1?1:f.pageno;this.itemsPerPage=f.pagesize=f.pagesize<1?f.pagesize_list[1]:f.pagesize;var c=true;for(var d=0;d<f.pagesize_list.length;d++){var e=f.pagesize_list[d];if(e<1){f.pagesize_list.splice(d,1);d--;continue}if(e===this.itemsPerPage){c=false}}if(c){f.pagesize_list.push(this.itemsPerPage);f.pagesize_list.sort(function(h,g){return h-g})}return this},go:function(c){if(typeof c!=="number"){return this}if(c>this.totalPage){c=this.totalPage}this.options.pageno=this.currentPage=c;this._click(c,this.itemsPerPage);return this},next:function(){if(this.currentPage===this.totalPage){return this}this.currentPage++;this.options.pageno=this.currentPage;this._click(this.currentPage,this.itemsPerPage);return this},prev:function(){if(this.currentPage===1){return this}this.currentPage--;this.options.pageno=this.currentPage;this._click(this.currentPage,this.itemsPerPage);return this},getCurrentPage:function(){return this.currentPage},setPageSizeList:function(f,e){if(a.type(f)!=="array"){return this}if(typeof e!=="number"||e<=0){e=this.options.pagesize}this.options.pagesize_list=a.extend(true,this.options.pagesize_list,f);this.options.pagesize_list.splice(3);var d=false;for(var c=0;c<this.options.pagesize_list.length;c++){if(this.options.pagesize_list[c]===e){d=true;break}}this.itemsPerPage=this.options.pagesize=d?e:this.options.pagesize_list[1];this.reDraw();return this},_click:function(d,c){if(this.options.on_page_change){this.options.on_page_change.call(this,d,c)}},_setItemsPerPage:function(c){this.itemsPerPage=c}});b.UI.Pagination=b.UI.BasePagination.extend({options:{uitype:"Pagination",cls:"pagination",count:0,display_page:4,pagesize:25,pageno:1,pagesize_list:[25,50,100],on_page_change:null},_draw:function(){var f=this.options.display_page;if(f>this.totalPage){f=this.totalPage}if(f<=3){f=3}var c=Math.floor((f-1)/2),h=Math.ceil((f-1)/2);if(this.currentPage-2<c){h=h+c-(this.currentPage-2)}else{if(this.totalPage-this.currentPage-1<h){c=c+h-(this.totalPage-this.currentPage-1)}}if(c>this.currentPage-1){c=this.currentPage-1}if(h>this.totalPage-this.currentPage){h=this.totalPage-this.currentPage}var d=this.currentPage-c,e=this.currentPage+h;var g={totalItems:this.totalItems,totalPage:this.totalPage,currentPage:this.currentPage,itemsPerPage:this.itemsPerPage,selectList:this.options.pagesize_list,displayPreCount:c,displayNextCount:h,toFirst:d,toLast:e};this.$container.html(this._buildTemplateStr("pagination",g)).addClass(this.options.cls).addClass("cui");if(b.Browser.isQM&&b.Browser.isIE){this.$container.addClass("pagination-qm")}},_bindEvent:function(){var c=this,d=this.$container;d.find('[act="numPage"]').bind("click",function(){c.go(parseInt(a(this).text(),10));return false});d.find('[act="prevPage"]').bind("click",function(){c.prev();return false});d.find('[act="nextPage"]').bind("click",function(){c.next();return false});d.find('[act="goPage"]').bind("click",e);d.find('[act="cusPage"]').bind("keydown",function(f){if(f.keyCode===13){e()}});this.$container.find('[act="sizePage"]').bind("click",function(){c._setItemsPerPage(parseInt(a(this).text(),10));c._calTotalPage();c.go(c.currentPage);return false});function e(){var f=parseInt(c.$container.find(".page-skip-num").val(),10);if(isNaN(f)||f<=0){f=1}if(f>c.totalPage){f=c.totalPage}c.go(f);return false}}})})(window.comtop.cQuery,window.comtop);(function(e,f){var d=0,c=1,b="change";var a=function(h){if(!h){return{top:0,bottom:0,left:0,right:0}}var g=null;if(h.currentStyle){g=h.currentStyle}else{g=getComputedStyle(h,false)}return{top:parseInt(g.paddingTop),bottom:parseInt(g.paddingBottom),left:parseInt(g.paddingLeft),right:parseInt(g.paddingRight)}};comtop.UI.Panel=comtop.UI.Base.extend({options:{uitype:"Panel",header_title:"",width:0,height:0,url:"",html:"",on_change:null,collapsible:true,status:c,animate:"",containerCls:"cui-panel",titleCls:"cui-panel-title",triggerCls:"cui-panel-trigger",contentCls:"cui-panel-content"},container:null,title:null,trigger:null,content:null,status:null,events:[b],_init:function(g){var h=this.options;g.height=f.Tools.fixedNumber(g.height);if(g.height){h.height=g.height}this.status=h.status;if(g.html&&window[g.html]){h.html=window[g.html]}if(g.header_title&&window[g.header_title]){h.header_title=window[g.header_title]}h.el.css({zoom:1});if(typeof h.on_change=="function"){this.bind("change",h.on_change)}if(e.trim(h.el.html())!==""){this._needBuildTemp=true}},_create:function(){var h=this.options,g=h.el;this._navHeight=30;if(this._needBuildTemp){this._initStructures()}this._parseMarkup();this._initView(true)},_parseMarkup:function(){var g=this.options;this.container=e("."+g.containerCls,g.el);this.title=e("."+g.titleCls,g.el);this.trigger=e("."+g.triggerCls,g.el).eq(0);this.content=e("."+g.contentCls,g.el)},_initView:function(g){var h=this.options;this._setUpSize();this._bindTriggers();if(h.header_title){this._setTitle(h.header_title)}if(h.html&&g){if(typeof(h.html)==="string"){this.content.find("div").html(h.html)}else{this.content.find("div").append(e(h.html))}}else{if(h.url&&g){this._loadFrame()}}!h.collapsible?this.trigger.hide():this.trigger.show();h.status===c?this._showView():this._hideView()},_setUpSize:function(){var h=this.options,k,g=h.height,j=h.el.parent();var i=a(h.el.find(".cui-panel-content").get(0)),l=(f.Browser.isQM&&f.Browser.isIE&&!f.Browser.isIE9)?0:(i.top+i.bottom)+2;this._contentPadding=i;if(h.width){this.container.width(h.width)}if(g){if(g==="100%"){if(j.prop("tagName")==="BODY"){this.h=e.client.height();h.el.find(".cui-panel-content").eq(0).css("height",0);this.margin=parseInt(j.css("marginTop"))+parseInt(j.css("marginBottom"));h.height=g=this.h-this.margin;this._resizeHandle()}else{this.margin=0;h.height=g=h.el.parent().height()}}k=g-this._navHeight-l;k=k<10?10:k;h.content_height=k;h.el.find(".cui-panel-content").height(k);h.el.find(".cui-panel-iframe").height("100%");if(f.Browser.isQM&&f.Browser.isIE){this.content.children("div").height("")}}else{this.content.children("div").height("")}},_resizeHandle:function(){if(this.margin!==undefined){var g=this;var i=this.options;var j=this._contentPadding,k=(f.Browser.isQM&&f.Browser.isIE&&!f.Browser.isIE9)?(j.top+j.bottom)+2:0;function h(){var l=e.client.height();g.content.css("height",g.content.height()+l-g.h+k);g.h=l}e(window).on("resize",h)}},get:function(g){var h=this.options[g];if(g=="width"){h=h||this.container.width()}else{if(g=="height"){h=h||this.container.height();if(this.status==d){h=31}}else{if(!h&&g=="header_title"){h=this._getTitle()}else{if(g=="status"){h=this.status}}}}return h},set:function(h,i){var g=false;if(typeof(h)==="string"){this.options[h]=i;if(h=="url"||h=="html"){g=true}}else{if(h.hasOwnProperty("url")||h.hasOwnProperty("html")){g=true}e.extend(this.options,h)}this._initView(g);return this},expend:function(){if(!this.options.collapsible||this.status==c){return this}this._showView();this.status=c;if(this.options.onchange){this.options.onchange.call(null,this.status)}e(this).triggerHandler(b,this.status);return this},collapse:function(){if(!this.options.collapsible||this.status==d){return this}this._hideView();this.status=d;if(this.options.onchange){this.options.onchange.call(null,this.status)}e(this).triggerHandler(b,this.status);return this},addIcon:function(i){if(!i||!i.className){return}var j=i.title||"";var h='<a href="#" title="'+j+'" class="cui-panel-trigger-customer '+i.className+'" hidefocus="true"></a>';var g=this.title.find(".cui-panel-trigger-content").append(h);if(typeof i.callback=="function"){g.find("a."+i.className).on("click",function(){i.callback();return false})}return this},removeIcon:function(g){if(!g){return}this.title.find("a."+g).unbind().remove();return this},toggle:function(){if(this.status==c){this.collapse()}else{this.expend()}return this},resize:function(g,i){if(arguments.length==0){return}if(typeof g=="number"){this.options.height=g;var h=this._contentPadding,j=(f.Browser.isQM&&f.Browser.isIE&&!f.Browser.isIE9)?0:(h.top+h.bottom)+2,k=g-this._navHeight-j;this.content.height(k)}if(typeof i=="number"){this.options.width=i;this.container.width(i)}},_initStructures:function(){var g=this.options,h=e(document.createElement("div"));this._buildTemplate(h,"panel",g);e(g.el).before(h).appendTo(e("."+g.contentCls,h).find("div"));g.el.css("height","100%");this.el=g.el=h},_loadFrame:function(){var g=this,h=this.options,i=this.content.find("iframe");i.attr("src",this.options.url);this.loaded=true;i.one("load",function(){var n=i.get(0).contentWindow.document,m=n.body.scrollHeight,l=n.documentElement.scrollHeight,j=Math.max(m,l);if(h.content_height){j=j<h.content_height?h.content_height:j}if(f.Browser.isIE6&&!f.Browser.isQM){var k=i.height();if(k&&j>k){e(n).find("head").append('<style type="text/css">html{overflow-y:scroll}</style>')}}if(e(n).width()>i.width()){j+=17}if(!h.height){i.height(j)}})},_bindTriggers:function(){var h=this;var g=this.options.status;this.trigger.toggle(function(){if(g==c){h.collapse()}else{h.expend()}},function(){if(g==c){h.expend()}else{h.collapse()}})},_getTitle:function(){return this.title.find(".cui-panel-title-text").html()},_setTitle:function(g){this.title.find(".cui-panel-title-text").html(g)},_showView:function(){var g=this.options.animate;this.trigger.removeClass("collapse");if(g&&g==="slide"){this.content.slideDown(100)}else{this.content.show()}},_hideView:function(){var g=this.options.animate;this.trigger.addClass("collapse");if(g&&g==="slide"){this.content.slideUp(100)}else{this.content.hide()}}});comtop.UI.Panel.EXPAND=c;comtop.UI.Panel.COLLAPSE=d})(window.comtop.cQuery,window.comtop);(function(b){var a=b.cQuery;b.UI.RadioGroup=b.UI.Base.extend({options:{uitype:"RadioGroup",name:"",radio_list:[],direction:"horizontal",value:"",readonly:false,color:"#f60",br:[],border:false,textmode:false,on_change:null},_init:function(){var d=this.options,e=d.value,c=this._setType();this.textmode=d.textmode;this.guid=c+"group-"+b.guid()+"-";this.tipPosition="."+c+"group-inner";this.el=d.el.addClass(this.type+"-group");this.tip_text=this.el.attr("tip");this.inputs=null;this.labels=null;this.data=null;if(typeof e==="string"&&e!==""){this.value=[String(e)]}else{if(a.type(e)==="array"){this.value=e}else{this.value=[]}}this.first=true;this.values=[];this.texts=[];this.colors=[];this.size=0;this.readonly_list={};if(d.textmode){this._create()}},_setType:function(){this.type="radio";return"radio"},_create:function(){if(this.create){return}var f=this.type,g=this.options[f+"_list"],e=a.type(g),d=this.el,c=document.createElement("div");this.inner=a(c).html(d.html());this.inputs=this.inner.find("input");this.size=this.inputs.length;c.className=f+"group-inner";if(this.options.border){this.inner.addClass(f+"group-border")}d.html(c);if(e==="function"){g(this)}else{if(e==="array"&&!this.size){this._setDatasource(g)}else{if(this.size){this._setDatasource(this._initData())}else{throw new Error(f+"_list's type not is a array or a function.")}}}this.create=true},_initData:function(){var j=this.inputs,d=this.size,h,g,k,e,f,m,c=0,l=[];for(h=0;h<d;h++){g=j.eq(h);k=g.attr("value");m=g[0].nextSibling;if(k){e={text:g.attr("text")||(m.nodeType===3?m.nodeValue.replace(/\s*|\n*/g,""):""),value:k};f=g.attr("readonly");if(f&&(f==="true"||f.toLowerCase()==="readonly")){e.readonly="readonly"}if(g.attr("color")){e.color=g.attr("color")}l.push(e)}else{c++}}this.size-=c;return l},_setDatasource:function(c){if(a.type(c)!=="array"){throw new Error("data's type not is a array.")}else{this.data=c;this.size=c.length;this._renderHtml()}this.first=false},setDatasource:function(c){if(!this.first){this.value=[]}this.values=[];this.texts=[];this.readonly_list={};this.colors=[];this._setDatasource(c)},setDataSource:function(c){return this.setDatasource(c)},_renderHtml:function(){var o=this.options,v=this.data,x=o.name,m=o.readonly,c=this.texts,e=this.values,k=this.colors,g=this.size,s=o.direction,u=o.br,n=u.length,h={},f=this.type,p=this.guid,r,q,l=[],w,t,d=this.readonly_list;if(n){for(q=n;q--;){h[u[q]]=true}}for(r=0;r<g;r++){if(r!==0&&s==="vertical"||h[r]){l.push("<br />")}w=e[r]=v[r].value;t=c[r]=v[r].text;if(m||v[r].readonly){d[w]=r}k[r]=v[r].color;l.push('<label for="',p,r,'">','<input id="',p,r,'" type="',f,'" name="',x,'" value="',w,'" index="',r,'" hidefocus="true" />',t,"</label>")}this.inner.html(l.join(""));this.inner=this.el.children().eq(0);this.labels=this.el.find("label");this.inputs=this.el.find("input");this._inputsAction()},_renderText:function(){var c=this.getText();if(c!==null){this.inner.html(c.toString())}else{this.inner.html("")}},setTextMode:function(){},_inputsAction:function(){this._initValue();this._setValue(undefined);if(this.options.textmode){this._renderText()}this._clickEventBind();this._setReadonly()},_initValue:function(h){h=(h||this.value).sort();var g=h.length,c=this.values,f=this.size,e,d,k=[];for(e=0;e<g;e++){for(d=0;d<f;d++){if(c[d]===h[e]+""){k.push(c[d]);break}}}this.value=a.unique(k)},_changeHander:function(){var c=this.options.on_change;this._triggerHandler("change");if(typeof c==="function"){c(this.getValue())}},getValue:function(){return this._getEle(this.values)},getText:function(){return this._getEle(this.texts)},_getEle:function(d){var k=this.value.sort(function(l,i){return l>i?1:-1}),j=k.length,e=this.size,h=this.type,f,g=[],c;for(f=0;f<j;f++){e=this._valueToIndex(k[f]);if(!isNaN(e)){g.push(d[e]);c=d[e]}}if(h==="radio"){return c||null}return g.length?g:null},_clickEventBind:function(){var c=this;this.el.off("click").on("click",function(f){var g=a(f.target),d,h,e=c.readonly_list,i;if(g.prop("tagName")==="INPUT"){d=g.attr("index")-0;h=g.val();i=c._valueToIndex(c.value[0]);if(typeof e[h]!=="undefined"){if(!isNaN(i)){c.inputs.eq(i).prop("checked",true)}else{c.inputs.eq(d).prop("checked",false);return false}}else{if(i===d){return}c._checked(d);c.value=[h];c.labels.eq(i).removeClass(this.type+"-group-checked").css({color:"",fontWeight:""});c._changeHander()}}})},_valueToIndex:function(f){if(typeof f==="undefined"){return NaN}var c=this.values,e=this.size,d=0;for(;d<e;d++){if(f===c[d]){return d}}return NaN},_checked:function(c){var e=this.labels.eq(c),d=this.colors[c];e.addClass(this.type+"-group-checked");if(d){e.css("color",d)}else{e.css("color",this.options.color)}},show:function(){this.inner.show()},hide:function(){this.inner.hide()},setValue:function(g,h){if(this.textmode){return}var d=a.extend([],this.value),f,c,e;this._setValue(g);if(!h){f=this.value;c=f.length;if(c===d.length){for(e=0;e<c;e++){if(d[e]!==f[e]){this._changeHander();break}}}else{this._changeHander()}}},_setValue:function(d){var h=a.type(d);if(h!=="undefined"){if(h==="array"){this._initValue(d)}else{if(d!==""){this._initValue([String(d)])}else{this.value=[""]}}}var c=this.size,o=this.values,n=this.value,m=n.length,k=this.inputs,g=this.labels,l=this.type,f,e;inputsLoop:for(f=0;f<c;f++){for(e=0;e<m;e++){if(n[e].toString()===o[f]){k.eq(f).prop("checked",true);this._checked(f);continue inputsLoop}}k.eq(f).prop("checked",false);g.eq(f).removeClass(l+"-group-checked").css("color","")}},setReadonly:function(g,l){if(this.textmode){return}var k=a.type(l),n=this.readonly_list,m=this.values,c=this.size,d,f,e,h;if(typeof g!=="boolean"||k!=="array"&&k!=="undefined"){return}if(k==="undefined"){l=m}d=l.length;for(f=d;f--;){for(e=c;e--;){h=m[e];if(l[f].toString()===h){if(g){n[h]=e}else{delete n[h]}this._setReadonlyAction(e,g);break}}}},_setReadonly:function(){var d=this.readonly_list,c;for(c in d){if(d.hasOwnProperty(c)){this._setReadonlyAction(d[c],true)}}},_setReadonlyAction:function(e,d){var g=this.labels,c=this.inputs,f=this.type;if(d){g.eq(e).addClass(f+"-group-readonly");c.attr("hidefocus","true")}else{g.eq(e).removeClass(f+"-group-readonly");c.removeAttr("hidefocus")}},isReadonly:function(f){var e=this.readonly_list,d=0,c;if(typeof f==="undefined"){for(c in e){if(e.hasOwnProperty(c)){d++}}return this.size===d}return e.hasOwnProperty(f)},onInValid:function(d,c){this.inner.addClass(this.type+"-group-error");this.el.attr("tip",c)},onValid:function(){var c=this.el,e=c.find(this.tipPosition).eq(0).attr("tipID"),d;this.inner.removeClass(this.type+"-group-error");if(e!==undefined){d=window.cui.tipList[e];if(typeof d!=="undefined"){d.hide()}}if(this.tip_text){c.attr("tip",this.tip_text)}else{c.attr("tip","")}}})})(window.comtop);(function(b){var a=b.cQuery;b.UI.CheckboxGroup=b.UI.RadioGroup.extend({options:{uitype:"CheckboxGroup",name:"",checkbox_list:[],direction:"horizontal",value:[],color:"#f60",textmode:false,br:[],readonly:false,border:false},_setType:function(){this.type="checkbox";return"checkbox"},_deleteVal:function(f){var e=this.value,c=e.length,d=0;for(;d<c;d++){if(e[d]===f){e.splice(d,1);break}}return e},_clickEventBind:function(){var c=this;this.el.off("click").on("click",function(f){var g=a(f.target),d,h,e=c.readonly_list;if(g.prop("tagName")==="INPUT"){d=g.attr("index")-0;h=g.val();if(typeof e[h]!=="undefined"){f.preventDefault()}else{if(g.prop("checked")){c._checked(d);c.value.push(h);a.unique(c.value)}else{c._deleteVal(h);c.labels.eq(d).removeClass(this.type+"-group-checked").css({color:"",fontWeight:""})}c._changeHander()}}})},getValueString:function(c){var d=this.getValue();if(!d){return""}return d.join(c||"")},getTextString:function(c){var d=this.getText();if(!d){return""}return this.getText().join(c||"")},selectAll:function(){this.setValue(this.values)},unSelectAll:function(){this.setValue([])}})})(window.comtop);(function(a,b){comtop.UI.Tab=comtop.UI.Base.extend({options:{uitype:"Tab",width:0,height:0,tab_width:65,active_index:0,tabs:[],fill_height:false,reload_on_active:true,closeable:false,trigger_type:"click"},_className:{parentCls:"cui-tab",navCls:"cui-tab-nav",contentCls:"cui-tab-content",titleCls:"cui-tab-title",activeTriggerCls:"cui-active",hoverTriggerCls:"cui-tab-hover",closeTriggerCls:"cui-tab-close"},active_index:0,navs:[],titles:[],contents:[],urls:[],events:["switch"],_initUrl:function(){this.urls=a.map(this.options.tabs,function(c){return c.url||false})},_init:function(){var c=this.options;c.tab_width=b.Tools.fixedNumber(c.tab_width);c.width=b.Tools.fixedNumber(c.width);c.height=b.Tools.fixedNumber(c.height);this.active_index=this.options.active_index||0;a.each(c.tabs,function(d,e){if(typeof e.html=="object"){a(e.html).hide()}e.tab_width=b.Tools.fixedNumber(e.tab_width)});if(this.options.el.html().replace(/\s+/g,"")!=""){this._isHTMLTemplate=true}},_create:function(){var e=this.options,d=e.el,j=".",c=this;if(this._isHTMLTemplate){this._initStructures()}this._initUrl();this._navHeight=a(j+this._className.parentCls,d).height();if(e.fill_height){var g=e.el.parent();if(g.prop("tagName")==="BODY"){var f=a.client.height(),i=parseInt(g.css("marginTop"))+parseInt(g.css("marginBottom"));e.height=f-i;this._resizeHandle()}else{e.height=g.height()}}this._parseMarkup();this._setUpHeight();this._initView(true);this._bindTriggers()},_initStructures:function(){var d=[],c=this.options;a.each(c.el.children(),function(){var f=a(this).attr("data-options");try{f=a.parseJSON(f)}catch(g){f={}}if(typeof f.closeable=="string"){f.closeable=f.closeable==="true"}if(typeof f.tab_width=="string"){f.tab_width=parseInt(f.tab_width)}if(!f.url){f.html=a(this).children()}d.push(f)});this.options=a.extend({},this.options,{tabs:d});this.options.el.children().hide();this._buildTemplate(this.options.el,"tab",this.options,true)},_resizeHandle:function(){var c=this;var e=this.options;c.h=a.client.height();function d(){var f=a.client.height();c.resize(e.el.height()+f-c.h);c.h=f}a(window).on("resize",d)},_parseMarkup:function(){var e=this._className,d=this.options.el,g=".",c=a(g+e.navCls,d),f=a(g+e.contentCls,d);this.navs=c.children();this.titles=a(g+e.titleCls,d);this.contents=f.children()},_setUpHeight:function(){var c=this.options,d;if(!c.height){this.contents.each(function(){var e=a(this).get(0);if(e.nodeName==="DIV"||e.nodeName==="IFRAME"){e.style.height=""}});return}d=c.height-this._navHeight;d=d<10?10:d;c.content_height=d},attr:function(){var c=arguments;if(c.length==0){return a.extend(true,{},this.options)}else{if(c.length==1){if(typeof c[0]==="string"){var e=this.options[c[0]];if(c[0]=="width"){e=a(this.options.el).width()}if(c[0]=="height"){e=a(this.options.el).height()}return e}else{if(typeof c[0]==="object"){var d=this.options;a.extend(this.options,c[0]);this._setUpHeight();this._initView(false);return this}}}}},switchTo:function(c){this._switchTo(c);return this},next:function(){this.switchTo((this.active_index+1)%this.navs.length);return this},prev:function(){var c=this.navs.length;this.switchTo((this.active_index-1+c)%c);return this},onClose:function(c){a(this).bind("close",c);return this},resize:function(d,f){var h={};if(typeof d=="number"){h.height=d}if(typeof f=="number"){h.width=f}a.extend(this.options,h);this._setUpHeight();var e=this.options,g=a("."+this._className.contentCls,e.el),i=b.Browser;if(e.width){e.el.width(e.width);var c=typeof e.width==="number"?(e.width-(i.isIE&&i.isQM?0:6)):e.width;g.width(c)}if(e.content_height){g.height(e.content_height+(i.isIE&&i.isQM?10:0))}},addTab:function(){var e=this.options;var f={title:"",closeable:e.closeable,tab_width:e.tab_width},d=arguments,c=this.navs.length;if(d.length==2){f.title=d[0];f.url=d[1]}else{if(d.length==1&&typeof(d[0])=="object"){a.extend(f,d[0])}}e.tabs[c]=f;this._add(f);return this},removeTab:function(c){if(c<this.navs.length&&this.navs.length>1){if(this.active_index===c){this.next()}this.navs.eq(c).remove();this.contents.eq(c).remove();this.urls.splice(c,1);if(this.active_index>0&&c<this.active_index){this.active_index--}var d=this.options.tabs.splice(c,1);this._parseMarkup();a(this).triggerHandler("close",d)}return this},getActiveTab:function(){return this.getTab(this.active_index)},getTab:function(e,d){if(!d){return this.navs.get(e)}var c;switch(d){case"tab_width":c=this.navs.eq(e).width();break;case"title":c=this.titles.eq(e).html();break;case"html":c=this.options.tabs[e].html;break;case"url":c=this.options.tabs[e].url;break;case"closeable":c=this.navs.eq(e).hasClass(this._className.closeTriggerCls);break}return c},getContent:function(c){var c=c===undefined?this.active_index:c;return this.contents[c]},setTab:function(d,c,e){if(typeof(c)==="string"){this.options.tabs[d][c]=e}else{a.extend(this.options.tabs[d],c)}this._initTabs();this._initUrl();if(this.active_index==d){this._loadFrame(this.active_index,this.active_index)}return this},index:function(){return this.active_index},_bindTriggers:function(){var d=this;this.navs.hover(function(){if(d.navs.index(a(this))!==d.active_index){a(this).addClass(d._className.hoverTriggerCls)}},function(){a(this).removeClass(d._className.hoverTriggerCls)});if(this.options.trigger_type=="click"){a("."+this._className.navCls,this.options.el).bind("click",a.proxy(this,"_onTrigger"))}else{if(this.options.trigger_type=="mouseover"){this.navs.bind("mouseover",a.proxy(this,"_onMouseover"))}}var c="."+this._className.closeTriggerCls;a("."+this._className.navCls+" > li",this.options.el).delegate(c,"click",function(g){var h=d._findNav(g.target),f=d.navs.index(h);d.removeTab(f);return false})},_loadFrame:function(g,f){var e=this,h=this.options,d=this.urls.length>0&&this.urls[g];if(f!=undefined&&h.reload_on_active){var c=this.contents.eq(f).unbind().removeData("_binded");if(this.urls[f]){c.attr("src","about:blank")}}if(d){var i=this.contents.eq(g).show();if(i.attr("src")=="about:blank"||h.reload_on_active){i.attr("src",this.urls[g]);if(!i.data("_binded")){i.bind("load",function(){try{var m=i.get(0).contentWindow.document,j=a(m).height();if(b.Browser.isIE6){var k=parseInt(i.css("height").replace("px",""));if(k&&j>k){a(m).find("head").append('<style type="text/css">html{overflow-y:scroll}</style>')}}if(a(m).width()>i.width()){j+=17}if(!h.height){i.height(j)}}catch(l){}}).data("_binded",true)}}}},_initView:function(f){this.contents.hide();this.contents.eq(this.active_index).show();var d=this.options,e=a("."+this._className.contentCls,d.el),g=b.Browser;if(d.width){d.el.width(d.width);var c=typeof d.width==="number"?(d.width-(g.isIE&&g.isQM?0:6)):d.width;e.width(c)}if(d.content_height){e.height(d.content_height+(g.isIE&&g.isQM?10:0))}if(!f){if(d.tab_width){this.navs.width(d.tab_width)}if(d.tabs.length>0){this._initTabs(f)}else{this._initCloseBtns()}}this._initContents()},_initTabs:function(e){var c=this,d=c.options;if(d.tabs.length>0){a.each(d.tabs,function(f,g){if(g.tab_width){c.navs.eq(f).width(g.tab_width)}var h=g.closeable!==undefined?g.closeable:d.closeable;if(h){c._addCloseBtn(f)}else{c._removeCloseBtn(f)}if(g.title){c.titles.eq(f).html(g.title)}})}},_initContents:function(c,g){var f=c||this.active_index;var d=this.options.tabs[f],e=this.contents.eq(f);if(!d){return}if(d.html){if(!d.__isLoad_){if(typeof(d.html)==="string"){e.html(d.html)}else{e.append(a(d.html).show())}d.__isLoad_=true}}else{if(d.url){this._loadFrame(f,g)}}},_initCloseBtns:function(){var e=this.options,c=this.navs.length;for(var d=0;d<c;d++){if(e.closeable===true){this._addCloseBtn(d)}else{this._removeCloseBtn(d)}}},_onTrigger:function(c){var d=this._findNav(c.target);if(d){idx=this.navs.index(d);this._switchTo(idx,c)}},_findNav:function(c){while(!(c==this.options.el||c==document.body)){if(a(c).parent().hasClass(this._className.navCls)){return c}c=c.parentNode}return null},_onMouseover:function(d){var c=this.navs.index(d.currentTarget);this._switchTo(c,d)},_triggerIsValid:function(c){return this.active_index!=c&&c<this.navs.length},_switchTo:function(g,h,l){if(!this._triggerIsValid(g)){return}var j=this.active_index,k=g,f=this.navs.eq(j),c=this.navs.eq(k),d=this.contents.eq(j),i=this.contents.eq(k);this.active_index=this.options.active_index=k;this._switchTrigger(f,c)._switchView(d,i);this._initContents(this.active_index,j);l&&l.call(this);a(this).triggerHandler("switch",[{fromTab:j,toTab:k}]);return this},_switchTrigger:function(d,c){d.removeClass(this._className.activeTriggerCls);c.addClass(this._className.activeTriggerCls);return this},_switchView:function(c,d){c.hide();d.show();return this},_add:function(d){var e=this.options,c=this.navs.length;var i=!!d.closeable,h=this._findClone(i),j;if(h!==-1){j=this.navs.eq(h).clone(true)}else{j=this.navs.eq(0).clone(true);if(i){this._addCloseBtn(c,j)}else{this._removeCloseBtn(j)}}if(j.hasClass(this._className.activeTriggerCls)){j.removeClass(this._className.activeTriggerCls)}j.width(d.tab_width||e.tab_width);a("."+this._className.titleCls,j).html(d.title);this.navs.eq(c-1).after(j);var f,g=e.content_height||this._minHeight;if(d.url){f=a('<iframe src="about:blank" frameborder="0" style="display:none;width:100%;height:100%"></iframe>');this.urls[c]=d.url}else{if(typeof d.html=="object"){a(d.html).hide()}f=a('<div style="display: none;width:100%;overflow:auto;height:100%"></div>')}this.contents.eq(c-1).after(f);this._parseMarkup()},_addCloseBtn:function(c,d){if(!d){d=this.navs.eq(c)}d.addClass("closeable").append(this._generateCloseBtn(c))},_generateCloseBtn:function(c){var d="<a href='javascript:;' class='"+this._className.closeTriggerCls+"'></a>";return d},_removeCloseBtn:function(c){var d=typeof(c)==="number"?this.navs.eq(c):c;a("."+this._className.closeTriggerCls,d).remove()},_findClone:function(c){return a.inArray(c,this._getCloseBtns())},_getCloseBtns:function(){var g=!!this.options.closeable,c=this.navs.length,e=this.options.tabs,f,h=[];for(var d=0;d<c;d++){f=e[d];h.push((f&&f.closeable!==undefined)?f.closeable:g)}return h}})})(window.comtop.cQuery,window.comtop);(function(a,b){b.UI.Textarea=b.UI.Base.extend({options:{uitype:"Textarea",name:"",relation:"",value:"",width:"300",height:"57",readonly:false,maxlength:-1,emptytext:"",autoheight:false,maxheight:"",textmode:false,on_change:null,on_focus:null,on_blur:null,on_keyup:null,on_keydown:null},tipPosition:".textarea_textarea",_init:function(){var c=this.options;c.width=b.Tools.fixedNumber(c.width);c.height=b.Tools.fixedNumber(c.height);c.id=b.guid();if(c.name===""){c.name=b.guid()+"_"+c.uitype}},_create:function(){var c=this,e=c.options;this.$textarea=a("#"+e.id);if(e.relation!=""&&e.maxlength!=-1){this.$relation=a("#"+e.relation);var d=e.maxlength-b.String.getBytesLength(e.value)<0?0:e.maxlength-b.String.getBytesLength(e.value);this.$relation.text(d)}if(e.emptytext!==""&&e.value===""){this.$textarea.val(e.emptytext);this.$textarea.addClass("textarea_tipcolor")}if(e.height===""){e.height="51"}this._setHeight(e.height);if(e.width===""){e.width="300"}this.setWidth(e.width);if(e.readonly){this.setReadOnly(true)}if(e.autoheight){this.$textarea.css({overflow:"hidden"});this.$textarea.bind("propertychange",function(f){if(!f.originalEvent||f.originalEvent.propertyName!="value"){return}c._autoHeight()});this.$textarea.bind("input change",function(){c._autoHeight()})}if(e.maxlength>-1){this.$textarea.on("input propertychange",function(f){c._textCounter()})}this.$textarea.on("keypress",function(f){c._keyPressHandler(f)})},setWidth:function(c){c=c+"";if(b.Browser.isQM||c.indexOf("%")!=-1){this.$textarea.css({width:c})}else{this.$textarea.css({width:parseFloat(c)-7+"px"})}},_setHeight:function(c){c=c+"";if(b.Browser.isQM||c.indexOf("%")!=-1){this.$textarea.css({height:c})}else{this.$textarea.css({height:parseFloat(c)-6+"px"})}},setValue:function(d,f){var e=this.$textarea,c=this.options;d=(d==null||d==undefined)?"":d;e.val(d);if(d!=""){e.removeClass("textarea_tipcolor")}else{if(c.emptytext!=""){e.val(c.emptytext);e.addClass("textarea_tipcolor")}}if(this.$relation){this.$relation.text(this._getRemainLength())}if(f){this.onValid()}else{this._triggerHandler("change")}},getValue:function(){var d=this.$textarea.val();var c=this.options.emptytext;if(a.trim(d)===c){return""}else{return d}},setMaxLength:function(c){this.options.maxlength=c;if(this.$relation){this.$relation.text(this._getRemainLength())}},_getRemainLength:function(){var c=this.options.maxlength-b.String.getBytesLength(this.getValue());return c<0?0:c},setReadOnly:function(c){this.setReadonly(c)},setReadonly:function(c){var d=this.options;d.readonly=c;this.$textarea.attr("readonly",c);if(c){this.$textarea.addClass("textarea_garybg");this._removeEmptyText(true)}else{this.$textarea.removeClass("textarea_garybg");this._removeEmptyText(false)}},focus:function(){var c=this.options;if(!c.readonly){c.el.find("textarea").focus()}return this},_changeHander:function(d){var c=this.options;if(c.readonly){return false}if(this.getValue()!=""){this.$textarea.removeClass("textarea_tipcolor")}else{if(c.emptytext!=""){this.$textarea.val(c.emptytext);this.$textarea.addClass("textarea_tipcolor")}}if(this.$relation){this.$relation.text(this._getRemainLength())}this._triggerHandler("change");this._customHandler("on_change",d)},_focusHandler:function(d){var c=this.options;if(c.readonly){this.$textarea.blur();return false}this._removeEmptyText(true);this.$textarea.addClass("textarea_textareafocus");this.onValid();this._customHandler("on_focus",d)},_blurHandler:function(f){var c=this.options;if(c.readonly){return false}this._removeEmptyText(false);this.$textarea.removeClass("textarea_textareafocus");this._textCounter();var d=this.getValue();if(d!==""&&d!=null){this._triggerHandler("change")}this._customHandler("on_blur",f)},_keyPressHandler:function(d){var c=this.options;if(c.readonly){return false}this._customHandler("on_keypress",d)},_keyupHandler:function(d){var c=this.options;if(c.readonly){return false}this._textCounter();if(this.$relation){this.$relation.text(this._getRemainLength())}this._customHandler("on_keyup",d)},_keydownHandler:function(d){var c=this.options;if(c.readonly){return false}this._textCounter();this._customHandler("on_keydown",d)},_customHandler:function(d,g){var f=this.options;var c=f[d];if(a.type(c)==="string"){typeof window[c]==="function"&&window[c].call(this,g,this)}else{typeof c==="function"&&c.call(this,g,this)}},_removeEmptyText:function(e){var c=this.options.emptytext;var d=this.getValue();if(c===""||d.length!=0){return}if(e){this.$textarea.val("");this.$textarea.removeClass("textarea_tipcolor")}else{this.$textarea.val(c);this.$textarea.addClass("textarea_tipcolor")}},_textCounter:function(){var d=this.options;if(d.maxlength>-1){var c=b.String.getBytesLength(this.getValue());if(c>d.maxlength){this.setValue(b.String.intercept(this.getValue(),d.maxlength));if(this.autoheight){this._autoHeight()}}}return false},_autoHeight:function(){var c,h=0;var d=this.$textarea[0];var g=this.options,f=d.style;if(d._length===d.value.length){return}d._length=d.value.length;if(a.browser.msie&&!b.Browser.isQM){h=parseInt(this.$textarea.css("paddingTop"))+parseInt(this.$textarea.css("paddingBottom"))}this.$textarea.css({height:g.height});var e=d.scrollHeight;if(a.browser.mozilla){if(b.Browser.isQM){e=e+6}}else{if(window.navigator.userAgent.indexOf("Chrome")!==-1){if(b.Browser.isQM){e=e+2}else{e=e-4}}}if(e>parseFloat(g.height)){if(g.maxheight!=""&&e>parseFloat(g.maxheight)){c=b.Browser.isQM?(parseFloat(g.maxheight)+6):parseFloat(g.maxheight);f.overflowY="auto"}else{c=e-h;f.overflowY="hidden"}f.height=c+"px"}},onInValid:function(f,e){var c=this,d=c.options;c.$textarea.addClass("textarea_invalid");if(d.tipTxt==null){d.tipTxt=d.el.attr("tip")||""}d.el.attr("tip",e)},onValid:function(e){var c=this,d=c.options,g=a(c.tipPosition,d.el).attr("tipID");c.$textarea.removeClass("textarea_invalid");if(d.tipTxt==null){d.tipTxt=d.el.attr("tip")||""}if(g!==undefined){var f=cui.tipList[g];typeof f!=="undefined"&&f.hide()}d.el.attr("tip",d.tipTxt)}})})(window.comtop.cQuery,window.comtop);(function(c,d){comtop.UI.Tree=comtop.UI.Base.extend({options:{uitype:"Tree",children:null,checkbox:false,select_mode:1,persist:false,icon:"",checkbox_style:"",on_dbl_click:null,on_expand:null,on_select:null,on_click:null,on_activate:null,on_focus:null,on_blur:null,on_lazy_read:null,auto_focus:false,keyboard:false,click_folder_mode:3,min_expand_level:1,theme:"cui",on_post_init:null,reactive:true},dtree:null,_init:function(f){var g=this;var h=this.options;if(h.icon!=="false"&&h.icon!==""&&h.theme==="cui"){e(h.children,h.icon)}else{if(h.theme==="classic"){e(h.children,null)}}if(typeof h.checkbox_style==="string"&&h.checkbox_style!==""){h.classNames={checkbox:"dynatree-radio"}}if(typeof h.children==="function"){h.initDataFn=h.children;h.children=[]}c.each(this.options,function(k,l){var m=k.indexOf("_");if(m&&m!==-1){var i="";c.each(k.split("_"),function(n){if(n===0){i+=this}else{i+=this.charAt(0).toUpperCase()+this.substring(1)}});var j=l;if(typeof j==="function"){g._proxyEvent(j,h,i)}else{h[i]=l}}})},_proxyEvent:function(h,g,i){var f=this;g[i]=function(){var k=this;if(arguments.length===1){h.call(null,f._wrapNode(arguments[0]))}else{if(arguments.length===2){if(typeof arguments[0]==="boolean"){if(typeof arguments[1]==="boolean"){h.apply(k,arguments)}else{h.call(null,arguments[0],f._wrapNode(arguments[1]))}}else{if(i==="onClick"){var j=arguments[1].target||arguments[1].srcElement;if(j.nodeName.toLowerCase()==="span"&&j.className==="dynatree-expander"){return}}h.call(null,f._wrapNode(arguments[0]),arguments[1])}}}}},_create:function(){var f=this.options;if(c.isArray(f.children)){if(f.children.length){f.children[0]._firstNode=true}}else{if(f.children&&typeof f.children==="object"){f.children._firstNode=true;f.children=[f.children]}else{f.children=[]}}this.dtree=c(this.options.el).dynatree(this.options).dynatree("getTree");f.el.addClass("tree_"+f.theme);if(f.initDataFn){f.initDataFn(this,f)}},getActiveNode:function(){return this._wrapNode(this.dtree.getActiveNode())},getNode:function(f){return this._wrapNode(this.dtree.getNodeByKey(f))},selectNode:function(g,f){return this.getNode(g).select(f)},enable:function(){this.dtree.enable();return this},disable:function(){this.dtree.disable();return this},setDatasource:function(f){if("object"!==typeof f||f===null){return}if(c.isArray(f)){if(f.length){f[0]._firstNode=true}}else{f._firstNode=true;f=[f]}this.options.children=f;this.getRoot().removeChildren().addChild(f);return this},getDatasource:function(){var f=this.dtree.toDict();return f.children},getDataSource:function(){return this.getDatasource()},getSelectedNodes:function(f){var h=this,g=this.dtree.getSelectedNodes(f);return c.map(g,function(j,i){return h._wrapNode(j)})},getRoot:function(){return this._wrapNode(this.dtree.getRoot())},bind:function(h,g){if(typeof h!="string"||typeof g!="function"){return}var h="on"+h.charAt(0).toUpperCase()+h.substring(1),f=this.dtree.options[h];if(typeof f==="undefined"){return}this._proxyEvent(g,this.dtree.options,h)},unbind:function(g){if(typeof g=="string"){var g="on"+g.charAt(0).toUpperCase()+g.substring(1);var f=this.dtree.options[g];if(typeof f==="undefined"){return}this.dtree.options[g]=null}else{c.extend(this.dtree.options,{onClick:null,onDblClick:null,onKeydown:null,onKeypress:null,onFocus:null,onBlur:null,onQueryActivate:null,onQuerySelect:null,onQueryExpand:null,onPostInit:null,onActivate:null,onDeactivate:null,onSelect:null,onExpand:null,onCustomRender:null,onCreate:null,onRender:null})}},_wrapNode:function(f){if(!f){return null}return new a(f)}});var a=function(f){this.dNode=f};a.prototype={error:-1,loading:1,ok:0,activate:function(f){if(typeof f=="undefined"){f=true}this.dNode.activate(f)},deactivate:function(){this.dNode.deactivate()},getData:function(f){if(typeof f=="string"){return this.dNode.data[f]}return this.dNode.data},expand:function(f){this.dNode.expand(f);return this},remove:function(){this.dNode.remove()},removeChildren:function(){this.dNode.removeChildren();return this},select:function(f){this.dNode.select(f);return this},toggleSelect:function(){this.dNode.toggleSelect();return this},addChild:function(h,f){var g=this.dNode.addChild(h,f&&f.dNode);return this._wrapNode(g)},setTitle:function(f){return this.dNode.setTitle(f)},setStyle:function(f){c(this.dNode.span).find("a").attr("style",f);this.dNode.data._customStyle=f;return this},removeStyle:function(){c(this.dNode.span).find("a").removeAttr("style");this.dNode.data._customStyle=null;return this},prev:function(){var f=this.dNode.getPrevSibling();return f&&this._wrapNode(f)},next:function(){var f=this.dNode.getNextSibling();return f&&this._wrapNode(f)},firstChild:function(){var f=this.children();if(f==null||f==undefined){return f}return f.length>0?f[0]:null},lastChild:function(){var f=this.children();if(f==null||f==undefined){return f}return f.length>0?f[f.length-1]:null},children:function(){var g=this,f=this.dNode.getChildren();if(f==null||f==undefined){return f}return c.map(f,function(i,h){return g._wrapNode(i)})},parent:function(){var f=this.dNode.getParent();return f&&this._wrapNode(f)},setData:function(g){if(arguments.length===1){for(var i in g){this.dNode.data[i]=g[i]}}else{var f=arguments[0],h=arguments[1];this.dNode.data[f]=h}this.dNode.render();return this},focus:function(){this.dNode.focus();return this},hasChild:function(){return this.dNode.hasChildren()},isChildOf:function(f){return this.dNode.isChildOf(f.dNode)},isDescendantOf:function(f){return this.dNode.isDescendantOf(f.dNode)},setLazyNodeStatus:function(){this.dNode.setLazyNodeStatus.apply(this.dNode,arguments)},getEventTargetType:function(f){return this.dNode.getEventTargetType(f)},move:function(f,g){if(!f.dNode){return}this.dNode.move(f.dNode,g)},disable:function(){this.dNode.disable();return this},enable:function(){this.dNode.enable();return this},_wrapNode:function(f){if(!f){return null}return new a(f)}};comtop.UI.Tree.Node=a;function b(f){return f.replace(/(^|\s+)\w/g,function(g){return g.toUpperCase()})}function e(f,g){if(f.length>0){c.each(f,function(h,i){if(i.icon===undefined){i.icon=g}if(i.children){e(i.children,g)}})}}})(window.comtop.cQuery,window.comtop);(function(c){var a=c.cQuery,b=c.Tools.fixedNumber||function(d){return d};c.UI.Grid=c.UI.Base.extend({options:{uitype:"Grid",gridwidth:"600px",gridheight:"500px",tablewidth:"",primarykey:"ID",ellipsis:true,titleellipsis:true,adaptive:true,titlelock:true,oddevenrow:false,oddevenclass:"cardinal_row",selectedrowclass:"selected_row",selectrows:"multi",checkboxname:"idList",allboxname:"allbox",fixcolumnnumber:0,config:null,datasource:null,titlerender:null,colhidden:true,colmove:false,loadtip:true,resizeheight:null,resizewidth:null,rowstylerender:null,colstylerender:null,colrender:null,lazy:true,sortstyle:1,sortname:[],sorttype:[],pageno:1,pagesize:50,pagesize_list:[25,50,100],pagination:true,pagination_model:"pagination_min_1",adddata_callback:null,removedata_callback:null,rowclick_callback:null,loadcomplate_callback:null,selectall_callback:null,rowdblclick_callback:null,onstatuschange:null},format_fn:{date:c.Date.simpleformat,money:c.Number.money},render_method:{a:function(h,m,j){var f=["<a"];var d=m.params;var l="";if(d){d=d.split(";");var g=[];for(var e=d.length;e--;){var k=d[e];if(h.hasOwnProperty(k)){g.push([k,"=",h[k]].join(""))}}l="?"+g.join("&")}f.push(" href='",(m.url||"")+l,"' class='",m.className||"","' target='",m.targets||"_self","' clickid='",m.click,"'>",j,"</a>");return f.join("")},image:function(i,m,k){var h=["<img"];h.push(" class='",m.className||"");var e=m.url,f=m.compare,g=m.relation,j=m.title,l=k;if(typeof g==="string"){if(/\./.test(g)){var d=g.split(".");l=i[d[0]][d[1]]}else{l=i[g]}}if(j&&j[l]){j=j[l]}else{j=k}if(f){e=f[l]||e}h.push("' src='",e,"' title='",j,"' clickid='",m.click,"' />");return h.join("")},button:function(f,d,g){var e=["<button class='"];e.push(d.className||"","' clickid='",d.click,"'>",d.value||g,"</button>");return e.join("")}},_init:function(){var j=this.options,g=j.config,f=j.onstatuschange,d=j.datasource,i=j.sortstyle;j.sortname.length=Math.min(j.sortname.length,i);j.sorttype.length=Math.min(j.sorttype.length,i);if(typeof g==="string"&&typeof window[g]==="function"){j.config=window[g]}if(typeof f==="string"&&typeof window[f]==="function"){j.onstatuschange=window[f]}if(typeof d==="string"&&typeof window[d]==="function"){j.datasource=window[d]}this.el=j.el;this.el_cache=null;this.grid_container=null;this.grid_box=null;this.grid_style=null;this.grid_head=null;this.grid_head_table=null;this.grid_table_hide=null;this.grid_body=null;this.grid_table_box=null;this.grid_tbody=null;this.grid_scroll=null;this.grid_line=null;this.grid_empty=null;this.grid_tfoot=null;this.loading=null;this.grid_overlay=null;this.grid_all_check=null;this.create_dom_box=document.createElement("div");this.dom_th=[];this.dom_tr=[];this.dom_td=[];this.dom_fixed=[];this.dom_head_col=[];this.dom_body_col=[];this.thead_map=[];this.extend_th=[];this.tr_frag=document.createElement("tbody");this.data=[];this.backup_query=null;this.query=null;this.custom_query=null;this.row_size=0;this.col_size=0;this.sort_type={};this.thead_text=[];this.render_style=[];this.col_render=[];this.bind_name=[];this.num_col=NaN;this.bind_dot_name=[];this.col_width=[];this.init_col_width=[];this.col_width_backup=[];this.multi_checked=[];this.multi_checked_num=0;this.single_checked=NaN;this.fixed_fn_click=[];this.col_hidden=[];this.total_size=0;this.guid="grid_"+c.guid();this.height_light=[];this.col_index=[];this.grid_width=0;this.grid_height=0;this.table_width=0;this.thead_height=31;this.box_height=0;this.pagination_height=j.pagination?40:0;this.selectrows_html="";this.tds_package=[];this.end_row=0;this.tr_start=0;this.tr_end=0;this.render_complete=false;this.odd=false;this.un_render=true;this.auto_height=false;this.is_ittab=false;this.arr_index=Array.prototype.indexOf;this.is_qm=c.Browser.isQM;this.persistence=typeof f==="function"&&typeof g==="function";try{var h=a("head");h.append('<style type="text/css"></style>');h.find("style").last()[0].innerHTML="";this.write_style=true}catch(k){this.write_style=false}this._backupQuery();this._setPageSize();this._setSortTypeObj();this.__getDomTh();this.__initWidthAndHeight()},_backupQuery:function(){var d=this.options,e={pageSize:d.pagesize,pageNo:d.pageno,sortName:a.extend([],d.sortname),sortType:a.extend([],d.sorttype)};this.backup_query=a.extend(true,{},e);this.query=e},_setPageSize:function(){var g=this.options,h=this.query,f=g.pagesize_list,e=h.pageSize;for(var d=f.length;d--;){if(e===f[d]){return}}h.pageSize=f[1]},_setSortTypeObj:function(){var j=this.query,k=j.sortName,e=j.sortType,d=k.length,f=this.sort_type={};for(var g=0;g<d;g+=1){var h=e[g].toUpperCase();e[g]=h;f[k[g]]=h}},__getDomTh:function(){var f=this.el,u,d,s,r=this.col_index,q=this.extend_th;u=a(document.createElement("div")).html(["<table><thead>",f.find("thead").html()||f.find("tbody").html()||f.html(),"</thead></table>"].join("")).find("table").eq(0);this.el_cache=u;d=u.find("tr");s=d.length;if(s===1){var k=u[0].getElementsByTagName("th"),C=[];for(var E=0,D=k.length;E<D;E+=1){C.push(k[E]);r[E]=E}this.dom_th=C}else{var F=this.thead_map=[],B,z,w,v;for(B=0;B<s;B+=1){var p=d.eq(B)[0],G=p.cells,H=G.length,e=0;q[B]=[];if(!F[B]){F[B]=[]}for(z=0;z<H;z+=1){var y=G[z],n=y.colSpan;for(w=0;w<n;w+=1){F[B][e+w]=y}e+=n}var t=document.createElement("th");t.className="grid_empty_th";p.insertBefore(t,G[0])}for(B=0;B<s;B+=1){var A=F[B],m=A.length;for(z=0;z<m;z+=1){var x=A[z],o=x.rowSpan;if(o>1&&!q[B][z]){o+=B;for(w=B+1;w<o;w+=1){v=F[w];if(v){q[w][z]=true;v.splice(z,0,x)}}}}}this.dom_th=a.extend([],F[s-1])}this.col_size=this.dom_th.length},__initWidthAndHeight:function(){var f=this.options,h=typeof f.resizewidth==="function"?f.resizewidth():undefined,d=typeof f.resizeheight==="function"?f.resizeheight():undefined,e=f.gridwidth=b(f.gridwidth),g=f.gridheight=b(f.gridheight);this.grid_width=(h||e)-2;if(g==="auto"){g=500;this.auto_height=true}this.grid_height=(d||g)-2;this.thead_height=this.el_cache.find("tr").length*31;this.box_height=this.grid_height-this.pagination_height-(f.titlelock?this.thead_height:0);this.table_width=f.adaptive?this.grid_width-17:b(f.tablewidth)||this.grid_width},_create:function(){this.__createLayoutDom();this.__theadClickEventBind();this.__theadMouseEventBind();this.__tbodyClickEventBind();this.__tbodyMouseEventBind();this.__imitateScroll();this._resizeEventBind();this.__boxScrollEventBind();this._setStyleWidth();this._setStyleHeight();this._loading("show");var f=this.options,d=f.datasource,e=f.config;if(typeof d!=="function"){return}if(this.persistence){e(this)}else{this._createPropertys();this._createContent();d(this,this.getQuery())}},__createLayoutDom:function(){var h=this.options,g=this.el,e=document.createElement("div");e.className="grid_container";var j=h.titlelock,f=['<div class="grid_style"></div>','<div class="grid_box">'];if(j===true){f.push('<div class="grid_head">','<table class="grid_head_table"></table>',"</div>",'<div class="grid_body">')}else{f.push('<div class="grid_body">','<div class="grid_head">','<table class="grid_head_table"></table>',"</div>")}f.push('<div class="grid_empty">      </div>','<div class="grid_table_box"><div class="grid_table_hide"></div></div>',"</div>",'<div class="grid_scroll">',"<div></div>","</div>",'<div class="grid_line"></div>','<div class="grid_overlay"></div>',"</div>",'<div class="grid_tfoot"></div>');if(h.loadtip){f.push('<div class="grid_loading_bg grid_loading_bg_over"></div><div class="grid_loading_box"><span>...</span></div>')}e.innerHTML=f.join("");g[0].parentNode.insertBefore(e,g[0]);var d=this.grid_container=a(e).addClass(this.guid);if(this.is_qm){d.addClass("grid_container_qm")}this.grid_table_box=a(".grid_table_box",d);var i=this.grid_box=d.children(".grid_box");this.grid_style=d.find(".grid_style").eq(0);this.grid_head=i.find(".grid_head").eq(0);this.grid_body=i.children(".grid_body").eq(0);this.grid_overlay=i.children(".grid_overlay").eq(0);this.grid_head_table=this.grid_head.children(".grid_head_table").eq(0);this.grid_line=i.children(".grid_line").eq(0);this.grid_scroll=i.children(".grid_scroll").eq(0);this.grid_tfoot=d.children(".grid_tfoot").eq(0);this.grid_empty=this.grid_body.children(".grid_empty").eq(0);this.loading=d.children(".grid_loading_bg").next().andSelf();this.grid_table_hide=a(".grid_table_hide",d).eq(0).append(g.addClass("grid_body_table"));if(h.ellipsis){g.addClass("grid_ellipsis")}if(h.titleellipsis){this.grid_head_table.addClass("grid_ellipsis")}},__theadClickEventBind:function(){var e=this.options,f=this.bind_name,d=this;this.grid_head_table.on("click",function(A){A.stopPropagation();var C=A.target;var x=C.className;if(x==="grid_select"||x==="grid_ittab"){return}if(x==="grid_all_check"){var t=d.dom_tr,q=d.multi_checked,p=e.selectedrowclass,h=d.end_row,g=d.row_size;if(!a(C).prop("checked")){for(var z=h;z--;){q[z]=false;a(t[z]).removeClass(p).find("input").eq(0).prop("checked",false)}for(var w=h;w<g;w+=1){q[w]=false}d.multi_checked_num=0}else{for(var y=h;y--;){q[y]=true;a(t[y]).addClass(p).find("input").eq(0).prop("checked",true)}for(var v=h;v<g;v+=1){q[v]=true}d.multi_checked_num=d.row_size}var B=e.selectall_callback;if(typeof B==="function"){var o=a(C).prop("checked");B.call(d,o?d.data:[],o)}return}var r=a(C).parents(".grid_sort");if(r.length&&x==="grid_thead_text"){var s=d.sort_type,i=f[d._thIndex(r[0])],u=s[i],l=u!=="DESC"?"DESC":"ASC";d._setOptsSortNameAndSoryType(i,l);if(d.persistence){d._triggerStatusChange()}d.loadData()}})},_thIndex:function(e){var g=this.dom_th,d=this.arr_index;if(d){return d.call(g,e)}for(var f=this.col_size;f--;){if(g[f]===e){return f}}return -1},_setOptsSortNameAndSoryType:function(d,f){var j=this.query,g=this.options.sortstyle,h=j.sortName,k=j.sortType;for(var e=g;e--;){if(d===h[e]){k.splice(e,1);h.splice(e,1);break}}if(h.length===g){k.shift();h.shift()}h.push(d);k.push(f);this._setSortTypeObj()},__theadMouseEventBind:function(){this.grid_head_table.on("mouseover",function(e){var f=a(e.target);var d=f.closest(".grid_fixed_s").eq(0);if(d.length){d.parents("th").addClass("grid_thead_mouseover")}}).on("mouseout",function(e){var f=a(e.target);var d=f.closest(".grid_fixed_s").eq(0);if(d.length){d.parents("th").removeClass("grid_thead_mouseover")}})},__tbodyClickEventBind:function(){var d=this.options,f=typeof d.rowdblclick_callback==="function"?d.rowdblclick_callback:null,j=d.selectrows,l=this,k=null,i=null,g=d.checkboxname,e;l.el.on("click",function(p){p.stopPropagation();i=p.target;e=i.tagName;if(e==="TBODY"||e==="TABLE"){return}var q=a(i).closest("tr").eq(0);var n=q.attr("index")||q[0].rowIndex-1+l.tr_start;var m=i.getAttribute("clickid")||"";var o=new RegExp(e,"i");if(o.test("a;button;img")){if(m!==""){l.fixed_fn_click[m](l.data[n],n)}return}if(o.test("input")&&a(i).attr("name")!==g){return}if(f){clearTimeout(k);k=setTimeout(function(){h(n)},300)}else{h(n)}});l.el.on("dblclick",function(n){n.stopPropagation();if(f){clearTimeout(k);i=n.target;e=i.tagName;if(e==="TBODY"||e==="TABLE"){return}var o=a(i).closest("tr").eq(0);var m=o.attr("index")-0;f.call(l,l.data[m],m)}});function h(n){if(j==="no"){return}l._selectRows(n,undefined);if(typeof d.rowclick_callback==="function"){var m=false;if(j==="multi"){m=l.multi_checked[n]}if(j==="single"){m=n===l.single_checked}d.rowclick_callback.call(l,l.data[n],m,n)}}},_selectRows:function(g,i){var m=this.dom_tr,n=m[g],e=this.options,j=e.selectrows,d=e.selectedrowclass,k=a(n);if(j==="multi"){var f=this.multi_checked;var l=f[g];if(i===undefined){i=l!==true}else{if(i===l){return}}f[g]=i;if(!n){return}if(i===false){k.removeClass(d).children("td").find("input").prop("checked",false);this.multi_checked_num--;this.grid_all_check.prop("checked",false)}else{k.addClass(d).children("td").find("input").prop("checked",true);this.multi_checked_num+=1;if(this.multi_checked_num===this.row_size){this.grid_all_check.prop("checked",true)}}}else{if(j==="single"){var h=this.single_checked;this.single_checked=h===g&&i===false?NaN:g;if(!n){return}if(i===false){k.removeClass(d).children("td").eq(0).find("input").prop("checked",false)}else{if(!isNaN(h)){a(m[h]).removeClass(d)}k.addClass(d).children("td").eq(0).find("input").prop("checked",true)}}}},__tbodyMouseEventBind:function(){var d=this,g=this.bind_name,e=this.options.titlerender,f,h;d.el.on("mouseover",function(j){var o=j.target,l=o.tagName;if(l==="TR"||l==="TBODY"||l==="TABLE"){return}var m=a(o).closest("td");if(!m.length){return}var i=m[0].cellIndex,k=m.find(".grid_fixed_s"),n=k.length?k:m,q=g[i],p;if(f){f.removeClass("grid_tr_over")}f=m.closest("tr");p=f.attr("index");if(!p){p=f[0].rowIndex-1+d.tr_start;f.attr("index",p)}f.addClass("grid_tr_over");if(typeof q!=="number"&&!m.attr("title")){if(typeof e==="function"){h=e(d.data[p],q);if(h){m.attr("title",h)}else{h=a.trim(n.text());if(h){m.attr("title",h)}}}else{h=a.trim(n.text());if(h){m.attr("title",h)}}}})},__imitateScroll:function(){var e=this,f=e.guid,j=this.grid_head_table[0],h=this.grid_style[0],g=this.el[0],i;var d=this.options.fixcolumnnumber;if(this.write_style){this.grid_scroll.on("scroll",function(){i=this.scrollLeft;h.innerHTML=['<style type="text/css">.',f," .grid_fixed .grid_fixed_s{left:",i,"px}.",f," .grid_body_table, .",f," .grid_head_table{margin-left:-",i,"px}</style>"].join("")})}else{this.grid_scroll.on("scroll",function(){i=this.scrollLeft+"px";var p="-"+i;j.style.marginLeft=p;g.style.marginLeft=p;var l=e.dom_fixed;for(var q=l.length;q--;){var r=l[q];for(var o=d;o--;){r[o].style.left=i}}var n=e.tds_package;for(var m=0;m<d;m+=1){n[m].html=n[m].html.replace(/(style="left:)\d*?px/,"$1"+i)}})}},_resizeEventBind:function(){var e=this.options,d=this;if(e.resizeheight||e.resizewidth){a(window).on("resize",function(){d.resize()})}},resize:function(){var g=this.options;try{var d=g.resizeheight();if(typeof d==="number"&&d>0){this._setHeight(d)}}catch(h){}try{var f=g.resizewidth();if(typeof f==="number"&&f>0){this.setWidth(f)}}catch(h){}},__boxScrollEventBind:function(){var d=this;if(!this.options.lazy||this.auto_height){return}this.grid_body.on("scroll",function(){d._lazyload(true)})},_lazyload:function(h){var e=this,f=this.options,d=this.grid_body[0].scrollTop,i=e.end_row,j=parseInt(d/27,10),g=parseInt(this.box_height/27,10)+j+20+1;if(f.ellipsis){clearTimeout(this.render_timeout);if(h){this.render_timeout=setTimeout(function(){e._clearAndLoad(j-20,i,g)},10)}else{e._clearAndLoad(j-20,i,g)}}else{if(!this.render_complete&&this.append_rows_complete&&g>i){clearTimeout(this.render_timeout);if(h){this.render_timeout=setTimeout(function(){e.append_rows_complete=false;e._appendRows(i,g)},10)}else{e.append_rows_complete=false;e._appendRows(i,g)}}}},_clearAndLoad:function(d,s,n){var e=this.row_size,x,t=this.grid_tbody[0],r=this.grid_table_box[0].style,u=this.tr_frag,g=this.tr_start,f=this.tr_end;n=this.tr_end=Math.min(e,n);d=this.tr_start=Math.max(d,0);var q,p,m,h;if(n>s){var o=this._dataToDom(this.data,s,n);var w=o.dom_tr;this.dom_tr=this.dom_tr.concat(w);this.dom_td=this.dom_td.concat(o.dom_td);this.dom_fixed=this.dom_fixed.concat(o.dom_fixed);this.end_row=n;for(h=w.length;h--;){u.appendChild(w[h])}}x=this.dom_tr;if(d>g||n>f){for(q=g,p=Math.min(f,d);q<p;q++){u.appendChild(x[q])}for(m=Math.max(d,f);m<n;m++){t.appendChild(x[m])}}else{if(d<g){var v=x[g];for(q=d,p=Math.min(g,n);q<p;q++){t.insertBefore(x[q],v)}for(m=Math.max(g,n);m<f;m++){u.appendChild(x[m])}}}r.paddingTop=d*27+"px";r.paddingBottom=(e-n)*27+"px"},_setStyleWidth:function(){this.grid_container.css("width",this.grid_width);this.el.css("width",this.table_width);this.grid_head_table.css("width",this.table_width)},_setStyleHeight:function(){this.grid_container.css("height",this.grid_height);this.grid_head.css("height",this.thead_height);this.grid_overlay.css("height",this.thead_height);this.grid_body.css("height",this.box_height)},_loading:function(d){if(!this.options.loadtip){return}this.loading[d]().eq(0).css("height",this.grid_height);if(this.un_render&&d==="hide"){this.grid_container.find(".grid_loading_bg").removeClass("grid_loading_bg_over")}},_createPropertys:function(){this.__getTagsPropertys();this.__initColWidth()},_createContent:function(){this.__renderHead();this.__renderBody();this._setColWidthStyle();this.__packageTds();this._colHidden(true);this.ittab._init(this);var d=this.options;if(d.colhidden){this.hideCol._init(this)}if(d.colmove&&this.thead_map.length===0){this.moveCol._init(this)}},__getTagsPropertys:function(){var v=this.dom_th,n=this.options,j=this.bind_dot_name,h=this.col_size,o=this.render_style,y=this.bind_name,B=this.sort=[],m=this.thead_text,z=this.col_width,g=this.col_render,p=this.fixed_fn_click;for(var u=0;u<h;u+=1){var C=v[u];z.push(C.style.width||C.getAttribute("width")||"");this.col_hidden[u]=C.getAttribute("hide")==="true"||a(C).css("display")==="none";var x=C.getAttribute("renderStyle")||"";var k=x.replace(/padding.+?(;|$)/,"").replace(/display\s*?:\s*?none\s*?(;|$)/,"")+";";o.push(k);var d=C.getAttribute("bindName")||"";y[u]=d;if(/\./.test(d)){j[u]=d.split(".")}else{j[u]=undefined}if(isNaN(this.num_col)&&d.length&&!isNaN(d-0)){this.num_col=u;y[u]=d-0;d=""}if(d===""){B[u]=false}else{B[u]=C.getAttribute("sort")==="true"||false}m.push(C.innerHTML);var w=C.getAttribute("format"),q=n.colrender,D=C.getAttribute("render");g[u]=[];if(w!==null){if(/money/.test(w)){g[u][1]={format:Number(w.split("-")[1]||2),callback:this.format_fn.money}}else{if(/(dd|MM|yy)/i.test(w)){g[u][1]={format:w,callback:this.format_fn.date}}}}if(typeof q==="function"){g[u][0]={render:"colrender_fn",callback:q}}if(typeof D==="string"){if(new RegExp(D).test("a;button;image")){var f=C.getAttribute("options");if(f!==null){if(/{/.test(f)){try{f=JSON.parse(f)}catch(A){f=(new Function("return "+f+";"))()}finally{if(typeof f!=="object"){f=undefined}}}else{f=window[f]}}if(f){var t=f.click;t=typeof t==="string"?window[t]:t;if(typeof t==="function"){f.click=p.push(t)-1}else{f.click=""}g[u][0]={render:"fiexd_fn",method:D,options:f}}}else{var s=window[D];if(s){var l={format:w||undefined,render:s,renderStyle:x,text:m[u]};g[u][0]={render:"render_fn",col_json:l,callback:s}}}}}var r=n.selectrows;if(r==="multi"||r==="single"){y[0]=-1}},__initColWidth:function(){var g=this.grid_width,f=this.table_width||g,y=this.col_width,e=this.col_width_backup,p=0,l=0,h=this.col_size,d=[];for(var w=this.col_size;w--;){var u=y[w];e[w]=-1;if(u===""){u=0;y[w]=200;d.push(w)}else{if(/%/.test(u)){u=Math.round(f*parseInt(u,10)/100);y[w]=u}else{u=parseInt(u,10);y[w]=u}}p+=y[w];l+=u}var k=d.length;var q=f-l;if(k>0&&q>k){var r=Math.round(q/k);for(var t=0;t<k;t++){y[d[t]]=r}y[d[t-1]]+=q-r*k;this.table_width=f}else{if(isNaN(this.table_width)&&p>=g){this.table_width=p}else{if(!this.table_width){this.table_width=g}var x=[];var n=0;var o=0;for(var v=h;v--;){var s=Math.round(y[v]*f/p);n+=s;x[v]=s;o=v}x[o]+=f-n;this.col_width=x}}this.init_col_width=a.extend([],this.col_width)},__renderHead:function(){var v=this.options,E=this.dom_th,F=this.thead_map,J=this.thead_map.length,f=this.dom_head_col,o=this.dom_fixed[0]=[],u=this.thead_text,h=this.col_size,y=v.fixcolumnnumber,r=this.options.colhidden,G=this.sort,e=document.createElement("tr"),d=v.ellipsis;e.className="grid_width_norm";if(J){var w=document.createElement("th");w.className="grid_empty_th";e.appendChild(w);for(var A=J-1;A--;){var x=F[A];for(var z=x.length;z--;){var t=x[z];t.removeAttribute("width");t.style.width=""}}}for(var D=0;D<h;D+=1){var n=f[D]=document.createElement("th");e.appendChild(n);var g=E[D];if(D<y){a(g).addClass("grid_fixed")}if(G[D]){a(g).addClass("grid_sort")}g.removeAttribute("width");g.style.width="";var q=u[D];var p=['<div class="grid_fixed_d">','<span class="grid_fixed_s">','<a class="grid_thead_text'];if(d){p.push('" title="',a.trim(q.replace(/<.*?>/g,"")))}p.push('">',q,"</a>");if(r){p.push('<a class="grid_select"></a>')}p.push('<em class="grid_ittab"></em>');p.push("</span>");if(D<y&&!d){p.push(q)}p.push("</div>");g.innerHTML=p.join("")}this.grid_head_table.html(this.el_cache.find("thead").eq(0).prepend(e));this.el_cache.parent().remove();delete this.el_cache;for(var C=0;C<y;C+=1){E[C].getElementsByTagName("div")[0].style.zIndex=y+1-C;o.push(E[C].getElementsByTagName("span")[0])}var s=a(E[0]);if(v.selectrows==="multi"){s.find(".grid_select").eq(0).remove();s.find(".grid_fixed_s").addClass("grid_no_move");var I=a(E[0]).find(".grid_thead_text").addClass("grid_all_check_box"),H=I.find("input")[0],m=document.createElement("input");if(this.is_qm||c.Browser.isIE7||c.Browser.isIE6){I.addClass("grid_all_check_box_qm")}m.type="checkbox";m.name=v.allboxname;m.className="grid_all_check";I[0].replaceChild(m,H);if(c.Browser.isIE6){a(m).on("focus",function(){a(this).blur()})}var B=document.createElement("i");B.className="grid_null_text";B.innerHTML="&nbsp;";I[0].appendChild(B);this.grid_all_check=I.find(".grid_all_check")}if(v.selectrows==="single"){s.find(".grid_select").eq(0).remove();s.find(".grid_fixed_s").addClass("grid_no_move")}},__renderBody:function(){var e=this.el,h=this.col_size,j=this.dom_body_col,g=document.createElement("tr");g.className="grid_width_norm";for(var d=0;d<h;d+=1){var f=j[d]=document.createElement("th");g.appendChild(f)}e.html("<thead></thead><tbody></tbody>");e.find("thead").append(g);this.grid_tbody=e.find("tbody").eq(0)},__packageTds:function(){var d=this.options,j=d.fixcolumnnumber,p=this.render_style,n=d.selectrows,h=this.selectrows_html={no:"",multi:'<input hidefocus="true" type="checkbox" name="'+d.checkboxname+'" />',single:'<input hidefocus="true" type="radio" name="'+d.checkboxname+'" />'}[n],g=this.col_size,f="";if(!this.write_style){f="left:0px;"}var m=[];var e=0;if(h!==""){e+=1;var k=m[0]={};if(j>0){k.html=['<div class="grid_fixed_d" style="z-index:',j+1,';"><span class="grid_fixed_s" style="',f,p[0],'/**/">',h,"</span></div>"].join("");k.style=""}else{k.style=p[0];k.html=h}}for(var l=e;l<g;l+=1){var o=m[l]={};if(l<j){o.html=['<div class="grid_fixed_d" style="z-index:',j+1-l,';"><span class="grid_fixed_s" style="',f,p[l],'/**/"><!---->',"</div>"].join("");o.style=""}else{o.style=p[l]}}this.tds_package=m},_setColWidth:function(m){var p=this.init_col_width,f=this.col_hidden,n=this.table_width,g=this.col_size,e=0;for(var l=g;l--;){if(f[l]===false){e+=p[l]}}var o=[];var h=0;var q=0;for(var k=g;k--;){if(f[k]===false){var d=Math.round(p[k]*n/e);h+=d;o[k]=d;q=k}else{o[k]=0}}o[q]+=n-h;this.col_width=o;this._setColWidthStyle();if(m){this._isScrolling(true)}},_setColWidthStyle:function(e){var h=this.col_width,i=this.dom_head_col,g=this.dom_body_col,d=this.col_size,j="",f;if(typeof e==="number"){f=h[e]-1+"px";i[e].style.width=f;g[e].style.width=f}else{for(;d--;){j=h[d]===0?0:h[d]-1+"px";i[d].style.width=j;g[d].style.width=j}}},_colHidden:function(v){var f=this.end_row,x=this.dom_th,z=this.dom_td,e=this.tds_package,g=this.dom_head_col,l=this.dom_body_col,B=this.col_hidden,y=this.col_width,d=this.col_width_backup,h=this.table_width,A=this.thead_map,o=this.extend_th,j=null,k=null;for(var w=this.col_size;w--;){if(B[w]===true){if(d[w]===-1||v){g[w].style.display="none";k=x[w];if(A.length){for(var s=A.length;s--;){if(!o[s][w]){j=A[s][w];if(j.colSpan>1){j.colSpan--}else{j.style.display="none"}}}}else{k.style.display="none"}for(var u=f;u--;){z[u][w].style.display="none"}l[w].style.display="none";e[w].style+="display:none;";d[w]=y[w];h-=y[w];y[w]=0}}else{if(d[w]!==-1){g[w].style.display="";k=x[w];if(A.length){for(var r=A.length;r--;){if(!o[r][w]){j=A[r][w];if(j.style.display==="none"){j.style.display=""}else{j.colSpan+=1}}}}else{k.style.display=""}for(var t=f;t--;){z[t][w].style.display=""}l[w].style.display="";e[w].style=e[w].style.replace(/display.*?($|;)/g,"");y[w]=d[w];h+=d[w];d[w]=-1}}}if(!this.options.adaptive){this.table_width=h}else{this.is_ittab=false}this._setLayout();if(this.persistence&&!v){this._triggerStatusChange()}},_triggerStatusChange:function(){var d=this.options,p=this.query,o=this.col_width,r=this.col_width_backup,h=this.col_hidden,f=this.col_index,s=!d.adaptive,j=this.thead_map.length===0&&d.colmove,q=0,n,e,m,k,g,l=[];for(k=this.col_size;k--;){if(h[k]){o[k]=r[k];l[k]=1}else{l[k]=0}q+=o[k]}g={hide:h,sortName:p.sortName,sortType:p.sortType,overall:q};if(window.JSON&&JSON.stringify){if(j){g.index=f}if(s){g.width=o}n=JSON.stringify(g)}else{n=["{",j?['"index":[',f.join(","),"],"].join(""):"",s?['"width":[',o.join(","),"],"].join(""):"",'"hide":[',l.join(","),"],",'"sortName":["',p.sortName.join('","'),'"],','"sortType":["',p.sortType.join('","'),'"],','"overall":',q,"}"].join("")}this.options.onstatuschange(n)},_isScrolling:function(f){var h=this.el,j=this.grid_width+2,g=this.table_width,i=this.box_height,d=h.height(),e=this.grid_scroll;if(this.options.adaptive&&!this.is_ittab){if(i<d){g=this.table_width=j-17}else{this.table_width=j;g=j+1}h.css("width",g);this.grid_head_table.css("width",g);e.css("left","-999999px");if(!f){this._setColWidth(true);this._setLayout(true)}}else{if(i<d&&j>=g+17){this.grid_table_hide.css("marginBottom",0);e.css("left","-999999px")}if(j<g&&i>=d+17){e.css({width:"",left:0,bottom:""});e.css("bottom",0);this.grid_table_hide.css("marginBottom",17)}if(j<g+17&&i<d||j<g&&i<d+17){e.css({width:j-17,left:0,bottom:""});e.css("bottom",0);this.grid_table_hide.css("marginBottom",17)}if(i>=d&&j>=g){this.grid_table_hide.css("marginBottom",0);e.css("left","-999999px")}}e.find("div").eq(0).css("width",g);e.scroll()},_setAutoHeight:function(){var g,f;if(this.auto_height){g=this.grid_table_box;f=27;var e=parseInt(g.css("marginBottom"),10)||((this.grid_width+2)<this.table_width?17:0);var d=Math.max(g.height()||this.row_size*f,f);this._setHeight(d+e+this.thead_height+(this.options.pagination&&this.row_size?40:0)+2)}},_setLayout:function(d){this._setStyleWidth();if(!this.options.titleellipsis||this.thead_map.length){this._setTheadHeight()}this._setStyleHeight();if(!d){this._isScrolling()}this._setAutoHeight()},_setTheadHeight:function(){this.grid_head.css("height","auto");var g=this.thead_height=this.grid_head.height(),j=this.dom_fixed[0],d=this.options.titleellipsis;this.box_height=this.grid_height-this.pagination_height-(this.options.titlelock?g:0);this.grid_overlay.css("height",g);for(var e=j.length;e--;){var f=j[e];var h=a(f).parents("th").height()-(this.is_qm?0:1)+"px";f.style.height=h;if(d){f.style.lineHeight=h}}},setConfig:function(d){if(this.persistence&&this.un_render){this._setPersistence(d)}this.options.datasource(this,this.getQuery())},setDatasource:function(f,d,e){if(this.persistence&&this.un_render&&typeof e==="string"){this._setPersistence(e)}f=f||[];d=d||0;this.row_size=f.length;this.data=a.extend(true,[],f);if(this.options.pagination){if(this.un_render){this.total_size=d;this.__createPagination()}if(this.total_size!==d){this.total_size=d;this._changepages()}}this._isEmpty();this._initProperty();this._renderTbody(NaN,NaN);this._setLayout();this._loading("hide");this._loadComplateCallBack();this.__setSortStyle();delete this.un_render},_setPersistence:function(n){var p,d=this.options,g=this.col_size,l,o,j,k,f,h;if(typeof n==="string"){try{p=a.parseJSON(n)}catch(m){}if(p){if(p.overall){this.table_width=p.overall;this.grid_head_table.css("width",this.table_width)}l=p.index;if(this.thead_map.length===0&&d.colmove&&typeof l==="object"&&g===l.length){this.col_index=l;this._sortPropertys(l)}this._createPropertys();o=p.sortName;j=p.sortType;if(a.type(o)==="array"&&a.type(j)==="array"){this.setQuery({sortName:o,sortType:j})}k=p.hide;if(typeof k==="object"&&g===k.length){for(h=0;h<g;h++){k[h]=!!k[h]}this.col_hidden=k}f=p.width;if(!d.adaptive&&typeof f==="object"&&g===f.length){this.col_width=f}}else{this._createPropertys()}}else{this._createPropertys()}this._createContent()},_sortPropertys:function(e){var g=this.col_size,j,h,d,f;h=this.dom_th;d=[];j=h[0].parentNode;for(f=0;f<g;f++){d[f]=h[e[f]];j.appendChild(d[f])}this.dom_th=d},_isEmpty:function(){var e=this.options;var d=this.row_size;if(d===0){this.grid_empty.show();this.grid_tfoot.hide();this.el.hide();this.pagination_height=0}else{this.grid_empty.hide();this.el.show();if(e.pagination){this.grid_tfoot.show();this.pagination_height=40}}this.box_height=this.grid_height-this.pagination_height-(e.titlelock?this.thead_height:0)},_initProperty:function(){var d=this;setTimeout(function(){d.grid_body[0].scrollTop=0},1);this.dom_tr=[];this.dom_td=[];this.dom_fixed.length=1;this.multi_checked=[];this.multi_checked_num=0;this.single_checked=NaN;this.odd=false;this.end_row=0;this.render_complete=false;if(this.grid_all_check){this.grid_all_check.prop("checked",false)}this.grid_tbody.html("");this.tr_start=0;this.tr_end=0},loadData:function(){this._loading("show");this.options.datasource(this,this.getQuery())},addData:function(g,e){if(a.type(g)==="object"){g=[g]}var d=g.length;if(d===0){return}g=a.extend(true,[],g);if(this.un_render){this.setDatasource(g);return}this.row_size+=g.length;this._isEmpty();var f=this.options.selectrows;if(typeof e==="number"&&e<this.row_size){this._spliceArray(this.data,e,g);if(f==="multi"){this._spliceArray(this.multi_checked,e,new Array(d))}else{if(f==="single"&&e<this.single_checked){this.single_checked+=d}}}else{this.data=this.data.concat(g)}this._renderTbody(d,e);if(this.pagination_obj){this._changepages()}this._setLayout();var h=this.options.adddata_callback;if(typeof h==="function"){h.call(this,g)}},__createPagination:function(){var e=this.options,f=this.query;if(!e.pagination){return}var d=this;window.cui(this.grid_tfoot).pagination({count:this.total_size,pagesize:f.pageSize,pageno:f.pageNo,pagesize_list:e.pagesize_list,tpls:{pagination:e.pagination_model},cls:e.pagination_model,on_page_change:function(h,g){f.pageNo=h;f.pageSize=g;d.loadData();d._changepages()}});this.pagination_obj=window.cui(this.grid_tfoot)},_changepages:function(){var d=this.query;this.pagination_obj.setInitData({count:this.total_size,pagesize:d.pageSize,pageno:d.pageNo});this.pagination_obj.reDraw()},_spliceArray:function(e,d,f){Array.prototype.splice.apply(e,[d,0].concat(f));return e},_renderTbody:function(g,r){var q=this.data,d=this.end_row,e=this.row_size,v=parseInt(this.box_height/27,10)+20,u=this.options.ellipsis;if(e===0){this.render_complete=true;this.append_rows_complete=true;return}this.render_complete=false;if(!isNaN(g)){if(this.grid_all_check){this.grid_all_check.prop("checked",false)}if(typeof r==="number"&&r<d){var w=this.dom_tr;for(var o=r;o<d;o+=1){w[o].removeAttribute("index")}var f=w[r],n=this._dataToDom(q,r,r+g),m=n.dom_tr;this._spliceArray(this.dom_tr,r,m);this._spliceArray(this.dom_td,r,n.dom_td);this._spliceArray(this.dom_fixed,r+1,n.dom_fixed);if(r>=this.tr_start&&r<this.tr_end||!u){var t=this.grid_tbody[0];for(var p=0;p<g;p+=1){t.insertBefore(m[p],f)}if(u){this.tr_end+=g}}else{if(r<this.tr_start&&u){this.tr_start+=g;this.tr_end+=g}var s=this.tr_frag;for(var l=0;l<g;l+=1){s.appendChild(m[l])}}this.end_row+=g;this._setAutoHeight();this._setOddEven(r);this._setNum(r)}else{this._lazyload()}}else{var h=Math.min(e,d+v+1);if(u){this.tr_end=h}this._appendRows(d,h)}},_loadComplateCallBack:function(){var d=this.options.loadcomplate_callback;if(typeof d==="function"){d.call(this,this)}},__setSortStyle:function(){var o=this.query,l=o.sortType,q=o.sortName,m=q.length,n=this.bind_name,g=this.dom_th,k,h,d,p,f,e={DESC:"desc",ASC:"asc"};loop_outer:for(h=this.col_size;h--;){p=n[h];d=g[h];for(k=0;k<m;k++){f=d.className.replace(/grid_sort_\w+/g,"");if(q[k]===p){d.className=f+" grid_sort_"+e[l[k]];continue loop_outer}d.className=f}}},_dataToDom:function(ao,M,A){var Q=this.options,ac=Q.oddevenclass,L=Q.oddevenrow,C=Q.ellipsis,am=this.col_size,g=this.dom_th,l=this.tds_package,q=this.bind_name,ad=this.bind_dot_name,ap=Q.fixcolumnnumber,e=this.num_col,p=this.col_render,v=Q.rowstylerender,E=Q.colstylerender,Y=typeof v==="function",F=typeof E==="function",t=this.render_method,Z=this.height_light,W=(this.selectrows_html!=="")?1:0,J=this.odd,s=Q.primarykey,k=typeof ao[0]==="object"&&ao[0].hasOwnProperty(s),y=this.create_dom_box,G=["<table>"];for(var ai=M;ai<A;ai+=1){G.push('<tr class="');if(L){if(J){G.push(ac)}J=!J}if(Z[ai]){G.push(" grid_highlight")}G.push('"');var z=ao[ai];if(k&&z.hasOwnProperty(s)){G.push(' pkey="');G.push(String(z[s]));G.push('"')}if(Y){var I=v(z);if(typeof I==="string"){G.push(' style="',I,'"')}}G.push(">");if(W===1){var K=l[0];G.push('<td class="grid_select_input');if(ap>0){G.push(" grid_fixed")}G.push('" style="',K.style,'">',K.html,"</td>")}var ag="",T="",X="",P="",ab="",U="",H=null,O=null,N=null,S=null;for(var aj=W;aj<ap;aj+=1){X=q[aj];P=ad[aj];if(e===aj){ab=ai+X}else{if(!X){ab=""}else{if(typeof P==="undefined"){ab=z[X]}else{ab=z[P[0]];if(ab&&typeof ab==="object"){ab=ab[P[1]]||""}else{ab=""}}}}var f="",ak="";H=p[aj];O=H[0];N=H[1];if(N){ab=N.callback(ab,N.format)||ab}if(O){U=O.render;ak=O.method;switch(U){case"colrender_fn":ab=O.callback(z,X)||ab;break;case"render_fn":S=O.col_json;S.el=g[aj];S.bindName=X;ab=O.callback(z,ai,S)||ab;break;case"fiexd_fn":ab=t[ak](z,O.options,ab)||ab;break}}if(ak==="button"||C){f=[ab,"</span>"].join("")}else{f=[ab,"</span>",ab].join("")}ag=l[aj];var R=ag.html.replace("<!---->",f);G.push('<td class="grid_fixed" style="',ag.style,'">');if(F){T=E(z,X);if(typeof T==="string"){R=R.replace("/**/",T)}}G.push(R,"</td>")}for(;aj<am;aj+=1){X=q[aj];P=ad[aj];ag=l[aj];if(e===aj){ab=ai+X}else{if(!X){ab=""}else{if(typeof P==="undefined"){ab=z[X]}else{ab=z[P[0]];if(ab&&typeof ab==="object"){ab=ab[P[1]]||""}else{ab=""}}}}H=p[aj];O=H[0];N=H[1];if(N){ab=N.callback(ab,N.format)||ab}if(O){U=O.render;switch(U){case"colrender_fn":ab=O.callback(z,X)||ab;break;case"render_fn":S=O.col_json;S.el=g[aj];S.bindName=X;ab=O.callback(z,ai,S)||ab;break;case"fiexd_fn":ab=t[O.method](z,O.options,ab)||ab;break}}var r=ag.style;if(F){T=E(z,X);if(typeof T==="string"){r+=";"+T}}G.push('<td style="',r,'">',ab,"</td>")}G.push("</tr>")}this.odd=J;G.push("</table>");y.innerHTML=G.join("");var al=[],h=[],ah=[],x=" "+Q.selectedrowclass,D=this.multi_checked,o=this.single_checked,d=y.getElementsByTagName("table")[0];for(var af=0,B=A-M;af<B;af+=1){var V=d.rows[af];al.push(V);var u=[];var an=[];for(var ae=0;ae<am;ae+=1){var aa=V.cells[ae];u.push(aa);if(ae<ap){an.push(aa.getElementsByTagName("span")[0])}}if(D[af+M]){V.className+=x;V.cells[0].getElementsByTagName("input")[0].setAttribute("checked","checked")}h.push(u);ah.push(an)}if(!isNaN(o)&&o>=M&&o<A){var w=d.rows[o-M];w.className+=x;w.cells[0].getElementsByTagName("input")[0].setAttribute("checked","checked")}return{dom_td:h,dom_tr:al,dom_fixed:ah}},_appendRows:function(k,e){var f=this.row_size;if(this.auto_height||!this.options.lazy){e=f}e=this.end_row=Math.min(f,e);var j=this._dataToDom(this.data,k,e);this.dom_tr=this.dom_tr.concat(j.dom_tr);this.dom_td=this.dom_td.concat(j.dom_td);this.dom_fixed=this.dom_fixed.concat(j.dom_fixed);var d=this.dom_tr;var h=this.grid_tbody[0];for(var g=k;g<e;g+=1){h.appendChild(d[g])}this.grid_table_box.css("paddingBottom",(f-e)*27);this.render_complete=e===f;this.append_rows_complete=true;this._setAutoHeight()},_setOddEven:function(e){var g=this.options;if(!g.oddevenrow){return}var d=this.dom_tr,k=this.end_row,j=g.oddevenclass,h=this.odd=e%2===0,f=e;for(;f<k;f+=1){if(!h){a(d[f]).addClass(j)}else{a(d[f]).removeClass(j)}h=!h}},_setNum:function(g){if(isNaN(this.num_col)){return}var j=this.dom_td,m=this.dom_fixed,k=this.num_col,d=this.bind_name[k],f=g,e=this.end_row;if(this.options.fixcolumnnumber>k){for(;f<e;f+=1){var h=m[f+1][k];var l=f+d;h.innerHTML=l;h.nextSibling.nodeValue=l}}else{for(;f<e;f+=1){j[f][k].innerHTML=f+d}}},hideCols:function(f){if(a.type(f)!=="object"){return}var j=this.col_hidden,g=this.col_size,h=this.bind_name;for(var e=0;e<g;e+=1){var d=f[h[e]];if(typeof d==="boolean"){j[e]=d}}this._colHidden(false)},getQuery:function(){var e=a.extend(true,{},this.query),d=this.custom_query;if(!d){return e}d.pageSize=e.pageSize;d.pageNo=e.pageNo;d.sortName=a.extend([],e.sortName);d.sortType=a.extend([],e.sortType);return d},setQuery:function(f){if(typeof f==="object"){this.custom_query=f}f=f||this.backup_query;var e=this.options.sortstyle,d=this.query;if(typeof f.pageSize==="number"){d.pageSize=f.pageSize}if(typeof f.pageNo==="number"){d.pageNo=f.pageNo}if(a.type(f.sortName)==="array"){d.sortName=a.extend([],f.sortName);if(d.sortName.length>e){d.sortName.length=e}}if(a.type(f.sortType)==="array"){d.sortType=a.extend([],f.sortType);if(d.sortType.length>e){d.sortType.length=e}}this._setPageSize();this._setSortTypeObj();if(this.pagination_obj){this._changepages()}},_setHeight:function(d){if(typeof d!=="number"||d-2===this.grid_height){return false}d-=2;this.box_height-=this.grid_height-d;this.grid_height=d;this._lazyload();this._setLayout();if(this.options.colhidden&&this.hideCol.hide_col){this.hideCol.hide_col.blur()}return true},setHeight:function(d){this.auto_height=!this._setHeight(d)},setWidth:function(e){if(typeof e!=="number"||e-2===this.grid_width){return}var d=this.ittab;if(d&&d.ittab_active){return}e-=2;if(this.options.adaptive){this.table_width=e-17;this.is_ittab=false}this.grid_width=e;this._setLayout();if(this.options.colhidden&&this.hideCol.hide_col){this.hideCol.hide_col.blur()}},setHighLight:function(f){var e=this.options.primarykey,g=this.data;if(g[0]&&g[0].hasOwnProperty(e)){for(var d=this.row_size;d--;){if(g[d][e]===f){if(d<this.end_row){a(this.dom_tr[d]).addClass("grid_highlight")}this.height_light[d]=true;break}}}},selectRowsByIndex:function(j,l){l=l!==false;var m=this.options.selectrows,e=this.data,k=[],g,d;if(m==="no"||j>=this.row_size){return[]}if(l!==false){l=true}if(typeof j==="number"){j=[j]}if(m==="single"){g=j[0];this._selectRows(g,l);k.push(e[g])}else{for(var f=0,h=j.length;f<h;f+=1){d=j[f];this._selectRows(d,l);k.push(e[d])}}return k},_pkToIndex:function(e,f){if(a.type(e)!=="array"){e=[e]}var h=this.data,d=this.row_size,p=this.options.primarykey;if(h[0].hasOwnProperty(p)===false){return[]}var l=e.length;var o=[];for(var k=0;k<l;k+=1){var n=e[k];var m=false;for(var g=d;g--;){if(h[g][p]===n){o.push(g);m=true;break}}if(!m&&f){o.push(-1)}}return o},selectRowsByPK:function(e,d){var f=this.options;if(f.selectrows==="no"||!this.row_size||this.data[0].hasOwnProperty(f.primarykey)===false){return[]}return this.selectRowsByIndex(this._pkToIndex(e,true),d)},_removeRow:function(e){var d=this.data;var f=d[e];this.data.splice(e,1);a(this.dom_tr[e]).remove();this.dom_tr.splice(e,1);this.dom_td.splice(e,1);this.multi_checked.splice(e,1);if(this.single_checked>e){this.single_checked--}this.dom_fixed.splice(e+1,1);return f},removeData:function(v){if(typeof v==="number"||a.type(v)==="array"){if(typeof v==="number"){v=[v]}v.sort(function(j,i){return j-i});var n=v.length,l=[],o=this.single_checked,m=this.multi_checked,d=this.options,q=d.selectrows,r=d.ellipsis;for(var k=0;k<n;k+=1){var p=v[k]-k;var h=this.row_size;if(isNaN(p)||p>=h){v[k]=0;break}this.row_size=h-1;if(p<this.end_row){if(r){if(p<this.tr_end){this.tr_end--}if(p<this.tr_start){this.tr_start--}}this.end_row--}if(q==="multi"){if(m[p]===true){this.multi_checked_num--}}else{if(q==="single"&&o===p){this.single_checked=NaN}}var t=this._removeRow(p);if(t){l.push(t)}}var f=this.row_size;if(f<=0){if(this.query.pageNo>1){this.query.pageNo-=1}this.row_size=0;this._isEmpty()}else{if(d.selectrows==="multi"){if(this.multi_checked_num===f){this.grid_all_check.prop("checked",true)}else{this.grid_all_check.prop("checked",false)}}var s=this.dom_tr;for(var g=this.end_row;g--;){s[g].removeAttribute("index")}var e=v[0]-0;this._setOddEven(e);this._setNum(e);this._lazyload()}this._setLayout();var u=d.removedata_callback;if(typeof u==="function"){u.call(this,l)}}},removeDataByPk:function(d){this.removeData(this._pkToIndex(d,false))},changeData:function(n,j){if(a.type(n)!=="object"){return}var d=this.options,o=d.primarykey,r=n[o];if(typeof r!=="undefined"){var k=this._pkToIndex(r,false)[0];j=k===undefined?j:k}if(typeof j!=="number"||j<0||j>=this.row_size){return}this.data[j]=a.extend(true,this.data[j],n);if(j>=this.end_row){return}var g=this._dataToDom([n],0,1),m=g.dom_td[0],f=this.dom_td[j],l=this.bind_name,e=d.fixcolumnnumber;this.odd=!this.odd;for(var h=this.col_size;h--;){var q=l[h];if(h<e){if(typeof q!=="number"){var s=a(f[h]).find(".grid_fixed_s")[0];var p=a(m[h]).find(".grid_fixed_s")[0].innerHTML;s.innerHTML=p;s.nextSibling.nodeValue=p}}else{if(typeof q!=="number"){f[h].innerHTML=m[h].innerHTML}}}},getData:function(){return a.extend(true,[],this.data)},getSelectedRowData:function(){var j=this.options.selectrows;if(j==="no"){return[]}var h=this.data;if(j==="single"){return isNaN(this.single_checked)?[]:[h[this.single_checked]]}if(this.multi_checked_num===this.row_size){return this.data}var g=this.multi_checked;var e=this.row_size;var d=[];for(var f=0;f<e;f+=1){if(g[f]){d.push(h[f])}}return d},getSelectedPrimaryKey:function(){var h=this.options,j=h.selectrows,g=h.primarykey,k=this.getSelectedRowData(),d=k.length;if(j==="no"||!d||k[0].hasOwnProperty(g)===false){return[]}var e=[];for(var f=0;f<d;f+=1){e.push(k[f][g])}return e},getSelectedIndex:function(){var h=this.options.selectrows;if(h==="no"){return[]}if(h==="single"){return[this.single_checked]}var g=this.multi_checked;var e=this.row_size;var d=[];for(var f=0;f<e;f+=1){if(g[f]){d.push(f)}}return d},getRowsDataByIndex:function(h){var g=this.data;if(typeof h==="number"){return[g[h]]}if(a.type(h)==="array"){var d=h.length;var e=[];for(var f=0;f<d;f+=1){var j=g[h[f]];if(j){e.push(j)}}return e}},getRowsDataByPK:function(e){var k=this.options.primarykey;var l=this.data;if(l[0].hasOwnProperty(k)){if(a.type(e)!=="array"){e=[e]}var d=e.length;var g=[];for(var h=0;h<d;h+=1){var m=e[h];for(var f=this.row_size;f--;){if(l[f][k]===m){g.push(l[f]);break}}}return g}else{return null}},_switchCol:function(g,f){var e=this.dom_head_col,k=this.dom_body_col,s=this.dom_td,q=this.dom_th,h=this.dom_fixed,l=this.dom_tr,o=this.options.fixcolumnnumber,t=this.num_col;this._switchArrayValue(this.bind_name,g,f);this._switchArrayValue(this.bind_dot_name,g,f);this._switchArrayValue(this.col_index,g,f);this._switchArrayValue(this.thead_text,g,f);this._switchArrayValue(this.render_style,g,f);this._switchArrayValue(this.col_render,g,f);this._switchArrayValue(this.col_width,g,f);this._switchArrayValue(this.init_col_width,g,f);this._switchArrayValue(this.col_width_backup,g,f);this._switchArrayValue(this.col_hidden,g,f);this._switchArrayValue(this.tds_package,g,f);if(!isNaN(t)){if(g===t){this.num_col=f-(g>f?0:1)}else{if(g>t&&f<=t){this.num_col=t+1}else{if(g<t&&f>t){this.num_col=t-1}}}}var u=null;var p=this.end_row;var d=this.hideCol;var r=d.dom_a;var m=d.grid_hidecol_list;if(f===this.col_size){var j=a(q[g]);j.appendTo(j.parent());var n=a(k[g]);n.appendTo(n.parent());var v=a(e[g]);v.appendTo(v.parent());for(;p--;){u=s[p];l[p].appendChild(u[g]);this._switchArrayValue(u,g,f)}if(m){if(this.selectrows_html!==""){m.appendChild(r[g-1])}else{m.appendChild(r[g])}}}else{a(q[g]).insertBefore(q[f]);a(k[g]).insertBefore(k[f]);a(e[g]).insertBefore(e[f]);for(;p--;){u=s[p];l[p].insertBefore(u[g],u[f]);this._switchArrayValue(u,g,f)}if(m){if(this.selectrows_html!==""){m.insertBefore(r[g-1],r[f-1])}else{m.insertBefore(r[g],r[f])}}}this._switchArrayValue(q,g,f);if(g<o||f<o){this._switchArrayValue(h[0],g,f)}this._switchArrayValue(k,g,f);this._switchArrayValue(e,g,f);if(this.persistence){this._triggerStatusChange()}},_switchArrayValue:function(d,f,e){if(d.length<e){d[e]=undefined}if(f>e){d.splice(e,0,d.splice(f,1)[0])}else{d.splice(e-1,0,d.splice(f,1)[0])}},ittab:{ittab_active:false,_init:function(l){var i=this,d=l.grid_overlay,g=l.grid_line,j=[],e=0,f=0,k=true,h=NaN,m=l.options.adaptive;l.grid_head_table.find(".grid_ittab").show();l.grid_head_table.on("mousedown",function(n){var p=n.target;f=0;if(p.className==="grid_ittab"){j=l.col_width;h=l._thIndex(a(p).parents("th")[0]);d.show().css("cursor","col-resize");var o=d.offset().left;e=n.pageX-o;g.show().css("left",e);k=false;d.off("mousemove").on("mousemove",function(q){q.stopPropagation();f=q.pageX-o;if(j[h]+f-e<24){f=24+e-j[h]}g.css("left",f);return false})}return false});d.on("mouseup mouseout",function(){if(k||isNaN(h)){return}k=true;a(this).hide();g.hide();if(f===0){return}var n=f-e;l.is_ittab=true;l.col_width[h]=j[h]+n;l.table_width=l.table_width+n;i.ittab_active=true;l._setColWidthStyle(!m?h:undefined);if(l.persistence){l._triggerStatusChange()}l._setLayout();i.ittab_active=false;e=f=0;h=NaN})}},hideCol:{_init:function(e){var d=this.hide_col=document.createElement("div");d.className="grid_hidecol";var f=e.thead_height;d.style.top=f+"px";d.tabIndex="1";e.grid_container.append(d);d=a(d);var k=e.col_size,l=e.thead_text,j="",h=0;if(e.selectrows_html!==""){h+=1}var g=['<div class="grid_hidecol_list" hidefocus="true" >'];for(;h<k;h+=1){j=a.trim(l[h].replace(/<.*?>/g,""));g.push('<a href="javascript:;" hidefocus="true" title=',j,'><input type="checkbox" checked="checked" />',j,"</a>")}g.push("</div>",'<div class="grid_hidecol_button">','<a href="javascript:;" hidefocus="true" class="grid_hidecol_confirm"></a>','<a href="javascript:;" hidefocus="true" class="grid_hidecol_cancel"></a>',"</div>");d.html(g.join(""));this.grid_hidecol_list=d.find(".grid_hidecol_list")[0];this.dom_a=this.grid_hidecol_list.getElementsByTagName("a");this.bindEvent(e,d)},bindEvent:function(r,g){var e=r.col_size,j=r.grid_box,i,f,p=null,s=false,d=0,h=g.find("input"),o=-1,m=this.dom_a,n=document.createElement("span"),q=r.options.titlelock;if(r.selectrows_html!==""){d+=1}r.grid_head_table.on("click",function(w){var y=w.target;i=j.offset().left;f=i+r.grid_width/2;if(y.className==="grid_select"){if(p){g.blur()}h=g.find("input");p=a(y).parents("th").addClass("grid_thead_select");var u=a(y).offset().left;var x=u-i+2;if(u>f){x-=126}var t=Math.max(r.box_height-(q?0:r.thead_height)-40,60);if(22*e>t){g.children(".grid_hidecol_list").css("height",t)}else{g.children(".grid_hidecol_list").css("height","")}g.css({left:x,top:r.thead_height}).show().focus().attr("hidefocus","true");l();var v=r._thIndex(p[0])-d;m[v].appendChild(n);h.eq(o).removeAttr("disabled").end().eq(v).attr("disabled","disabled");o=v;s=false}else{a(g).blur()}});g.on("blur",function(){if(s){g.focus();return}if(p){p.removeClass("grid_thead_select")}a(g).hide()});g.on("mouseover",function(){s=true});g.on("mouseout",function(){s=false});var k=r.col_hidden;g.on("click",function(v){var x=a(v.target),w=x.prop("className"),y=x.prop("tagName"),t=x.children("input").eq(0);if(w==="grid_hidecol_confirm"){for(var u=d;u<e;u+=1){k[u]=h.eq(u-d).prop("checked")===false}s=false;r._colHidden(false);a(this).blur();return false}if(w==="grid_hidecol_cancel"){l();s=false;a(this).blur();return false}if(y==="A"){if(!t.prop("disabled")){t.prop("checked",!t.prop("checked"))}return false}this.focus()});function l(){for(var t=d;t<e;t+=1){h.eq(t-d).prop("checked",k[t]!==true)}}setTimeout(l,100)}},moveCol:{_init:function(s){var g=a("<div></div>"),m=a("<div></div>"),o=s.grid_head_table.addClass("grid_col_move");g.addClass("grid_col_move_insert");m.addClass("grid_col_move_tag");s.grid_head.append(m).append(g);var e=s.options,d=s.grid_overlay,k=e.fixcolumnnumber,j=s.selectrows_html,i=null,q=0,n=[],l=[],p=NaN,h=NaN,f=false,r=true;o.on("mousedown",function(u){var E=a(u.target);if(!E.hasClass("grid_fixed_s")||E.hasClass("grid_no_move")){return}if(e.colhidden){s.hideCol.hide_col.blur()}r=false;i=s.col_hidden;var F=s.col_width,x=s.col_size,z=s.dom_th,I=s.dom_fixed[0],v=Math.round(o.offset().left),D=s.grid_scroll[0].scrollLeft,y=0,H=s.thead_height,G=E.parent().parent();p=s._thIndex(G[0]);q=0;n=[];l=[];var A=0,t=null,C=0,B=0;if(p<k){f=true;for(;A<k;A+=1){t=F[A];q+=t;C=Math.round(a(I[A]).offset().left)-v-D;if(i[A]===true){C=-100}n.push(C);l.push(C);if(!i[A]){l[A]=C+t/2}}n.push(q-D);l.push(q-D-1);if(j){n[0]=l[0]=-100}B=n[p]-1}else{f=false;for(A=k;A<x;A+=1){t=F[A];C=Math.round(a(z[A]).offset().left)-v-D;if(i[A]===true){C=-100}n.push(C);l.push(C);if(!i[A]){l[A-k]=C+t/2}}n.push(s.table_width-D);l.push(s.table_width-D-1);if(k===0&&j){n[0]=l[0]=-100}B=n[p-k]-1}m.show().css({left:B,width:G.width(),height:H,lineHeight:H+"px"}).html(E.find(".grid_thead_text").eq(0).html());g.show().css("height",H-4);d.show().css("cursor","move");var w=u.pageX;g.css("left",-1000);d.off("mousemove").on("mousemove",function(L){L.stopPropagation();y=L.pageX;m.css("left",B-w+y);var J=l.length;for(var K=0;K<J;K+=1){var M=l[K];if(M<0){continue}if(y<M){g.css("left",n[K]);if(f){h=K}else{h=K+k}break}}return false})});d.on("mouseup",function(){if(r){return}r=true;d.hide();g.hide();m.hide();if(isNaN(h)||isNaN(p)||h===p||h===p+1){return}if(p>h){s._switchCol(p,h);h=p=NaN;return}for(var t=p+1;t<h;t+=1){if(!i[t]){s._switchCol(p,h);h=p=NaN;break}}});d.on("mouseout",function(){d.hide();g.hide();m.hide();h=p=NaN})}}})})(window.comtop);(function(g,a){a.UI.scan=function(){var p={};for(var q=0;q<arguments.length;q++){switch(typeof arguments[q]){case"string":case"object":p.range=g(arguments[q]);break;case"boolean":p.databind=arguments[q];break}}p=g.extend({range:document,databind:true},p);i(p)};a.UI.scan.debug=false;a.UI.scan.textmode=false;a.UI.scan.disable=false;a.UI.scan.readonly=false;a.UI.scan.databind=n;a.UI.scan.setReadonly=o;var b,d=[],j=[];function i(s){b=null;d=[];j=[];b=g("[uitype]",s.range);b.each(function(){var u=g(this);var t=u.attr("uitype");if(u.data("uitype")||!a.UI[t.charAt(0).toUpperCase()+t.substring(1)]){b=b.not(u);return true}d.push(k(u,t))});var r=null;if(s.databind){n()}if(!a.UI.scan.textmode&&!a.UI.scan.disable){for(var q=0,p=b.length;q<p;q++){r=b.eq(q).data("uitype");if(r&&!r.options.textmode&&!r.options.disable){j.push(e(b.eq(q),d[q]));j.push(h(b.eq(q),d[q],r.tipPosition||r.options.el))}}}if(a.UI.scan.debug){c(s.databind)}s=undefined}function k(q,p){if(!p&&p===""){return false}if(p.toLocaleLowerCase()==="dialog"){q.addClass("cui-dialog").css("display","block");return{}}var r=m(q[0]);var w={validate:r.validate};var v={databind:r.databind};var u={tip:r.tip,trigger:r.tipTrigger?r.tipTrigger:"hover"};delete r.uitype;delete r.tipTrigger;delete r.tip;delete r.databind;delete r.validate;var s=p.charAt(0).toLowerCase()+p.substring(1);if(a.UI.scan.textmode){r.textmode=true;r.readonly=false;r.disable=false}if(a.UI.scan.disable){r.textmode=false;r.readonly=false;r.disable=true}if(a.UI.scan.readonly){r.readonly=true;r.textmode=false;r.disable=false}if(a.UI.scan.debug){try{q[s](r)}catch(t){j.push("["+p+":"+q.attr("id")+"]:\n")}}else{q[s](r)}return{opts:r,valiOpts:w,dbOpts:v,tipOpts:u}}function n(){if(!b||b.length===0){return}for(var q=0,p=b.length;q<p;q++){b.eq(q).data("uitype")&&j.push(f(b.eq(q),d[q]))}}function c(s){if(a.UI.scan.debug){var r=[];for(var q=0,p=j.length;q<p;q++){j[q]&&r.push(j[q])}r.length>0&&alert(r.join(""))}j=[];if(!s){b=undefined;d=[]}}function f(A,q){var z=q.dbOpts.databind;var y=null;var s=a.UI.scan.debug;if(z){var r=z.split(".");if(r.length<2){s&&(y="["+A.attr("uitype")+":"+A.attr("id")+"]:JSON;\n");return false}var u=[];var p;var w;for(var v=0,t=r.length;v<t;v++){if(v<t-1){u.push(r[v])}else{w=r[v]}}p=a.namespace(u.join("."));if(p.nodeName){s&&(y="["+A.attr("uitype")+":"+A.attr("id")+"]:"+u+"ID;\n");return false}var x=cui(p).databind();x.addBind(A,w)}return y}function e(s,t){var q=t.valiOpts.validate;var p="";if(q){var u=/^(?:\{.*\}|\[.*\])$/;if(!window.validater){window.validater=cui().validate()}if(u.test(q)){try{q=g.parseJSON(q.replace(/\\'/g,"#@@#").replace(/'/g,'"').replace(/#@@#/g,"'"))}catch(v){p="["+s.attr("uitype")+":"+s.attr("id")+"]:JSON;\n"}}else{try{q=l(q)}catch(v){p="["+s.attr("uitype")+":"+s.attr("id")+"]:;\n"}}switch(g.type(q)){case"array":for(var r=0;r<q.length;r++){if(q[r].rule){window.validater.add(cui(s),q[r].type,q[r].rule)}else{window.validater.add(cui(s),q[r].type)}}break;case"string":window.validater.add(cui(s),q)}}return p}function h(r,s,q){var p="";q=g(q,r);if(cui(r).options.textmode!=undefined&&!s.tipOpts.tip){r.attr("tip","");s.tipOpts.tip=""}if(s.tipOpts.tip!=undefined){try{cui.tip(q,{trigger:s.tipOpts.trigger,tipEl:r})}catch(t){p="["+r.attr("uitype")+":"+r.attr("id")+"]:;\n"}}return p}function m(q){var p=g(q);return{isScanner:true,databind:p.attr("databind"),validate:p.attr("validate"),tip:p.attr("tip"),tipTrigger:p.attr("tip_trigger")}}function l(r){var p=r.split("."),s=window;for(var q=0;q<p.length;q++){s=s[p[q]]}return(typeof s==="object"&&!s.nodeName)?s:r}function o(q,u){q=typeof q==="undefined"?true:q;u=typeof u==="undefined"?"body":u;var t=[];var r=g(u);var s,p;if(u!=="document"&&u!=="body"&&u!=="html"){for(s=0,p=a.UI.componentList.length;s<p;s++){if(r.find(a.UI.componentList[s].options.el).length){t.push(a.UI.componentList[s])}}}else{t=a.UI.componentList}for(s=0,p=t.length;s<p;s++){if(typeof t[s].setReadonly==="function"){t[s].setReadonly(q)}}}})(window.comtop.cQuery,window.comtop);